import{r,j as e}from"./index-Ba7ahvR2.js";import{N as w}from"./network-cPlZonAv.js";import{I as v}from"./info-BsMTVB_j.js";import{Z as I}from"./zap-CdOxHdv8.js";import{B as C}from"./binary-BgwA7oxk.js";const y=s=>{const d=s.split(".");if(d.length!==4)return null;let l=0;for(const u of d){const a=parseInt(u,10);if(isNaN(a)||a<0||a>255)return null;l=(l<<8)+a}return l>>>0},i=s=>[s>>>24&255,s>>>16&255,s>>>8&255,s&255].join("."),j=s=>s.toString(2).padStart(32,"0"),D=()=>{const[s,d]=r.useState("visual"),[l,u]=r.useState("192.168.1.1"),[a,N]=r.useState(24),[b,S]=r.useState("192.168.1.50"),[k,M]=r.useState("192.168.1.0/24"),[H,m]=r.useState("idle"),[g,P]=r.useState(100),h=r.useMemo(()=>{const t=y(l)||0,n=4294967295<<32-a>>>0,o=~n>>>0,x=(t&n)>>>0,c=(x|o)>>>0,p=j(t),f=j(n);return{mask:i(n),wildcard:i(o),network:i(x),broadcast:i(c),firstUsable:i(x+1),lastUsable:i(c-1),totalHosts:Math.pow(2,32-a),usableHosts:a>=31?0:Math.pow(2,32-a)-2,binIp:p,binMask:f}},[l,a]);return r.useEffect(()=>{if(!b||!k){m("idle");return}try{const t=y(b),[n,o]=k.split("/"),x=y(n),c=parseInt(o,10);if(t===null||x===null||isNaN(c)||c<0||c>32){m("error");return}const p=4294967295<<32-c>>>0;(t&p)>>>0===(x&p)>>>0?m("ok"):m("ng")}catch{m("error")}},[b,k]),r.useMemo(()=>{if(g<=0)return null;const t=Math.ceil(Math.log2(g+2)),n=32-t,o=Math.pow(2,t)-2;return n<0?{error:"上限超過"}:{cidr:n,maxHosts:o,mask:i(4294967295<<t>>>0),overhead:o-g}},[g]),e.jsxs("div",{className:"max-w-5xl mx-auto space-y-10 pb-20",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 min-h-[500px]",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(w,{className:"text-cyan-500"}),"IPサブネット計算機"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl mb-8",children:[e.jsx("button",{onClick:()=>d("visual"),className:`py-2 rounded-lg text-xs font-bold transition-all ${s==="visual"?"bg-white dark:bg-gray-700 text-cyan-600 shadow-sm":"text-gray-500"}`,children:"ビジュアル"}),e.jsx("button",{onClick:()=>d("check"),className:`py-2 rounded-lg text-xs font-bold transition-all ${s==="check"?"bg-white dark:bg-gray-700 text-cyan-600 shadow-sm":"text-gray-500"}`,children:"包含判定"}),e.jsx("button",{onClick:()=>d("calc"),className:`py-2 rounded-lg text-xs font-bold transition-all ${s==="calc"?"bg-white dark:bg-gray-700 text-cyan-600 shadow-sm":"text-gray-500"}`,children:"ホスト計算"})]}),s==="visual"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-500 mb-2",children:"IPアドレス"}),e.jsx("input",{type:"text",value:l,onChange:t=>u(t.target.value),className:"w-full p-3 rounded-xl border dark:bg-gray-800 font-mono"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-500",children:"CIDR"}),e.jsxs("span",{className:"font-mono",children:["/",a]})]}),e.jsx("input",{type:"range",min:"0",max:"32",value:a,onChange:t=>N(Number(t.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]})]}),e.jsxs("div",{className:"bg-slate-900 rounded-2xl p-6 text-white font-mono text-sm space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("p",{children:["Network: ",h.network]}),e.jsxs("p",{children:["Broadcast: ",h.broadcast]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-700",children:[e.jsxs("p",{className:"text-cyan-400",children:["Mask: ",h.mask]}),e.jsxs("p",{className:"text-green-400",children:["Usable: ",h.usableHosts.toLocaleString()," hosts"]})]})]})]}),s!=="visual"&&e.jsx("div",{className:"text-center py-20 text-gray-400",children:"準備中..."})]}),e.jsxs("article",{className:"p-8 bg-white dark:bg-dark-lighter rounded-3xl border border-gray-100 dark:border-gray-700 prose dark:prose-invert max-w-none shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-black flex items-center gap-2 mb-6",children:[e.jsx(v,{className:"text-blue-500"}),"IPサブネット計算の基本と実務での役割"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 text-sm leading-relaxed text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(I,{size:18,className:"text-cyan-600"}),"ネットワーク設計を正確に"]}),e.jsx("p",{children:"サブネット化は、大きなネットワークを小さなグループ（サブネット）に分割し、トラフィックの効率化やセキュリティ向上を図る手法です。当ツールは、CIDR（スラッシュ記法）に基づいたサブネットマスク、ブロードキャストアドレス、および割り当て可能なIP範囲を瞬時に算出します。インフラエンジニアやCCNA等の学習者にとって必須のツールです。"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(C,{size:18,className:"text-cyan-600"}),"2進数レベルでの視覚的理解"]}),e.jsx("p",{children:"IPアドレスのネットワーク部とホスト部が2進数でどのように分かれているかを可視化することで、計算の仕組みを直感的に理解できます。包含判定機能を使えば、特定のIPが特定のネットワーク範囲内に正しく収まっているかを簡単にテストでき、ルーティング設定やファイアウォールの設計ミスを未然に防げます。"})]})]})]})]})};export{D as default};
