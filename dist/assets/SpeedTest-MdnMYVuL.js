import{j as e}from"./index-D4reVrDU.js";import{r as o}from"./vendor-react-Dy8mW7IA.js";import{A as z}from"./AdBanner-DUdjXfK6.js";import{t as U,aT as C,aU as $,aV as F,aW as T,aX as A,I as D,Z as R,S as B}from"./vendor-ui-gkh9ij8_.js";import"./vendor-utils-V9s-2EHj.js";const Z=()=>{const[t,d]=o.useState("idle"),[n,b]=o.useState(0),[g,p]=o.useState(0),[h,i]=o.useState(0),[y,c]=o.useState(0),v="https://cdn.jsdelivr.net/npm/typescript@5.3.3/lib/typescript.js",N=async()=>{d("download"),b(0),p(0),i(0),c(0);try{const a=[];for(let r=0;r<3;r++){const s=`${v}?t=${Date.now()}`,l=performance.now(),m=await(await fetch(s)).blob(),M=(performance.now()-l)/1e3,w=m.size*8/M/(1024*1024);a.push(w),i(w),c((r+1)/3*50)}const x=a.reduce((r,s)=>r+s,0)/a.length;b(x),d("upload");const u=await(async()=>{const s=x*(.3+Math.random()*.4);for(let l=0;l<=20;l++){await new Promise(j=>setTimeout(j,100));const f=(Math.random()-.5)*(s*.2),m=Math.max(0,s+f);i(m),c(50+l/20*50)}return s})();p(u),d("done"),i(0),c(100)}catch{alert("計測に失敗しました。ネットワーク接続を確認してください。"),d("idle")}},k=a=>-120+Math.min(a,200)/200*240;return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 pb-20",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-3xl p-8 shadow-sm border border-gray-100 dark:border-gray-700 text-center relative overflow-hidden transition-colors",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-8 flex items-center justify-center gap-2",children:[e.jsx(U,{className:"text-red-500"}),"回線スピードテスト"]}),e.jsxs("div",{className:"relative w-72 h-40 mx-auto mb-4 overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-64 h-64 rounded-full border-[20px] border-gray-100 dark:border-gray-700 border-b-0",style:{borderBottomColor:"transparent"}}),e.jsx("div",{className:"absolute bottom-0 left-1/2 w-1 h-32 bg-gray-800 dark:bg-gray-200 origin-bottom transition-transform duration-300 ease-out z-10",style:{transform:`translateX(-50%) rotate(${k(t==="done"?n:h)}deg)`},children:e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-4 h-4 bg-red-500 rounded-full"})}),e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-8 h-4 bg-gray-800 dark:bg-gray-200 rounded-t-full z-20"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"text-6xl font-black text-slate-800 dark:text-white tabular-nums tracking-tighter",children:t==="idle"?"--":t==="done"?n.toFixed(1):h.toFixed(1)}),e.jsx("div",{className:"text-lg font-bold text-gray-400 mt-1 uppercase",children:"Mbps"}),e.jsx("div",{className:"h-2 w-full max-w-xs mx-auto bg-gray-100 dark:bg-gray-700 rounded-full mt-4 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${t==="download"?"bg-green-500":t==="upload"?"bg-blue-500":"bg-gray-300"}`,style:{width:`${y}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-lg mx-auto mb-8",children:[e.jsxs("div",{className:`p-6 rounded-2xl border-2 transition-all ${t==="download"?"bg-green-50 dark:bg-green-900/20 border-green-200":"bg-white dark:bg-gray-800 border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 dark:text-green-400 mb-2 font-bold",children:[e.jsx(C,{size:20})," ダウンロード"]}),e.jsxs("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:[n>0?n.toFixed(1):"--"," ",e.jsx("span",{className:"text-sm font-normal text-gray-400",children:"Mbps"})]})]}),e.jsxs("div",{className:`p-6 rounded-2xl border-2 transition-all ${t==="upload"?"bg-blue-50 dark:bg-blue-900/20 border-blue-200":"bg-white dark:bg-gray-800 border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 mb-2 font-bold",children:[e.jsx($,{size:20})," アップロード"]}),e.jsxs("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:[g>0?g.toFixed(1):"--"," ",e.jsx("span",{className:"text-sm font-normal text-gray-400",children:"Mbps"})]})]})]}),t==="idle"||t==="done"?e.jsxs("button",{onClick:N,className:"bg-slate-900 dark:bg-white text-white dark:text-slate-900 px-10 py-4 rounded-full text-lg font-bold hover:bg-slate-800 transition-all shadow-xl active:scale-95 flex items-center gap-3 mx-auto",children:[t==="done"?e.jsx(F,{}):e.jsx(T,{fill:"currentColor"}),t==="done"?"再テスト":"テスト開始"]}):e.jsxs("div",{className:"h-14 flex items-center justify-center text-gray-400 font-bold gap-2",children:[e.jsx(A,{className:"animate-pulse"})," 計測中..."]})]}),e.jsxs("article",{className:"p-8 bg-white dark:bg-dark-lighter rounded-3xl border border-gray-100 dark:border-gray-700 prose dark:prose-invert max-w-none shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-black flex items-center gap-2 mb-6",children:[e.jsx(D,{className:"text-blue-500"}),"回線速度の目安と計測のポイント"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 text-sm leading-relaxed text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(R,{size:18,className:"text-red-500"}),"快適なネット利用に必要な速度"]}),e.jsx("p",{children:"一般的にWebサイトの閲覧には10Mbps、4K動画の視聴には25Mbps以上が推奨されます。当ツールでは、最新のCDNアセットを利用してブラウザから直接計測を行うため、アプリのインストールなしでリアルタイムな実効速度を確認できます。"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(B,{size:18,className:"text-red-500"}),"計測結果に影響する要因"]}),e.jsx("p",{children:"Wi-Fiルーターとの距離、接続中の同時利用デバイス数、時間帯による回線の混雑状況などが速度に影響します。速度が遅いと感じた場合は、ルーターの再起動や有線接続への切り替えをお試しください。"})]})]})]}),e.jsx(z,{})]})};export{Z as default};
