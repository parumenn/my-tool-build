import{c as Z,r as i,a3 as me,j as e,m as he,a4 as be,f as pe,X as u,P as R,a as W,a6 as ye,Z as ue,g as fe}from"./index-RR8jAcUN.js";import{W as je}from"./WorkspaceContext-BL6KzqDm.js";import{T as B}from"./trash-2-Cy76XVB1.js";import{a as ke,C as we}from"./chevron-left-C8v90zab.js";import{C as H}from"./circle-CA6VusRS.js";import{I as q}from"./info-BzU2FlfQ.js";import{L as ve}from"./link-Dhx7yBPB.js";import{C as F}from"./chevron-right-CDj_IGXy.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=Z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=Z("Triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),Ue=()=>{const k=i.useContext(je),[T]=me(),h=T.get("id"),$=T.get("token"),[w,K]=i.useState(""),[D,G]=i.useState(""),[E,I]=i.useState(""),[x,y]=i.useState([{id:"p1",type:"date",title:"日程候補",candidates:[]}]),[A,P]=i.useState(new Date),[b,M]=i.useState({start:"19:00",end:"21:00"}),[v,V]=i.useState(!0),[d,U]=i.useState(null),[N,p]=i.useState(!1),[Ne,X]=i.useState(""),[Q,ee]=i.useState(!1),[te,C]=i.useState(!1),[g,S]=i.useState({name:"",comment:""}),[f,z]=i.useState({}),[Ce,ae]=i.useState(""),[Se,re]=i.useState(""),[se,_]=i.useState(!1);i.useEffect(()=>{h?L():U(null)},[h]);const L=async()=>{p(!0);try{const t=await fetch(`./backend/schedule_api.php?action=get&id=${h}`);if(!t.ok)throw new Error("イベントが見つかりません");const a=await t.json();a.polls&&(a.polls=a.polls.map(r=>({...r,candidates:r.candidates.map(s=>typeof s=="string"?{name:s,note:""}:s)}))),U(a),$&&ee(!0)}catch(t){X(t.message)}finally{p(!1)}},j=(t,a,r="")=>{const s=[...x];s[t].candidates.some(n=>n.name===a)||(s[t].candidates.push({name:a,note:r}),s[t].type==="date"&&s[t].candidates.sort((n,l)=>new Date(n.name.split(" ")[0]).getTime()-new Date(l.name.split(" ")[0]).getTime()),y(s))},O=(t,a)=>{const r=[...x];r[t].candidates.splice(a,1),y(r)},le=t=>{const a=`${t.getFullYear()}/${t.getMonth()+1}/${t.getDate()} (${["日","月","火","水","木","金","土"][t.getDay()]})`,r=v?`${a} ${b.start}〜${b.end}`:a;j(0,r,"")},de=async()=>{if(!w.trim()){alert("イベント名を入力してください");return}if(x[0].candidates.length===0){alert("日程候補を少なくとも1つ選択してください");return}p(!0);try{const a=await(await fetch("./backend/schedule_api.php?action=create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:w,description:D,deadline:E,polls:x})})).json();if(a.status==="success"){const r=window.location.href.split("?")[0];ae(`${r}?id=${a.id}`),re(`${r}?id=${a.id}&token=${a.admin_token}`),window.location.href=`${r}?id=${a.id}&token=${a.admin_token}`}}catch{alert("作成に失敗しました")}finally{p(!1)}},ne=()=>{if(!d)return;const t={};d.polls.forEach(a=>{t[a.id]=a.candidates.map(()=>({status:2,comment:""}))}),z(t),S({name:"",comment:""}),C(!0)},oe=async()=>{if(!g.name.trim()){alert("名前を入力してください");return}p(!0);try{(await fetch("./backend/schedule_api.php?action=answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_id:h,name:g.name,comment:g.comment,selections:f})})).ok?(C(!1),L()):alert("保存に失敗しました")}catch{alert("通信エラー")}finally{p(!1)}},ie=async()=>{if(confirm("本当に削除しますか？"))try{await fetch("./backend/schedule_api.php?action=delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h,token:$})}),window.location.href=window.location.href.split("?")[0]}catch{alert("削除失敗")}},ce=(t,a)=>{const r=t.candidates[a];try{const s=r.name.split(" ")[0],n=r.name.match(/(\d{1,2}:\d{2})/g);let l=s.replace(/\//g,"")+"T000000",o=s.replace(/\//g,"")+"T235959";if(n&&n.length>=1)if(l=s.replace(/\//g,"")+"T"+n[0].replace(":","")+"00",n.length>=2)o=s.replace(/\//g,"")+"T"+n[1].replace(":","")+"00";else{const c=new Date(s+" "+n[0]);c.setHours(c.getHours()+1),o=c.getFullYear()+String(c.getMonth()+1).padStart(2,"0")+String(c.getDate()).padStart(2,"0")+"T"+String(c.getHours()).padStart(2,"0")+String(c.getMinutes()).padStart(2,"0")+"00"}const m=`https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent((d==null?void 0:d.title)||"予定")}&dates=${l}/${o}&details=${encodeURIComponent((d==null?void 0:d.description)||"")}`;window.open(m,"_blank")}catch{alert("日時形式の解析に失敗しました")}},xe=t=>t.startsWith("http://")||t.startsWith("https://"),ge=()=>{const t=A.getFullYear(),a=A.getMonth(),r=new Date(t,a,1).getDay(),s=new Date(t,a+1,0).getDate(),n=[];for(let l=0;l<r;l++)n.push(null);for(let l=1;l<=s;l++)n.push(new Date(t,a,l));return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("button",{onClick:()=>P(new Date(t,a-1,1)),className:"p-1 text-gray-600 dark:text-gray-300",children:e.jsx(we,{size:20})}),e.jsxs("span",{className:"font-bold text-sm text-gray-800 dark:text-white",children:[t,"年 ",a+1,"月"]}),e.jsx("button",{onClick:()=>P(new Date(t,a+1,1)),className:"p-1 text-gray-600 dark:text-gray-300",children:e.jsx(F,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center mb-1 text-[10px] font-bold text-gray-500",children:[e.jsx("div",{className:"text-red-500",children:"日"}),e.jsx("div",{children:"月"}),e.jsx("div",{children:"火"}),e.jsx("div",{children:"水"}),e.jsx("div",{children:"木"}),e.jsx("div",{children:"金"}),e.jsx("div",{className:"text-blue-500",children:"土"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:n.map((l,o)=>e.jsx("button",{disabled:!l,onClick:()=>l&&le(l),className:`aspect-square rounded-md flex items-center justify-center text-xs font-bold transition-all ${l?"bg-white dark:bg-gray-700 hover:bg-teal-100 dark:hover:bg-teal-900/50 shadow-sm text-gray-700 dark:text-gray-200":"invisible"}`,children:l==null?void 0:l.getDate()},o))}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold mb-2 cursor-pointer text-gray-600 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:l=>V(l.target.checked),className:"rounded text-teal-600 focus:ring-teal-500"}),"時間を指定"]}),v&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("input",{type:"time",value:b.start,onChange:l=>M({...b,start:l.target.value}),className:"p-1.5 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full"}),e.jsx("span",{className:"text-gray-400",children:"~"}),e.jsx("input",{type:"time",value:b.end,onChange:l=>M({...b,end:l.target.value}),className:"p-1.5 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full"})]})]})]})};return h?N?e.jsxs("div",{className:"p-10 text-center",children:[e.jsx("div",{className:"animate-spin text-teal-500 text-4xl mx-auto mb-4",children:"C"}),"読み込み中..."]}):d?e.jsxs("div",{className:`mx-auto max-w-5xl pb-20 ${k?"p-2":"space-y-6"}`,children:[e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-3xl p-4 md:p-10 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-black text-gray-800 dark:text-white mb-2",children:d.title}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs md:text-sm whitespace-pre-wrap",children:d.description})]}),Q&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{const t=window.location.href.split("&token")[0];navigator.clipboard.writeText(t),_(!0),setTimeout(()=>_(!1),2e3)},className:"flex items-center gap-2 px-4 py-2 bg-teal-100 dark:bg-teal-900/30 text-teal-700 dark:text-teal-300 rounded-xl font-bold text-xs hover:bg-teal-200 transition-colors",children:[se?e.jsx(he,{size:14}):e.jsx(be,{size:14})," URLコピー"]}),e.jsx("button",{onClick:ie,className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 rounded-xl hover:bg-red-200 transition-colors",children:e.jsx(B,{size:16})})]})]}),d.deadline&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-red-50 dark:bg-red-900/20 text-red-600 rounded-full text-[10px] font-bold mb-6",children:[e.jsx(pe,{size:12})," 期限: ",d.deadline.replace("T"," ")]}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 dark:border-gray-700 rounded-2xl",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800",children:[e.jsx("th",{className:"p-3 min-w-[120px] border-b border-r dark:border-gray-700 sticky left-0 bg-gray-50 dark:bg-gray-800 z-10 font-bold text-xs",children:"参加者 / 候補"}),d.polls[0].candidates.map((t,a)=>e.jsxs("th",{className:"p-2 min-w-[100px] border-b border-r dark:border-gray-700 font-bold text-center relative group text-xs",children:[e.jsx("div",{className:"text-gray-800 dark:text-white px-2",children:t.name}),t.note&&e.jsx("div",{className:"text-[10px] text-gray-500 font-normal mt-1 truncate",children:t.note}),e.jsx("button",{onClick:()=>ce(d.polls[0],a),className:"absolute top-0 right-0 opacity-0 group-hover:opacity-100 text-gray-400 hover:text-blue-500 p-1",children:e.jsx(ke,{size:12})})]},a))]}),e.jsxs("tr",{className:"bg-teal-50 dark:bg-teal-900/20",children:[e.jsx("th",{className:"p-2 border-b border-r dark:border-gray-700 sticky left-0 bg-teal-50 dark:bg-teal-900/20 z-10 text-teal-800 dark:text-teal-200 font-bold text-right text-xs",children:"○の数"}),d.polls[0].candidates.map((t,a)=>{const r=d.answers.reduce((s,n)=>{var o,m;const l=(m=(o=n.selections[d.polls[0].id])==null?void 0:o[a])==null?void 0:m.status;return s+(l===2?1:l===1?.5:0)},0);return e.jsx("td",{className:"p-2 border-b border-r dark:border-gray-700 text-center font-black text-teal-600 dark:text-teal-400 text-sm",children:r},a)})]})]}),e.jsx("tbody",{children:d.answers.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:d.polls[0].candidates.length+1,className:"p-8 text-center text-gray-400 text-xs",children:"まだ回答がありません"})}):d.answers.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsxs("td",{className:"p-3 border-b border-r dark:border-gray-700 sticky left-0 bg-white dark:bg-dark-lighter z-10",children:[e.jsx("div",{className:"font-bold text-gray-800 dark:text-gray-200 text-xs",children:t.name}),t.comment&&e.jsxs("div",{className:"text-[10px] text-gray-500 mt-0.5 flex items-center gap-1",children:[e.jsx(J,{size:8})," ",t.comment]})]}),d.polls[0].candidates.map((a,r)=>{var o;const s=(o=t.selections[d.polls[0].id])==null?void 0:o[r],n=s==null?void 0:s.status,l=s==null?void 0:s.comment;return e.jsx("td",{className:"p-2 border-b border-r dark:border-gray-700 text-center relative group",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[n===2?e.jsx(H,{className:"text-red-500 fill-red-50 dark:fill-red-900/30",size:18}):n===1?e.jsx(Y,{className:"text-yellow-500 fill-yellow-50 dark:fill-yellow-900/30",size:18}):e.jsx(u,{className:"text-gray-300",size:18}),l&&e.jsx("div",{className:"absolute bottom-0 right-0 text-gray-400",children:e.jsx(J,{size:10,className:"text-blue-400"})}),l&&e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-32 bg-gray-900 text-white text-[10px] rounded p-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:l})]})},r)})]},t.id))})]})}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("button",{onClick:ne,className:"bg-teal-600 text-white px-8 py-3 rounded-full font-black text-sm md:text-base shadow-xl hover:bg-teal-700 hover:scale-105 transition-all flex items-center justify-center gap-2 mx-auto",children:[e.jsx(R,{strokeWidth:3,size:18})," 出欠を入力する"]})})]}),d.polls.length>1&&d.polls.slice(1).map(t=>e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-3xl p-4 md:p-8 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(q,{className:"text-blue-500",size:18})," ",t.title]}),e.jsx("div",{className:"space-y-3",children:t.candidates.map((a,r)=>{const s=d.answers.reduce((n,l)=>{var m,c;const o=(c=(m=l.selections[t.id])==null?void 0:m[r])==null?void 0:c.status;return n+(o===2?1:o===1?.5:0)},0);return e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 gap-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:a.name}),a.note&&(xe(a.note)?e.jsxs("a",{href:a.note,target:"_blank",rel:"noreferrer",className:"text-[10px] text-blue-500 hover:underline break-all flex items-center gap-1 mt-1",children:[e.jsx(ve,{size:10})," ",a.note]}):e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:a.note}))]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500",children:"スコア:"}),e.jsx("span",{className:"text-lg font-black text-teal-600",children:s})]})]},r)})})]},t.id)),te&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-2xl max-h-[90vh] rounded-3xl shadow-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-900",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:"出欠を入力"}),e.jsx("button",{onClick:()=>C(!1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:e.jsx(u,{size:20})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto flex-1 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-xs font-bold text-gray-500",children:["お名前 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:g.name,onChange:t=>S({...g,name:t.target.value}),className:"w-full p-3 rounded-xl border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-bold text-base focus:border-teal-500 outline-none",placeholder:"山田 太郎"})]}),d.polls.map(t=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-bold text-sm text-gray-700 dark:text-gray-300 border-l-4 border-teal-500 pl-2",children:t.title}),e.jsx("div",{className:"space-y-2",children:t.candidates.map((a,r)=>{var n;const s=((n=f[t.id])==null?void 0:n[r])||{status:1,comment:""};return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 p-2 rounded-xl bg-gray-50 dark:bg-gray-700/50 border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-xs text-gray-800 dark:text-white",children:a.name}),a.note&&e.jsx("div",{className:"text-[10px] text-gray-500 truncate max-w-[200px]",children:a.note})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex bg-white dark:bg-gray-800 rounded-lg p-1 border dark:border-gray-600 shadow-sm shrink-0",children:[{val:2,icon:H,color:"text-red-500"},{val:1,icon:Y,color:"text-yellow-500"},{val:0,icon:u,color:"text-gray-400"}].map(l=>e.jsx("button",{onClick:()=>{const o={...f};o[t.id][r]={...s,status:l.val},z(o)},className:`p-1.5 rounded-md transition-all ${s.status===l.val?"bg-gray-100 dark:bg-gray-600 "+l.color:"text-gray-300"}`,children:e.jsx(l.icon,{size:18,fill:s.status===l.val?"currentColor":"none",fillOpacity:.2})},l.val))}),e.jsx("input",{type:"text",placeholder:"コメント",value:s.comment,onChange:l=>{const o={...f};o[t.id][r]={...s,comment:l.target.value},z(o)},className:"flex-1 sm:w-32 p-2 rounded-lg border dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-xs"})]})]},r)})})]},t.id)),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500",children:"全体コメント"}),e.jsx("textarea",{value:g.comment,onChange:t=>S({...g,comment:t.target.value}),className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm h-20",placeholder:"遅れる可能性があります、等"})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-900",children:e.jsx("button",{onClick:oe,className:"w-full py-3 bg-teal-600 text-white font-black rounded-xl shadow-lg hover:bg-teal-700 transition-all text-sm",children:"回答を保存する"})})]})}),!k&&e.jsx(W,{})]}):e.jsx("div",{className:"p-10 text-center text-red-500",children:"イベントが見つかりません"}):e.jsxs("div",{className:"max-w-4xl mx-auto pb-20 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-3xl p-4 md:p-8 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black text-gray-800 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(ye,{className:"text-teal-600"}),"新規イベント作成"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:["イベント名 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:w,onChange:t=>K(t.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white font-bold text-base focus:border-teal-500 outline-none",placeholder:"例: 開発部 歓迎会"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"詳細 / メモ"}),e.jsx("textarea",{value:D,onChange:t=>G(t.target.value),className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm h-20 resize-none",placeholder:"場所や予算など..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"回答期限 (任意)"}),e.jsx("input",{type:"datetime-local",value:E,onChange:t=>I(t.target.value),className:"w-full md:w-auto p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm"})]})]}),e.jsx("hr",{className:"border-gray-100 dark:border-gray-800"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"font-bold text-base md:text-lg flex items-center gap-2",children:"アンケート設定"}),x.map((t,a)=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-2xl border border-gray-100 dark:border-gray-700 relative",children:[a>0&&e.jsx("button",{onClick:()=>{const r=[...x];r.splice(a,1),y(r)},className:"absolute top-3 right-3 text-gray-400 hover:text-red-500",children:e.jsx(B,{size:16})}),e.jsxs("div",{className:"mb-4 pr-6",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"質問タイトル"}),e.jsx("input",{type:"text",value:t.title,onChange:r=>{const s=[...x];s[a].title=r.target.value,y(s)},className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-600 py-1 font-bold text-base focus:border-teal-500 outline-none text-gray-800 dark:text-white"})]}),t.type==="date"?e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"shrink-0 w-full md:w-auto",children:e.jsx(ge,{})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:"選択された候補"}),e.jsxs("div",{className:"space-y-1.5 max-h-60 overflow-y-auto pr-1 custom-scrollbar",children:[t.candidates.map((r,s)=>e.jsxs("div",{className:"flex justify-between items-center px-3 py-1.5 bg-white dark:bg-gray-700 rounded-lg border border-gray-100 dark:border-gray-600 shadow-sm",children:[e.jsx("span",{className:"font-mono font-bold text-sm text-gray-700 dark:text-gray-200",children:r.name}),e.jsx("button",{onClick:()=>O(a,s),className:"text-gray-400 hover:text-red-500 p-1",children:e.jsx(u,{size:14})})]},s)),t.candidates.length===0&&e.jsx("div",{className:"text-gray-400 text-xs p-4 text-center border-2 border-dashed border-gray-200 rounded-xl",children:"カレンダーの日付をクリックして追加"})]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col gap-2 mb-2 bg-white dark:bg-gray-700 p-3 rounded-xl border border-gray-100 dark:border-gray-600",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",id:`cand-input-${a}`,className:"flex-1 p-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",placeholder:"候補を入力 (例: イタリアン)",onKeyDown:r=>{if(r.key==="Enter"){const s=document.getElementById(`cand-note-${a}`);j(a,r.currentTarget.value,s.value),r.currentTarget.value="",s.value=""}}}),e.jsx("button",{onClick:()=>{const r=document.getElementById(`cand-input-${a}`),s=document.getElementById(`cand-note-${a}`);j(a,r.value,s.value),r.value="",s.value=""},className:"bg-teal-600 text-white px-3 py-1 rounded-lg font-bold text-xs",children:"追加"})]}),e.jsx("input",{type:"text",id:`cand-note-${a}`,className:"w-full p-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-xs",placeholder:"備考・URL (任意)",onKeyDown:r=>{if(r.key==="Enter"){const s=document.getElementById(`cand-input-${a}`);j(a,s.value,r.currentTarget.value),s.value="",r.currentTarget.value=""}}})]}),e.jsx("div",{className:"space-y-1.5",children:t.candidates.map((r,s)=>e.jsxs("div",{className:"flex justify-between items-center px-3 py-1.5 bg-white dark:bg-gray-700 rounded-lg border border-gray-100 dark:border-gray-600 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-bold text-sm text-gray-800 dark:text-gray-200 truncate",children:r.name}),r.note&&e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 truncate",children:r.note})]}),e.jsx("button",{onClick:()=>O(a,s),className:"text-gray-400 hover:text-red-500 p-1",children:e.jsx(u,{size:14})})]},s))})]})]},t.id)),e.jsxs("button",{onClick:()=>y([...x,{id:`p${Date.now()}`,type:"text",title:"お店・場所など",candidates:[]}]),className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl text-gray-500 font-bold hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(R,{size:16})," 別のアンケート項目を追加 (場所など)"]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:de,disabled:N,className:"w-full py-4 bg-teal-600 text-white font-black text-lg rounded-2xl shadow-xl hover:bg-teal-700 transition-all flex items-center justify-center gap-2",children:[N?"作成中...":"イベントを作成する"," ",e.jsx(F,{size:20})]})})]})]}),e.jsxs("article",{className:"p-6 bg-white dark:bg-dark-lighter rounded-3xl border border-gray-100 dark:border-gray-700 prose dark:prose-invert max-w-none shadow-sm",children:[e.jsxs("h2",{className:"text-lg font-black flex items-center gap-2 mb-4",children:[e.jsx(q,{className:"text-teal-500",size:20}),"「まいつーる日程調整」の特長"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-xs leading-relaxed text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-2 flex items-center gap-2",children:[e.jsx(ue,{size:16,className:"text-teal-500"}),"ログイン不要で即作成"]}),e.jsx("p",{children:"面倒な会員登録は一切不要。思い立ったらすぐにイベントページを作成し、URLをLINEやSlackで共有するだけで調整がスタートします。回答もスマホからサクサク行えます。"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-2 flex items-center gap-2",children:[e.jsx(fe,{size:16,className:"text-teal-500"}),"細かいニュアンスも伝わる"]}),e.jsx("p",{children:"単なる○✕だけでなく、日程ごとにコメントを残せるため、「19時以降なら○」「場所によっては△」といった細かい条件もスムーズに共有できます。"})]})]})]}),!k&&e.jsx(W,{})]})};export{Ue as default};
