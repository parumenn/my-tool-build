import{c as Ye,R as j,r as S,j as e,X as we}from"./index-CUTV0hPa.js";import{W as Je}from"./WorkspaceContext-BQvM1i97.js";import{A as Qe}from"./AdBanner-BBEONvO3.js";import{T as Ne}from"./trending-up-CZqF8fkc.js";import{G as Ze}from"./globe-j7Lw1U0A.js";import{H as Se}from"./history-B7Jtbi5a.js";import{c as Ae,b as et,C as tt,a as rt}from"./chevron-right-DQ4djU3d.js";import{J as at,K as nt,Q as it,r as V,U as st,V as ot,i as le,y as Oe,W as Ie,N as Fe,f as ne,c as Pe,D as lt,v as dt,X as ct,L as ye,k as gt,A as ut,o as ae,q as ht,l as me,Y as xt,s as yt,m as Me,u as mt,G as ft,Z as De,z as bt,P as pt,R as Ce,T as $e,B as vt,C as kt}from"./generateCategoricalChart-B7_wND6w.js";import{g as qe,C as We,X as fe,Y as be,B as jt}from"./BarChart-D1anwL4C.js";import{D as wt}from"./download-DhzoYAZH.js";import{T as Nt}from"./trash-2-TFP_UgYy.js";import{B as St}from"./briefcase-SoFABy1q.js";import{P as At}from"./plus-CoX_wJa0.js";import{R as Ot}from"./refresh-cw-eIT0qAiO.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=Ye("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var Dt=["x1","y1","x2","y2","key"],Ct=["offset"];function J(t){"@babel/helpers - typeof";return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},J(t)}function Ee(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,a)}return i}function T(t){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Ee(Object(i),!0).forEach(function(a){$t(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ee(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function $t(t,r,i){return r=Et(r),r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function Et(t){var r=Tt(t,"string");return J(r)=="symbol"?r:r+""}function Tt(t,r){if(J(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var a=i.call(t,r);if(J(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Y(){return Y=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Y.apply(this,arguments)}function Te(t,r){if(t==null)return{};var i=Lt(t,r),a,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)a=o[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}function Lt(t,r){if(t==null)return{};var i={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;i[a]=t[a]}return i}var zt=function(r){var i=r.fill;if(!i||i==="none")return null;var a=r.fillOpacity,s=r.x,o=r.y,l=r.width,g=r.height,x=r.ry;return j.createElement("rect",{x:s,y:o,ry:x,width:l,height:g,stroke:"none",fill:i,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function Be(t,r){var i;if(j.isValidElement(t))i=j.cloneElement(t,r);else if(le(t))i=t(r);else{var a=r.x1,s=r.y1,o=r.x2,l=r.y2,g=r.key,x=Te(r,Dt),m=ne(x,!1);m.offset;var u=Te(m,Ct);i=j.createElement("line",Y({},u,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:g}))}return i}function _t(t){var r=t.x,i=t.width,a=t.horizontal,s=a===void 0?!0:a,o=t.horizontalPoints;if(!s||!o||!o.length)return null;var l=o.map(function(g,x){var m=T(T({},t),{},{x1:r,y1:g,x2:r+i,y2:g,key:"line-".concat(x),index:x});return Be(s,m)});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function It(t){var r=t.y,i=t.height,a=t.vertical,s=a===void 0?!0:a,o=t.verticalPoints;if(!s||!o||!o.length)return null;var l=o.map(function(g,x){var m=T(T({},t),{},{x1:g,y1:r,x2:g,y2:r+i,key:"line-".concat(x),index:x});return Be(s,m)});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Ft(t){var r=t.horizontalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,g=t.horizontalPoints,x=t.horizontal,m=x===void 0?!0:x;if(!m||!r||!r.length)return null;var u=g.map(function(y){return Math.round(y+s-s)}).sort(function(y,b){return y-b});s!==u[0]&&u.unshift(0);var w=u.map(function(y,b){var p=!u[b+1],d=p?s+l-y:u[b+1]-y;if(d<=0)return null;var k=b%r.length;return j.createElement("rect",{key:"react-".concat(b),y,x:a,height:d,width:o,stroke:"none",fill:r[k],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},w)}function Mt(t){var r=t.vertical,i=r===void 0?!0:r,a=t.verticalFill,s=t.fillOpacity,o=t.x,l=t.y,g=t.width,x=t.height,m=t.verticalPoints;if(!i||!a||!a.length)return null;var u=m.map(function(y){return Math.round(y+o-o)}).sort(function(y,b){return y-b});o!==u[0]&&u.unshift(0);var w=u.map(function(y,b){var p=!u[b+1],d=p?o+g-y:u[b+1]-y;if(d<=0)return null;var k=b%a.length;return j.createElement("rect",{key:"react-".concat(b),x:y,y:l,width:d,height:x,stroke:"none",fill:a[k],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},w)}var qt=function(r,i){var a=r.xAxis,s=r.width,o=r.height,l=r.offset;return Ie(qe(T(T(T({},We.defaultProps),a),{},{ticks:Fe(a,!0),viewBox:{x:0,y:0,width:s,height:o}})),l.left,l.left+l.width,i)},Wt=function(r,i){var a=r.yAxis,s=r.width,o=r.height,l=r.offset;return Ie(qe(T(T(T({},We.defaultProps),a),{},{ticks:Fe(a,!0),viewBox:{x:0,y:0,width:s,height:o}})),l.top,l.top+l.height,i)},Z={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pe(t){var r,i,a,s,o,l,g=at(),x=nt(),m=it(),u=T(T({},t),{},{stroke:(r=t.stroke)!==null&&r!==void 0?r:Z.stroke,fill:(i=t.fill)!==null&&i!==void 0?i:Z.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:Z.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:Z.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:Z.vertical,verticalFill:(l=t.verticalFill)!==null&&l!==void 0?l:Z.verticalFill,x:V(t.x)?t.x:m.left,y:V(t.y)?t.y:m.top,width:V(t.width)?t.width:m.width,height:V(t.height)?t.height:m.height}),w=u.x,y=u.y,b=u.width,p=u.height,d=u.syncWithTicks,k=u.horizontalValues,O=u.verticalValues,C=st(),_=ot();if(!V(b)||b<=0||!V(p)||p<=0||!V(w)||w!==+w||!V(y)||y!==+y)return null;var F=u.verticalCoordinatesGenerator||qt,P=u.horizontalCoordinatesGenerator||Wt,$=u.horizontalPoints,E=u.verticalPoints;if((!$||!$.length)&&le(P)){var B=k&&k.length,z=P({yAxis:_?T(T({},_),{},{ticks:B?k:_.ticks}):void 0,width:g,height:x,offset:m},B?!0:d);Oe(Array.isArray(z),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(J(z),"]")),Array.isArray(z)&&($=z)}if((!E||!E.length)&&le(F)){var M=O&&O.length,q=F({xAxis:C?T(T({},C),{},{ticks:M?O:C.ticks}):void 0,width:g,height:x,offset:m},M?!0:d);Oe(Array.isArray(q),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(J(q),"]")),Array.isArray(q)&&(E=q)}return j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(zt,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),j.createElement(_t,Y({},u,{offset:m,horizontalPoints:$,xAxis:C,yAxis:_})),j.createElement(It,Y({},u,{offset:m,verticalPoints:E,xAxis:C,yAxis:_})),j.createElement(Ft,Y({},u,{horizontalPoints:$})),j.createElement(Mt,Y({},u,{verticalPoints:E})))}pe.displayName="CartesianGrid";var Bt=["type","layout","connectNulls","ref"],Rt=["key"];function te(t){"@babel/helpers - typeof";return te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},te(t)}function Le(t,r){if(t==null)return{};var i=Gt(t,r),a,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)a=o[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}function Gt(t,r){if(t==null)return{};var i={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;i[a]=t[a]}return i}function ie(){return ie=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},ie.apply(this,arguments)}function ze(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,a)}return i}function I(t){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ze(Object(i),!0).forEach(function(a){W(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ze(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function ee(t){return Ut(t)||Ht(t)||Kt(t)||Vt()}function Vt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kt(t,r){if(t){if(typeof t=="string")return ve(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ve(t,r)}}function Ht(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ut(t){if(Array.isArray(t))return ve(t)}function ve(t,r){(r==null||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function Xt(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _e(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Ge(a.key),a)}}function Yt(t,r,i){return r&&_e(t.prototype,r),i&&_e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jt(t,r,i){return r=de(r),Qt(t,Re()?Reflect.construct(r,i||[],de(t).constructor):r.apply(t,i))}function Qt(t,r){if(r&&(te(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zt(t)}function Zt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Re(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Re=function(){return!!t})()}function de(t){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},de(t)}function er(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ke(t,r)}function ke(t,r){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ke(t,r)}function W(t,r,i){return r=Ge(r),r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function Ge(t){var r=tr(t,"string");return te(r)=="symbol"?r:r+""}function tr(t,r){if(te(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var a=i.call(t,r);if(te(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var se=function(t){function r(){var i;Xt(this,r);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return i=Jt(this,r,[].concat(s)),W(i,"state",{isAnimationFinished:!0,totalLength:0}),W(i,"generateSimpleStrokeDasharray",function(l,g){return"".concat(g,"px ").concat(l-g,"px")}),W(i,"getStrokeDasharray",function(l,g,x){var m=x.reduce(function(O,C){return O+C});if(!m)return i.generateSimpleStrokeDasharray(g,l);for(var u=Math.floor(l/m),w=l%m,y=g-l,b=[],p=0,d=0;p<x.length;d+=x[p],++p)if(d+x[p]>w){b=[].concat(ee(x.slice(0,p)),[w-d]);break}var k=b.length%2===0?[0,y]:[y];return[].concat(ee(r.repeat(x,u)),ee(b),k).map(function(O){return"".concat(O,"px")}).join(", ")}),W(i,"id",mt("recharts-line-")),W(i,"pathRef",function(l){i.mainCurve=l}),W(i,"handleAnimationEnd",function(){i.setState({isAnimationFinished:!0}),i.props.onAnimationEnd&&i.props.onAnimationEnd()}),W(i,"handleAnimationStart",function(){i.setState({isAnimationFinished:!1}),i.props.onAnimationStart&&i.props.onAnimationStart()}),i}return er(r,t),Yt(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.points,g=o.xAxis,x=o.yAxis,m=o.layout,u=o.children,w=dt(u,ct);if(!w)return null;var y=function(d,k){return{x:d.x,y:d.y,value:d.value,errorVal:Me(d.payload,k)}},b={clipPath:a?"url(#clipPath-".concat(s,")"):null};return j.createElement(ye,b,w.map(function(p){return j.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:l,xAxis:g,yAxis:x,layout:m,dataPointFormatter:y})}))}},{key:"renderDots",value:function(a,s,o){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var g=this.props,x=g.dot,m=g.points,u=g.dataKey,w=ne(this.props,!1),y=ne(x,!0),b=m.map(function(d,k){var O=I(I(I({key:"dot-".concat(k),r:3},w),y),{},{index:k,cx:d.x,cy:d.y,value:d.value,dataKey:u,payload:d.payload,points:m});return r.renderDotItem(x,O)}),p={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(o,")"):null};return j.createElement(ye,ie({className:"recharts-line-dots",key:"dots"},p),b)}},{key:"renderCurveStatically",value:function(a,s,o,l){var g=this.props,x=g.type,m=g.layout,u=g.connectNulls;g.ref;var w=Le(g,Bt),y=I(I(I({},ne(w,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(o,")"):null,points:a},l),{},{type:x,layout:m,connectNulls:u});return j.createElement(gt,ie({},y,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var o=this,l=this.props,g=l.points,x=l.strokeDasharray,m=l.isAnimationActive,u=l.animationBegin,w=l.animationDuration,y=l.animationEasing,b=l.animationId,p=l.animateNewValues,d=l.width,k=l.height,O=this.state,C=O.prevPoints,_=O.totalLength;return j.createElement(ut,{begin:u,duration:w,isActive:m,easing:y,from:{t:0},to:{t:1},key:"line-".concat(b),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(F){var P=F.t;if(C){var $=C.length/g.length,E=g.map(function(L,Q){var K=Math.floor(Q*$);if(C[K]){var G=C[K],R=ae(G.x,L.x),ce=ae(G.y,L.y);return I(I({},L),{},{x:R(P),y:ce(P)})}if(p){var ge=ae(d*2,L.x),ue=ae(k/2,L.y);return I(I({},L),{},{x:ge(P),y:ue(P)})}return I(I({},L),{},{x:L.x,y:L.y})});return o.renderCurveStatically(E,a,s)}var B=ae(0,_),z=B(P),M;if(x){var q="".concat(x).split(/[,\s]+/gim).map(function(L){return parseFloat(L)});M=o.getStrokeDasharray(z,_,q)}else M=o.generateSimpleStrokeDasharray(_,z);return o.renderCurveStatically(g,a,s,{strokeDasharray:M})})}},{key:"renderCurve",value:function(a,s){var o=this.props,l=o.points,g=o.isAnimationActive,x=this.state,m=x.prevPoints,u=x.totalLength;return g&&l&&l.length&&(!m&&u>0||!ht(m,l))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(l,a,s)}},{key:"render",value:function(){var a,s=this.props,o=s.hide,l=s.dot,g=s.points,x=s.className,m=s.xAxis,u=s.yAxis,w=s.top,y=s.left,b=s.width,p=s.height,d=s.isAnimationActive,k=s.id;if(o||!g||!g.length)return null;var O=this.state.isAnimationFinished,C=g.length===1,_=Pe("recharts-line",x),F=m&&m.allowDataOverflow,P=u&&u.allowDataOverflow,$=F||P,E=me(k)?this.id:k,B=(a=ne(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},z=B.r,M=z===void 0?3:z,q=B.strokeWidth,L=q===void 0?2:q,Q=xt(l)?l:{},K=Q.clipDot,G=K===void 0?!0:K,R=M*2+L;return j.createElement(ye,{className:_},F||P?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(E)},j.createElement("rect",{x:F?y:y-b/2,y:P?w:w-p/2,width:F?b:b*2,height:P?p:p*2})),!G&&j.createElement("clipPath",{id:"clipPath-dots-".concat(E)},j.createElement("rect",{x:y-R/2,y:w-R/2,width:b+R,height:p+R}))):null,!C&&this.renderCurve($,E),this.renderErrorBar($,E),(C||l)&&this.renderDots($,G,E),(!d||O)&&yt.renderCallByParent(this.props,g))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var o=a.length%2!==0?[].concat(ee(a),[0]):a,l=[],g=0;g<s;++g)l=[].concat(ee(l),ee(o));return l}},{key:"renderDotItem",value:function(a,s){var o;if(j.isValidElement(a))o=j.cloneElement(a,s);else if(le(a))o=a(s);else{var l=s.key,g=Le(s,Rt),x=Pe("recharts-line-dot",typeof a!="boolean"?a.className:"");o=j.createElement(lt,ie({key:l},g,{className:x}))}return o}}])}(S.PureComponent);W(se,"displayName","Line");W(se,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ft.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});W(se,"getComposedData",function(t){var r=t.props,i=t.xAxis,a=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.dataKey,g=t.bandSize,x=t.displayedData,m=t.offset,u=r.layout,w=x.map(function(y,b){var p=Me(y,l);return u==="horizontal"?{x:De({axis:i,ticks:s,bandSize:g,entry:y,index:b}),y:me(p)?null:a.scale(p),value:p,payload:y}:{x:me(p)?null:i.scale(p),y:De({axis:a,ticks:o,bandSize:g,entry:y,index:b}),value:p,payload:y}});return I({points:w,layout:u},m)});var rr=bt({chartName:"LineChart",GraphicalChild:se,axisComponents:[{axisType:"xAxis",AxisComp:fe},{axisType:"yAxis",AxisComp:be}],formatAxisMap:pt});const ar=["順張り","逆張り","材料/決算","デイトレ","スイング","長期/配当","優待","IPO","その他"],nr=[{id:"calm",label:"冷静",color:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300"},{id:"excited",label:"興奮",color:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"},{id:"anxious",label:"不安",color:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300"},{id:"angry",label:"怒り",color:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"},{id:"fear",label:"恐怖",color:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}],ir=({symbol:t})=>{const r=S.useRef(null);return S.useEffect(()=>{if(!r.current)return;r.current.innerHTML="";const i=document.createElement("div");i.className="tradingview-widget-container__widget",i.style.height="100%",i.style.width="100%",r.current.appendChild(i);const a=document.createElement("script");a.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",a.type="text/javascript",a.async=!0,a.innerHTML=JSON.stringify({autosize:!0,symbol:t,interval:"D",timezone:"Asia/Tokyo",theme:document.documentElement.classList.contains("dark")?"dark":"light",style:"1",locale:"ja",enable_publishing:!1,allow_symbol_change:!0,calendar:!1,support_host:"https://www.tradingview.com"}),r.current.appendChild(a)},[t]),e.jsx("div",{className:"tradingview-widget-container h-full w-full rounded-2xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-900",ref:r,style:{height:"100%"}})},vr=()=>{const t=S.useContext(Je),[r,i]=S.useState("dashboard"),[a,s]=S.useState([]),[o,l]=S.useState(1e6),[g,x]=S.useState(!1),[m,u]=S.useState("TSE:7203"),[w,y]=S.useState(!1),[b,p]=S.useState(!1),[d,k]=S.useState({date:new Date().toISOString().split("T")[0],type:"sell",emotion:"calm",strategy:"順張り",quantity:100,pnl:0});S.useEffect(()=>{const n=localStorage.getItem("stock_trades"),h=localStorage.getItem("stock_initial_asset");if(n)try{const c=JSON.parse(n);if(Array.isArray(c)){const f=c.map(N=>({...N,price:Number(N.price)||0,quantity:Number(N.quantity)||0,pnl:Number(N.pnl)||0,date:N.date||new Date().toISOString().split("T")[0]}));s(f)}else s([])}catch(c){console.error("Failed to parse trades",c),s([])}else s([{id:"1",date:"2023-10-01",ticker:"7203",name:"トヨタ",type:"buy",price:2e3,quantity:100,pnl:0,comment:"エントリー",strategy:"順張り",emotion:"calm"},{id:"2",date:"2023-10-05",ticker:"7203",name:"トヨタ",type:"sell",price:2150,quantity:100,pnl:15e3,comment:"利確",strategy:"順張り",emotion:"excited"}]);h&&!isNaN(Number(h))&&l(Number(h)),x(!0)},[]),S.useEffect(()=>{g&&localStorage.setItem("stock_trades",JSON.stringify(a))},[a,g]),S.useEffect(()=>{g&&localStorage.setItem("stock_initial_asset",o.toString())},[o,g]);const O=new Date().toISOString().slice(0,7),C=a.reduce((n,h)=>n+(Number(h.pnl)||0),0),_=o+C,F=S.useMemo(()=>a.filter(n=>n.date&&n.date.startsWith(O)).reduce((n,h)=>n+(Number(h.pnl)||0),0),[a,O]),P=a.filter(n=>n.type==="sell"&&n.pnl!==0),$=P.filter(n=>n.pnl>0),E=P.filter(n=>n.pnl<0),B=P.length>0?$.length/P.length*100:0,z=$.reduce((n,h)=>n+h.pnl,0),M=Math.abs(E.reduce((n,h)=>n+h.pnl,0)),q=M===0?z>0?99.99:0:z/M,L=$.length>0?z/$.length:0,Q=S.useMemo(()=>{const n=new Map,h=[...a].sort((c,f)=>new Date(c.date).getTime()-new Date(f.date).getTime());for(const c of h){if(!c.ticker)continue;const f=n.get(c.ticker)||{name:c.name||c.ticker,quantity:0,totalCost:0};if(c.type==="buy")f.quantity+=c.quantity,f.totalCost+=c.price*c.quantity;else if(c.type==="sell"){const N=f.quantity>0?f.totalCost/f.quantity:0;f.quantity-=c.quantity,f.totalCost-=N*c.quantity}f.quantity<1e-4?n.delete(c.ticker):n.set(c.ticker,f)}return Array.from(n.entries()).map(([c,f])=>({...f,ticker:c,avgPrice:f.quantity>0?f.totalCost/f.quantity:0}))},[a]),K=S.useMemo(()=>{const n=[...a].sort((v,A)=>new Date(v.date).getTime()-new Date(A.date).getTime()),h=new Map,c=new Date().toISOString().split("T")[0];let f=o;if(n.length===0)h.set(c,o);else{const v=n[0].date;if(v){const A=new Date(v);isNaN(A.getTime())||(A.setDate(A.getDate()-1),h.set(A.toISOString().split("T")[0],o))}}for(const v of n)v.date&&(f+=Number(v.pnl)||0,h.set(v.date,f));const N=Array.from(h.entries()).sort((v,A)=>new Date(v[0]).getTime()-new Date(A[0]).getTime()).map(([v,A])=>({date:v,asset:A})).filter(v=>!isNaN(v.asset));return N.length>0?N:[{date:c,asset:o}]},[a,o]),G=S.useMemo(()=>{const n={};a.forEach(c=>{if(!c.date)return;const f=c.date.slice(0,7);n[f]=(n[f]||0)+(Number(c.pnl)||0)});const h=Object.entries(n).sort().map(([c,f])=>({date:c,pnl:f}));return h.length>0?h:[{date:O,pnl:0}]},[a]),R=S.useMemo(()=>{const n={};return a.forEach(h=>{const c=h.strategy||"その他";n[c]=(n[c]||0)+(Number(h.pnl)||0)}),Object.entries(n).sort((h,c)=>c[1]-h[1]).map(([h,c])=>({name:h,value:c}))},[a]),ce=()=>{const n=`ID,日付,銘柄コード,銘柄名,売買区分,価格,株数,損益,戦略,感情,コメント
`,h=a.map(v=>`"${v.id}","${v.date}","${v.ticker}","${v.name}","${v.type}",${v.price},${v.quantity},${v.pnl},"${v.strategy}","${v.emotion}","${v.comment}"`).join(`
`),c=new Blob([new Uint8Array([239,187,191]),n+h],{type:"text/csv;charset=utf-8;"}),f=URL.createObjectURL(c),N=document.createElement("a");N.href=f,N.download=`trade_history_${new Date().toISOString().split("T")[0]}.csv`,N.click(),URL.revokeObjectURL(f)},ge=()=>{confirm("全ての取引データを削除しますか？この操作は取り消せません。")&&(s([]),l(1e6),alert("データを初期化しました。"))},ue=()=>{if(!d.date){alert("日付は必須です");return}const n={id:Date.now().toString(),date:d.date,ticker:d.ticker||"",name:d.name||d.ticker||"取引",type:d.type||"sell",price:Number(d.price)||0,quantity:Number(d.quantity)||0,pnl:Number(d.pnl)||0,comment:d.comment||"",strategy:d.strategy||"その他",emotion:d.emotion||"calm"};s(h=>[...h,n]),y(!1),k({date:new Date().toISOString().split("T")[0],type:"sell",emotion:"calm",strategy:"順張り",quantity:100,pnl:0,name:"",ticker:"",comment:"",price:0})},Ve=n=>{confirm("この記録を削除しますか？")&&s(a.filter(h=>h.id!==n))},oe=({title:n,value:h,sub:c,colorClass:f})=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase",children:n}),e.jsx("div",{className:`text-2xl font-black mt-1 ${f||"text-gray-800 dark:text-white"}`,children:h}),c&&e.jsx("span",{className:"text-[10px] text-gray-400 mt-1",children:c})]}),Ke=()=>{const n=new Date,h=[];for(let c=89;c>=0;c--){const f=new Date;f.setDate(n.getDate()-c),h.push(f.toISOString().split("T")[0])}return e.jsx("div",{className:"flex flex-wrap gap-1",children:h.map(c=>{const N=a.filter(A=>A.date===c&&A.pnl!==0).reduce((A,he)=>A+he.pnl,0);let v="bg-gray-100 dark:bg-gray-700";return N>5e4?v="bg-red-500":N>1e4?v="bg-red-400":N>0?v="bg-red-300":N<-5e4?v="bg-emerald-600":N<-1e4?v="bg-emerald-500":N<0&&(v="bg-emerald-400"),e.jsx("div",{className:`w-3 h-3 rounded-sm ${v}`,title:`${c}: ${N.toLocaleString()}円`},c)})})},He=()=>{const[n,h]=S.useState(new Date),c=n.getFullYear(),f=n.getMonth(),N=new Date(c,f,1).getDay(),v=new Date(c,f+1,0).getDate(),A=[];for(let D=0;D<N;D++)A.push(null);for(let D=1;D<=v;D++)A.push(D);const he=`${c}-${String(f+1).padStart(2,"0")}`,xe=a.filter(D=>D.date&&D.date.startsWith(he)).reduce((D,H)=>D+Number(H.pnl),0);return e.jsxs("div",{className:"animate-fade-in bg-white dark:bg-gray-800 p-4 md:p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg md:text-xl text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ae,{className:"text-indigo-500"}),c,"年",f+1,"月",e.jsxs("span",{className:`text-sm ml-2 font-mono ${xe>=0?"text-red-500":"text-emerald-500"}`,children:["(",xe>0?"+":"",xe.toLocaleString(),")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(new Date(c,f-1,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:e.jsx(tt,{size:20})}),e.jsx("button",{onClick:()=>h(new Date),className:"text-xs font-bold px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:"今月"}),e.jsx("button",{onClick:()=>h(new Date(c,f+1,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:e.jsx(rt,{size:20})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:[["日","月","火","水","木","金","土"].map((D,H)=>e.jsx("div",{className:`text-center text-xs font-bold py-2 ${H===0?"text-red-400":H===6?"text-blue-400":"text-gray-400"}`,children:D},D)),A.map((D,H)=>{if(!D)return e.jsx("div",{className:"h-16 md:h-24 bg-transparent"},H);const je=`${c}-${String(f+1).padStart(2,"0")}-${String(D).padStart(2,"0")}`,re=a.filter(X=>X.date===je),U=re.reduce((X,Xe)=>X+Xe.pnl,0),Ue=new Date().toISOString().slice(0,10)===je;return e.jsxs("div",{className:`h-16 md:h-24 p-1 md:p-2 border rounded-xl flex flex-col justify-between transition-all hover:shadow-md ${re.length>0?"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600":"bg-transparent border-transparent"} ${Ue?"ring-2 ring-indigo-500":""}`,children:[e.jsx("span",{className:"text-[10px] md:text-xs font-bold text-gray-500 dark:text-gray-400",children:D}),re.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-right font-black text-[10px] md:text-sm ${U>0?"text-red-500":U<0?"text-emerald-500":"text-gray-400"}`,children:U!==0&&(U>0?"+":"")+(Math.abs(U)>=1e6?(U/1e4).toFixed(0)+"万":U.toLocaleString())}),e.jsxs("div",{className:"flex justify-end gap-0.5 md:gap-1 mt-1",children:[re.some(X=>X.type==="buy")&&e.jsx("div",{className:"w-1 md:w-1.5 h-1 md:h-1.5 rounded-full bg-blue-400"}),re.some(X=>X.type==="sell")&&e.jsx("div",{className:"w-1 md:w-1.5 h-1 md:h-1.5 rounded-full bg-red-400"})]})]})]},H)})]})]})};return e.jsxs("div",{className:`mx-auto h-full flex flex-col ${t?"w-full p-2":"max-w-6xl space-y-6 pb-20"}`,children:[!t&&e.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ne,{className:"text-indigo-500"})," 株トレード記録"]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>p(!0),className:"p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:"設定"})})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl overflow-x-auto no-scrollbar shrink-0",children:[{id:"dashboard",icon:Pt,label:"ホーム"},{id:"market",icon:Ze,label:"マーケット"},{id:"history",icon:Se,label:"履歴"},{id:"calendar",icon:Ae,label:"カレンダー"},{id:"analytics",icon:et,label:"分析"}].map(n=>e.jsxs("button",{onClick:()=>i(n.id),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-xs sm:text-sm font-bold transition-all whitespace-nowrap ${r===n.id?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[e.jsx(n.icon,{size:16}),n.label]},n.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:[r==="dashboard"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(oe,{title:"総資産評価額",value:`¥${_.toLocaleString()}`,colorClass:"text-indigo-600 dark:text-indigo-400"}),e.jsx(oe,{title:"今月の損益",value:`¥${(F||0).toLocaleString()}`,colorClass:(F||0)>=0?"text-red-500":"text-emerald-500"}),e.jsx(oe,{title:"勝率",value:`${B.toFixed(1)}%`,sub:`${$.length}勝 ${E.length}敗`}),e.jsx(oe,{title:"PF / リスクリワード",value:q.toFixed(2),sub:`Avg Win: ¥${Math.round(L).toLocaleString()}`})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(Ne,{size:18})," 資産推移"]}),e.jsx(Ce,{width:"100%",height:"100%",children:e.jsxs(rr,{data:K,children:[e.jsx(pe,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),e.jsx(fe,{dataKey:"date",tick:{fontSize:10},tickFormatter:n=>typeof n=="string"&&n.length>=5?n.slice(5):"",stroke:"#9ca3af"}),e.jsx(be,{tick:{fontSize:10},tickFormatter:n=>`${n/1e4}万`,width:40,domain:["auto","auto"],stroke:"#9ca3af"}),e.jsx($e,{formatter:n=>`¥${n.toLocaleString()}`,contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",backgroundColor:"rgba(255,255,255,0.9)",color:"#333"}}),e.jsx(se,{type:"monotone",dataKey:"asset",stroke:"#4f46e5",strokeWidth:3,dot:!1,activeDot:{r:6}})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(Se,{size:18})," アクティビティ"]}),e.jsx("div",{className:"mb-4",children:e.jsx(Ke,{})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase",children:"直近の取引"}),a.slice(-5).reverse().map(n=>e.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-gray-100 dark:border-gray-700 pb-2 last:border-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded mr-2 ${n.type==="buy"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:n.type==="buy"?"買":n.type==="sell"?"売":n.type}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:n.name})]}),e.jsx("div",{className:`font-bold ${n.pnl>0?"text-red-500":n.pnl<0?"text-emerald-500":"text-gray-400"}`,children:n.pnl!==0?(n.pnl>0?"+":"")+n.pnl.toLocaleString():"-"})]},n.id))]})]})]})]}),r==="market"&&e.jsx("div",{className:"flex flex-col h-full animate-fade-in space-y-4",children:e.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-3xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 relative",children:e.jsx(ir,{symbol:m},m)})}),r==="history"&&e.jsxs("div",{className:"animate-fade-in bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300",children:"取引履歴一覧"}),e.jsxs("button",{onClick:ce,className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs font-bold text-gray-600 dark:text-gray-300 transition-colors",children:[e.jsx(wt,{size:14})," CSV出力"]})]}),e.jsx("div",{className:"overflow-x-auto flex-1",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-500 dark:text-gray-400 font-bold sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 whitespace-nowrap",children:"日付"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"銘柄"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"売買"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"価格(円)"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"株数"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"損益"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"戦略/感情"}),e.jsx("th",{className:"p-4 w-10"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[[...a].sort((n,h)=>new Date(h.date).getTime()-new Date(n.date).getTime()).map(n=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[e.jsx("td",{className:"p-4 font-mono text-gray-600 dark:text-gray-400",children:n.date}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold text-gray-800 dark:text-white",children:n.name}),e.jsx("div",{className:"text-xs text-gray-400 font-mono",children:n.ticker})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${n.type==="buy"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":n.type==="sell"?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-gray-100 text-gray-600"}`,children:n.type==="buy"?"買付":n.type==="sell"?"売却":n.type})}),e.jsx("td",{className:"p-4 text-right font-mono text-gray-700 dark:text-gray-300",children:n.price.toLocaleString()}),e.jsx("td",{className:"p-4 text-right font-mono text-gray-700 dark:text-gray-300",children:n.quantity.toLocaleString()}),e.jsx("td",{className:`p-4 text-right font-mono font-bold ${n.pnl>0?"text-red-500":n.pnl<0?"text-emerald-500":"text-gray-400"}`,children:n.pnl!==0?(n.pnl>0?"+":"")+n.pnl.toLocaleString():"-"}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 px-2 py-0.5 rounded w-fit",children:n.strategy}),n.emotion&&e.jsx("span",{className:"text-[10px] text-gray-400",children:n.emotion})]})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>Ve(n.id),className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Nt,{size:16})})})]},n.id)),a.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"p-8 text-center text-gray-400",children:"取引データがありません"})})]})]})})]}),r==="calendar"&&e.jsx(He,{}),r==="analytics"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4",children:"月別損益推移"}),e.jsx(Ce,{width:"100%",height:"100%",children:e.jsxs(jt,{data:G,children:[e.jsx(pe,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),e.jsx(fe,{dataKey:"date",tick:{fontSize:10},tickFormatter:n=>typeof n=="string"&&n.length>=5?n.slice(5):"",stroke:"#9ca3af"}),e.jsx(be,{tickFormatter:n=>`${n/1e4}万`,width:40,stroke:"#9ca3af"}),e.jsx($e,{formatter:n=>`¥${n.toLocaleString()}`,cursor:{fill:"transparent"},contentStyle:{backgroundColor:"rgba(255,255,255,0.9)",borderRadius:"8px",color:"#333"}}),e.jsx(vt,{dataKey:"pnl",children:G.map((n,h)=>e.jsx(kt,{fill:n.pnl>=0?"#ef4444":"#10b981"},`cell-${h}`))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4",children:"戦略別パフォーマンス"}),e.jsx("div",{className:"h-full overflow-y-auto no-scrollbar pb-6",children:R.length>0?e.jsx("div",{className:"space-y-3",children:R.map((n,h)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 text-xs font-bold text-gray-600 dark:text-gray-400 truncate",children:n.name}),e.jsx("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden flex",children:n.value>0?e.jsx("div",{className:"h-full bg-red-500",style:{width:`${Math.min(Math.abs(n.value)/5e4*100,100)}%`}}):e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${Math.min(Math.abs(n.value)/5e4*100,100)}%`}})}),e.jsxs("div",{className:`w-20 text-right text-xs font-bold ${n.value>=0?"text-red-500":"text-emerald-500"}`,children:[n.value>0?"+":"",n.value.toLocaleString()]})]},h))}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-sm",children:"データがありません"})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(St,{size:18})," 現在の保有銘柄 (履歴から推定)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-500 dark:text-gray-400 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"銘柄"}),e.jsx("th",{className:"p-3 text-right",children:"保有数"}),e.jsx("th",{className:"p-3 text-right",children:"平均取得単価"}),e.jsx("th",{className:"p-3 text-right",children:"推定投資額"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:Q.length>0?Q.map((n,h)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30",children:[e.jsxs("td",{className:"p-3 font-medium text-gray-800 dark:text-gray-200",children:[n.name," ",e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:n.ticker})]}),e.jsx("td",{className:"p-3 text-right font-mono text-gray-700 dark:text-gray-300",children:n.quantity.toLocaleString()}),e.jsxs("td",{className:"p-3 text-right font-mono text-gray-700 dark:text-gray-300",children:["¥",Math.round(n.avgPrice).toLocaleString()]}),e.jsxs("td",{className:"p-3 text-right font-mono font-bold text-gray-800 dark:text-white",children:["¥",Math.round(n.avgPrice*n.quantity).toLocaleString()]})]},h)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-6 text-center text-gray-400",children:"保有なし"})})})]})})]})]})]}),e.jsx("button",{onClick:()=>y(!0),className:`${t?"absolute bottom-4 right-4 p-3 shadow-lg":"fixed bottom-8 right-8 p-5 shadow-2xl"} bg-indigo-600 text-white rounded-full hover:bg-indigo-700 hover:scale-105 transition-all z-20 flex items-center justify-center active:scale-95`,children:e.jsx(At,{size:t?20:32})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl w-full max-w-sm shadow-2xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:"設定"}),e.jsx("button",{onClick:()=>p(!1),children:e.jsx(we,{className:"text-gray-400"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2",children:"初期資産 (円)"}),e.jsx("input",{type:"number",value:o,onChange:n=>l(Number(n.target.value)),className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:"※ここに入力した金額をスタート地点として損益を加算します。"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("button",{onClick:ge,className:"w-full py-2 text-red-500 text-xs font-bold hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ot,{size:14})," 全データを初期化"]})}),e.jsx("button",{onClick:()=>p(!1),className:"w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors",children:"完了"})]})]})}),w&&e.jsx("div",{className:`z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in ${t?"absolute inset-0":"fixed inset-0 bg-black/60"}`,children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md p-6 shadow-2xl border border-gray-100 dark:border-gray-700 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-gray-800 dark:text-white",children:"取引を記録"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(we,{})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 p-1 rounded-xl",children:["buy","sell","deposit","withdraw"].map(n=>e.jsx("button",{onClick:()=>k({...d,type:n}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${d.type===n?n==="buy"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow":n==="sell"?"bg-white dark:bg-gray-600 text-red-600 dark:text-red-400 shadow":"bg-white dark:bg-gray-600 text-gray-800 dark:text-white shadow":"text-gray-500 dark:text-gray-400"}`,children:n==="buy"?"買付":n==="sell"?"売却":n==="deposit"?"入金":"出金"},n))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"日付"}),e.jsx("input",{type:"date",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",value:d.date,onChange:n=>k({...d,date:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"銘柄コード"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"7203",value:d.ticker,onChange:n=>k({...d,ticker:n.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"銘柄名 / 項目名"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"トヨタ自動車",value:d.name,onChange:n=>k({...d,name:n.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"約定価格"}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500 outline-none",value:d.price,onChange:n=>k({...d,price:Number(n.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"株数"}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500 outline-none",value:d.quantity,onChange:n=>k({...d,quantity:Number(n.target.value)})})]})]}),d.type==="sell"&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"確定損益 (円)"}),e.jsx("input",{type:"number",className:`w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 font-mono text-xl font-black focus:ring-2 focus:ring-indigo-500 outline-none ${Number(d.pnl)>=0?"text-red-500":"text-emerald-500"}`,placeholder:"例: 10000 or -5000",value:d.pnl,onChange:n=>k({...d,pnl:Number(n.target.value)})}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1 text-right",children:"※マイナスの場合は「-」をつけてください"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"戦略・タグ"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ar.map(n=>e.jsx("button",{type:"button",onClick:()=>k({...d,strategy:n}),className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${d.strategy===n?"bg-indigo-100 dark:bg-indigo-900/50 border-indigo-500 text-indigo-700 dark:text-indigo-300":"border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400"}`,children:n},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"感情コンディション"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:nr.map(n=>e.jsx("button",{type:"button",onClick:()=>k({...d,emotion:n.id}),className:`flex-1 min-w-[60px] py-1.5 rounded text-xs font-bold transition-all ${d.emotion===n.id?n.color+" shadow-sm ring-1 ring-inset ring-current":"bg-gray-100 dark:bg-gray-700 text-gray-400"}`,children:n.label},n.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"メモ"}),e.jsx("textarea",{className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm h-20 resize-none focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"エントリー根拠や反省点...",value:d.comment,onChange:n=>k({...d,comment:n.target.value})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-3 text-gray-500 dark:text-gray-400 text-sm font-bold hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"キャンセル"}),e.jsx("button",{onClick:ue,className:"flex-1 py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 shadow-xl shadow-indigo-200 dark:shadow-none transition-colors",children:"保存する"})]})]})}),!t&&e.jsx(Qe,{})]})};export{vr as default};
