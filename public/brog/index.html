
            // Detail view loader
            useEffect(() => {
                if (route.mode === 'post' && route.id) {
                    const loadDetail = async () => {
                        try {
                            const res = await fetch(`${API_URL}?action=detail&id=${route.id}`);
                            if (!res.ok) throw new Error('Not found');
                            const data = await res.json();
                            if (data && !data.error) {
                                setSelectedPost(data);
                            } else {
                                navigate('list');
                            }
                        } catch(e) { navigate('list'); }
                    };
                    loadDetail();
                } else if (route.mode !== 'editor') {
                    // 編集モード以外の場合のみ選択状態をクリアする
                    // (編集モードへはボタンクリックでデータがセットされた状態で遷移してくるため)
                    setSelectedPost(null);
                }
            }, [route.mode, route.id]);
