import{r as d,j as e,X as f,F as $}from"./index-C2c3yMQa.js";import{A as z}from"./AdBanner-Cl6XZoMS.js";import{U as y}from"./upload-CX0qACHK.js";import{A as L}from"./align-left-DAScx5aD.js";import{T as R,a as E}from"./toggle-right-BsCsiMYr.js";import{v as I,B as k,x as B,R as M,T as U,y as D}from"./generateCategoricalChart-DC5ZaOem.js";import{X as N,Y as v}from"./YAxis-BkDEXxUH.js";import{D as X}from"./download-QYfVxtCl.js";import{T as K}from"./trash-2-y2846wTe.js";import{I as O}from"./info-feP6zZRW.js";var P=I({chartName:"BarChart",GraphicalChild:k,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:N},{axisType:"yAxis",AxisComp:v}],formatAxisMap:B});const te=()=>{const[g,p]=d.useState("single"),[a,u]=d.useState(""),[o,w]=d.useState(!1),[i,m]=d.useState([]),[Y,j]=d.useState(!1),h=d.useRef(null),c=d.useMemo(()=>{const t=a.length,l=a.replace(/\s/g,"").length,n=a?a.split(/\r\n|\r|\n/).length:0,s=(a.match(/[\u3040-\u309F]/g)||[]).length,r=(a.match(/[\u30A0-\u30FF]/g)||[]).length,x=(a.match(/[\u4E00-\u9FAF]/g)||[]).length,b=t-(s+r+x);return{total:t,noSpace:l,lines:n,distribution:[{name:"ひらがな",value:s,color:"#3b82f6"},{name:"カタカナ",value:r,color:"#8b5cf6"},{name:"漢字",value:x,color:"#10b981"},{name:"その他",value:b,color:"#94a3b8"}]}},[a]),S=async t=>{var n;if(!((n=t.target.files)!=null&&n.length))return;j(!0);const l=[];for(const s of Array.from(t.target.files))try{const r=await s.text(),x=r.length,b=r.replace(/\s/g,"").length,F=r?r.split(/\r\n|\r|\n/).length:0;l.push({id:Math.random().toString(36).substr(2,9),name:s.name,total:x,noSpace:b,lines:F})}catch(r){console.error(`Failed to read ${s.name}`,r)}m(s=>[...s,...l]),j(!1),h.current&&(h.current.value="")},C=t=>{m(l=>l.filter(n=>n.id!==t))},A=()=>{window.confirm("すべてのファイル結果を削除しますか？")&&m([])},T=()=>{if(i.length===0)return;const t=`ファイル名,文字数(空白込),文字数(空白無),行数
`,l=i.map(r=>`"${r.name}",${r.total},${r.noSpace},${r.lines}`).join(`
`),n="data:text/csv;charset=utf-8,"+encodeURIComponent(t+l),s=document.createElement("a");s.href=n,s.download=`character_counts_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s)};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>p("single"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${g==="single"?"bg-white dark:bg-gray-700 text-green-600 dark:text-green-400 shadow-sm":"text-gray-500 dark:text-gray-400"}`,children:"テキスト入力"}),e.jsxs("button",{onClick:()=>p("bulk"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${g==="bulk"?"bg-white dark:bg-gray-700 text-green-600 dark:text-green-400 shadow-sm":"text-gray-500 dark:text-gray-400"}`,children:[e.jsx(y,{size:14})," 一括ファイル集計"]})]})}),g==="single"?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(L,{className:"text-green-500"}),"文字数カウント"]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("button",{onClick:()=>w(!o),className:`flex items-center gap-2 text-sm font-bold transition-colors ${o?"text-green-600 dark:text-green-400":"text-gray-400"}`,children:[o?e.jsx(R,{size:24}):e.jsx(E,{size:24}),"空白を無視"]}),e.jsxs("button",{onClick:()=>u(""),disabled:!a,className:"text-sm text-gray-400 hover:text-red-500 flex items-center gap-1 transition-colors disabled:opacity-50",children:[e.jsx(f,{size:16})," クリア"]})]})]}),e.jsx("textarea",{value:a,onChange:t=>u(t.target.value),placeholder:"ここにテキストを入力してください...",className:"flex-1 w-full min-h-[400px] p-4 rounded-xl border-2 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 focus:border-green-500 focus:bg-white dark:focus:bg-gray-900 focus:ring-green-500 resize-none transition-all text-gray-900 dark:text-white leading-relaxed text-base"})]})}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-1 gap-4",children:[e.jsxs("div",{className:`bg-white dark:bg-dark-lighter rounded-xl p-5 shadow-sm border border-gray-100 dark:border-gray-700 transition-all ${o?"opacity-70":"ring-2 ring-green-500"}`,children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"文字数 (空白込)"}),e.jsx("div",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:c.total.toLocaleString()})]}),e.jsxs("div",{className:`bg-white dark:bg-dark-lighter rounded-xl p-5 shadow-sm border border-gray-100 dark:border-gray-700 transition-all ${o?"ring-2 ring-green-500":"opacity-70"}`,children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"文字数 (空白無視)"}),e.jsx("div",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:c.noSpace.toLocaleString()})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-xl p-5 shadow-sm border border-gray-100 dark:border-gray-700 col-span-2 lg:col-span-1",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"行数"}),e.jsx("div",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:c.lines.toLocaleString()})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-xl p-5 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 mb-4",children:"文字種別内訳"}),e.jsx("div",{className:"h-48 w-full",children:e.jsx(M,{width:"100%",height:"100%",children:e.jsxs(P,{data:c.distribution,children:[e.jsx(N,{dataKey:"name",tick:{fontSize:10,fill:"#9ca3af"},tickLine:!1,axisLine:!1}),e.jsx(v,{hide:!0}),e.jsx(U,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(k,{dataKey:"value",radius:[4,4,0,0],children:c.distribution.map((t,l)=>e.jsx(D,{fill:t.color},`cell-${l}`))})]})})})]})]})]}):e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 min-h-[600px] flex flex-col",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx($,{className:"text-green-500"}),"一括ファイル集計"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"複数のテキストファイルをアップロードして、それぞれの文字数を一覧表示します。"})]}),e.jsxs("div",{className:"flex gap-2",children:[i.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:T,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 rounded-lg text-sm font-bold hover:bg-blue-100 dark:hover:bg-blue-900/40 transition-colors flex items-center gap-2",children:[e.jsx(X,{size:16})," CSV出力"]}),e.jsxs("button",{onClick:A,className:"px-4 py-2 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 rounded-lg text-sm font-bold hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors flex items-center gap-2",children:[e.jsx(K,{size:16})," 全削除"]})]}),e.jsxs("label",{className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-bold hover:bg-green-700 transition-colors cursor-pointer flex items-center gap-2 shadow-lg shadow-green-200 dark:shadow-none",children:[e.jsx(y,{size:16})," ファイルを追加",e.jsx("input",{type:"file",multiple:!0,accept:".txt,.md,.json,.js,.ts,.html,.css,.csv",onChange:S,className:"hidden",ref:h})]})]})]}),e.jsx("div",{className:"flex-1 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white uppercase font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 rounded-tl-xl",children:"ファイル名"}),e.jsx("th",{className:"p-4",children:"文字数 (空白込)"}),e.jsx("th",{className:"p-4 text-green-600 dark:text-green-400",children:"文字数 (空白無視)"}),e.jsx("th",{className:"p-4",children:"行数"}),e.jsx("th",{className:"p-4 rounded-tr-xl w-10"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[i.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"p-4 font-medium text-gray-900 dark:text-white truncate max-w-[200px]",title:t.name,children:t.name}),e.jsx("td",{className:"p-4 font-mono",children:t.total.toLocaleString()}),e.jsx("td",{className:"p-4 font-mono font-bold text-green-600 dark:text-green-400",children:t.noSpace.toLocaleString()}),e.jsx("td",{className:"p-4 font-mono",children:t.lines.toLocaleString()}),e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>C(t.id),className:"text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(f,{size:16})})})]},t.id)),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-12 text-center text-gray-400",children:"ファイルがありません。「ファイルを追加」からテキストファイルをアップロードしてください。"})})]})]})})]}),e.jsxs("article",{className:"mt-12 p-8 bg-white dark:bg-dark-lighter rounded-3xl border border-gray-100 dark:border-gray-700 prose dark:prose-invert max-w-none shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-black flex items-center gap-2 mb-6",children:[e.jsx(O,{className:"text-blue-500"}),"文字数カウント・文章分析ツールの解説"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 text-sm leading-relaxed text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-800 dark:text-white font-bold mb-3",children:"このツールの特徴"}),e.jsx("p",{children:"当サイトの文字数カウンターは、リアルタイムで正確な文字数を計測する無料のWebツールです。 レポート作成、ブログ記事の執筆、SNS投稿時の文字制限確認など、あらゆるシーンでご活用いただけます。 入力されたテキストはブラウザ内でのみ処理されるため、内容が外部に送信されることはありません。"}),e.jsxs("ul",{className:"list-disc list-inside mt-4 space-y-1",children:[e.jsx("li",{children:"全角・半角を問わず正確にカウント"}),e.jsx("li",{children:"空白・改行を含めた合計と、純粋な文字のみの集計を分離"}),e.jsx("li",{children:"原稿用紙（400字）換算枚数の目安を表示"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-800 dark:text-white font-bold mb-3",children:"高度な分析機能"}),e.jsx("p",{children:"単なる文字数計測だけでなく、日本語の文章構造を分析する機能を備えています。 ひらがな、カタカナ、漢字の比率を視覚化することで、文章の「読みやすさ」を客観的に把握できます。"}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsx("p",{className:"font-bold text-xs text-gray-400 uppercase mb-2",children:"おすすめの用途"}),e.jsx("p",{className:"text-xs",children:"SEOライティング、小論文、読書感想文、ツイート作成、広告コピーの推敲、翻訳業務の単語数確認など。"})]})]})]})]}),e.jsx(z,{})]})};export{te as default};
