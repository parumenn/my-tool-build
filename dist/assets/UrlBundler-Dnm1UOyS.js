import{c as K,a3 as Q,r as a,j as e,a5 as N,P as D,V as ee,a as H,m as I,f as te,d as re,Z as ae,g as se,X as le}from"./index-BGOqOQkd.js";import{E as h}from"./external-link-BXQ-NY5i.js";import{L as ne}from"./link-2-EWFftn74.js";import{C as O}from"./copy-TJ65exfC.js";import{T as P}from"./trash-2-CRbZSvGs.js";import{H as de}from"./history-Ctb07h0o.js";import{I as oe}from"./info-BVwycOoD.js";import{T as ie}from"./triangle-alert-WFXLyDKC.js";import{S as ce}from"./settings-DlERVLYS.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=K("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),A=()=>{const o=a.useRef(null);return a.useEffect(()=>{var d;if(!o.current)return;for(;o.current.firstChild;)o.current.removeChild(o.current.firstChild);const l=document.createElement("iframe");l.style.width="160px",l.style.height="600px",l.style.border="none",l.style.overflow="hidden",l.title="Side Ad",o.current.appendChild(l);const s=(d=l.contentWindow)==null?void 0:d.document;s&&(s.open(),s.write(`
            <!DOCTYPE html>
            <html>
            <head><style>body{margin:0;padding:0;display:flex;justify-content:center;background:transparent;}</style></head>
            <body>
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c778c4a7f09b97ba471cd0fbd2d48a59',
                        'format' : 'iframe',
                        'height' : 600,
                        'width' : 160,
                        'params' : {}
                    };
                <\/script>
                <script type="text/javascript" src="https://www.highperformanceformat.com/c778c4a7f09b97ba471cd0fbd2d48a59/invoke.js"><\/script>
            </body>
            </html>
        `),s.close())},[]),e.jsx("div",{ref:o})},ke=()=>{const[o,l]=Q(),s=o.get("id"),[d,c]=a.useState(["","","","",""]),[p,u]=a.useState(""),[f,v]=a.useState(365),[g,j]=a.useState(""),[C,S]=a.useState(!1),[$,z]=a.useState(!1),[m,U]=a.useState(()=>{const t=localStorage.getItem("url_bundler_history");return t?JSON.parse(t):[]}),[i,b]=a.useState(null),[J,k]=a.useState(!1),[L,R]=a.useState(""),[_,x]=a.useState(!1);a.useEffect(()=>{localStorage.setItem("url_bundler_history",JSON.stringify(m))},[m]),a.useEffect(()=>{if(!s){const t="urlbundler_help_seen";if(!localStorage.getItem(t)){const r=setTimeout(()=>{x(!0),localStorage.setItem(t,"true")},500);return()=>clearTimeout(r)}}},[s]),a.useEffect(()=>{s?(k(!0),fetch(`./backend/url_bundler_api.php?action=get&id=${s}`).then(async t=>{if(!t.ok)throw new Error("データが見つかりません");return t.json()}).then(t=>{b(t),k(!1)}).catch(t=>{R(t.message),k(!1)})):(b(null),R(""))},[s]);const B=t=>{const r=t.trim();return r?/^https?:\/\//i.test(r)?r:"https://"+r:""},F=(t,r)=>{const n=[...d];n[t]=r,c(n)},M=()=>c([...d,""]),G=t=>{const r=d.filter((n,y)=>y!==t);c(r)},Z=()=>{i&&i.urls.forEach(t=>{window.open(t,"_blank")})},V=async()=>{const t=d.map(B).filter(r=>r.length>0);if(t.length===0){alert("URLを入力してください");return}S(!0);try{const r=await fetch("./backend/url_bundler_api.php?action=save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:t,title:p||"URLまとめ",expire_days:f,auto_redirect:!1})});if(!r.ok)throw new Error("保存に失敗しました");const n=await r.json(),y=`${window.location.origin}${window.location.pathname}#/bundle?id=${n.id}`;j(y);const Y={id:n.id,title:p||"URLまとめ",createdAt:new Date().toLocaleDateString(),url:y,urls:t,expireDays:f};U(q=>[Y,...q])}catch{alert("エラーが発生しました。通信環境を確認してください。")}finally{S(!1)}},W=async t=>{if(confirm(`このURLを削除（無効化）しますか？
サーバーからもデータが削除され、アクセスできなくなります。`)){U(r=>r.filter(n=>n.id!==t));try{await fetch("./backend/url_bundler_api.php?action=delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})})}catch(r){console.error("Delete failed",r),alert("削除処理中にエラーが発生しましたが、履歴からは削除されました。")}}},X=t=>{if(!t.urls||t.urls.length===0){alert("この履歴には保存されたURLデータがありません（古いデータの可能性があります）。");return}if(!confirm(`履歴「${t.title}」の内容を入力フォームに復元しますか？
現在入力中の内容は上書きされます。`))return;u(t.title),t.expireDays&&v(t.expireDays);const r=[...t.urls];for(;r.length<5;)r.push("");c(r),l({}),j(""),b(null),window.scrollTo({top:0,behavior:"smooth"})},E=t=>{navigator.clipboard.writeText(t),z(!0),setTimeout(()=>z(!1),2e3)},w=()=>{l({}),c(["","","","",""]),u(""),j(""),b(null)},T=()=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>x(!1),children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-lg shadow-2xl border border-gray-200 dark:border-gray-700",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center rounded-t-3xl",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(ie,{className:"text-orange-500",size:20}),"ポップアップ設定について"]}),e.jsx("button",{onClick:()=>x(!1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-800",children:e.jsx(le,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-bold leading-relaxed",children:"一括オープン機能を使うには、ブラウザのポップアップブロック設定でこのサイトを許可する必要があります。"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-3 font-bold",children:"Google Chromeの場合:"}),e.jsx("div",{className:"flex items-center gap-3 mb-24",children:e.jsxs("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-full border border-gray-300 dark:border-gray-600 h-10 flex items-center px-3 gap-2 relative pr-10",children:[e.jsx(ce,{size:14,className:"text-gray-400 shrink-0"}),e.jsxs("span",{className:"text-xs text-gray-400 truncate",children:["https://",window.location.hostname,"/..."]}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-6 h-6 bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 cursor-pointer flex items-center justify-center border border-gray-300 dark:border-gray-600",children:[e.jsx(h,{size:14,className:"text-red-500"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full border border-white"})]}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-gray-800 shadow-xl rounded-lg border border-gray-200 dark:border-gray-700 p-3 z-50 text-[10px] text-left leading-tight",children:[e.jsx("p",{className:"font-bold text-gray-800 dark:text-white mb-1",children:"ポップアップがブロックされました"}),e.jsx("p",{className:"text-blue-500 underline cursor-pointer",children:"常に許可する"})]})]})})]})}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed",children:["アドレスバーの右側（または左側の設定アイコン）に表示される ",e.jsx("span",{className:"inline-block align-middle",children:e.jsx(h,{size:12,className:"text-red-500 inline"})})," アイコンをクリックし、",e.jsxs("span",{className:"font-bold text-gray-800 dark:text-white",children:["「",window.location.hostname," のポップアップとリダイレクトを常に許可する」"]}),"を選択してください。"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>x(!1),className:"bg-cyan-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-cyan-700 transition-colors",children:"閉じる"})})]})]})});return s?e.jsxs("div",{className:"flex justify-center items-start gap-6 pb-20",children:[_&&e.jsx(T,{}),e.jsx("div",{className:"hidden 2xl:block w-[160px] sticky top-6 shrink-0",children:e.jsx(A,{})}),e.jsxs("div",{className:"flex-1 max-w-4xl min-w-0 space-y-10 relative",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl p-8 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(N,{className:"text-cyan-500"})," URLまとめ"]}),e.jsxs("button",{onClick:w,className:"text-xs bg-gray-100 dark:bg-gray-800 px-3 py-2 rounded-lg font-bold flex items-center gap-1 hover:bg-gray-200 transition-colors",children:[e.jsx(D,{size:14})," 新規作成"]})]}),J&&e.jsx("div",{className:"py-20 text-center text-gray-400 font-bold animate-pulse",children:"読み込み中..."}),L&&e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("p",{className:"text-red-500 font-bold mb-4",children:L}),e.jsx("button",{onClick:w,className:"bg-cyan-600 text-white px-6 py-2 rounded-xl font-bold",children:"トップに戻る"})]}),i&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-black text-gray-800 dark:text-white mb-2",children:i.title}),e.jsx("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-400 font-mono",children:e.jsxs("span",{children:["作成日: ",new Date(i.created_at*1e3).toLocaleDateString()]})})]}),e.jsxs("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 p-6 rounded-2xl border border-cyan-100 dark:border-cyan-800 text-center relative overflow-hidden",children:[e.jsxs("p",{className:"text-cyan-800 dark:text-cyan-200 font-bold mb-4",children:[i.urls.length,"件のリンクが保存されています"]}),e.jsxs("button",{onClick:()=>Z(),className:"w-full sm:w-auto px-8 py-3 bg-cyan-600 text-white font-black rounded-xl shadow-lg hover:bg-cyan-700 hover:shadow-xl transition-all flex items-center justify-center gap-2 mx-auto",children:[e.jsx(h,{size:20})," すべて新しいタブで開く"]}),e.jsx("div",{className:"mt-4 flex items-center justify-center",children:e.jsxs("button",{onClick:()=>x(!0),className:"text-[10px] text-cyan-600/70 dark:text-cyan-400/70 underline hover:text-cyan-800 dark:hover:text-cyan-200 transition-colors flex items-center gap-1",children:["開かない場合はポップアップ設定を確認してください ",e.jsx(xe,{size:14})]})})]}),e.jsx("div",{className:"space-y-2",children:i.urls.map((t,r)=>e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 hover:border-cyan-300 dark:hover:border-cyan-600 transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white dark:bg-gray-700 p-2 rounded-lg text-gray-400 group-hover:text-cyan-500 transition-colors",children:e.jsx(ne,{size:16})}),e.jsx("span",{className:"font-mono text-sm text-gray-600 dark:text-gray-300 truncate flex-1",children:t}),e.jsx(ee,{size:16,className:"text-gray-300 group-hover:text-cyan-500"})]})},r))})]})]}),e.jsx(H,{})]}),e.jsx("div",{className:"hidden 2xl:block w-[160px] sticky top-6 shrink-0",children:e.jsx(A,{})})]}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 pb-20 relative",children:[_&&e.jsx(T,{}),e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl p-8 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(N,{className:"text-cyan-500"})," URLまとめ作成"]}),g?e.jsxs("div",{className:"animate-fade-in bg-cyan-50 dark:bg-cyan-900/20 p-8 rounded-3xl border-2 border-cyan-100 dark:border-cyan-800 text-center",children:[e.jsx("div",{className:"bg-white dark:bg-cyan-800 p-4 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6 shadow-sm",children:e.jsx(I,{size:40,className:"text-cyan-500 dark:text-cyan-200"})}),e.jsx("h3",{className:"text-2xl font-black text-cyan-800 dark:text-cyan-200 mb-2",children:"まとめURLを発行しました"}),e.jsx("p",{className:"text-cyan-600 dark:text-cyan-400 text-sm mb-4 font-bold",children:"履歴に保存されました"}),e.jsxs("div",{className:"flex gap-2 max-w-lg mx-auto mb-8",children:[e.jsx("input",{type:"text",readOnly:!0,value:g,className:"flex-1 p-4 rounded-xl border-2 border-cyan-200 dark:border-cyan-700 bg-white dark:bg-gray-900 text-cyan-800 dark:text-cyan-200 font-bold text-sm truncate focus:outline-none"}),e.jsx("button",{onClick:()=>E(g),className:"bg-cyan-600 text-white px-6 rounded-xl font-bold hover:bg-cyan-700 transition-colors shadow-lg shadow-cyan-200 dark:shadow-none shrink-0 flex items-center gap-2",children:$?e.jsx(I,{size:20}):e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 font-bold hover:underline flex items-center gap-1",children:[e.jsx(h,{size:16})," ページを確認する"]}),e.jsx("span",{className:"text-cyan-300",children:"|"}),e.jsx("button",{onClick:w,className:"text-gray-500 dark:text-gray-400 font-bold hover:text-gray-700 dark:hover:text-gray-200",children:"新しく作成する"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"タイトル (任意)"}),e.jsx("input",{type:"text",value:p,onChange:t=>u(t.target.value),placeholder:"例: 参考資料まとめ",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"URLリスト"}),e.jsxs("div",{className:"space-y-3",children:[d.map((t,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-10 font-bold text-gray-400 text-sm shrink-0",children:r+1}),e.jsx("input",{type:"text",value:t,onChange:n=>F(r,n.target.value),className:"flex-1 p-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-cyan-500 outline-none",placeholder:"google.com"}),e.jsx("button",{onClick:()=>G(r),className:"text-gray-400 hover:text-red-500 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors shrink-0",children:e.jsx(P,{size:18})})]},r)),e.jsxs("button",{onClick:M,className:"ml-10 flex items-center gap-1 text-sm font-bold text-cyan-600 hover:text-cyan-700 transition-colors bg-cyan-50 dark:bg-cyan-900/30 px-4 py-2 rounded-lg",children:[e.jsx(D,{size:16})," URL入力欄を追加"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[e.jsx(te,{size:16})," 有効期限 (自動削除)"]}),e.jsxs("select",{value:f,onChange:t=>v(Number(t.target.value)),className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm font-bold focus:ring-2 focus:ring-cyan-500 outline-none cursor-pointer",children:[e.jsx("option",{value:3,children:"3日間"}),e.jsx("option",{value:7,children:"1週間"}),e.jsx("option",{value:30,children:"1ヶ月"}),e.jsx("option",{value:180,children:"半年 (180日)"}),e.jsx("option",{value:365,children:"1年 (365日)"})]})]}),e.jsxs("button",{onClick:V,disabled:C||d.filter(t=>t.trim()).length===0,className:"w-full py-4 bg-cyan-600 text-white font-black rounded-xl shadow-xl hover:bg-cyan-700 hover:shadow-2xl hover:-translate-y-1 transition-all disabled:opacity-50 disabled:transform-none disabled:shadow-none flex items-center justify-center gap-2",children:[C?"作成中...":"まとめURLを発行する"," ",e.jsx(N,{size:20})]})]})]}),m.length>0&&e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl p-8 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(de,{size:20})," 作成履歴"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto no-scrollbar",children:m.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 group",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-bold text-sm text-gray-800 dark:text-white truncate",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{className:"font-mono",children:t.createdAt}),e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 hover:underline flex items-center gap-1",children:["確認 ",e.jsx(h,{size:10})]}),e.jsx("span",{className:"text-[10px] bg-gray-200 dark:bg-gray-700 px-1.5 rounded",children:t.urls?`${t.urls.length}件`:"不明"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pl-2",children:[e.jsx("button",{onClick:()=>E(t.url),className:"p-2 text-gray-400 hover:text-cyan-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm",title:"URLをコピー",children:e.jsx(O,{size:14})}),e.jsx("button",{onClick:()=>X(t),className:"p-2 text-gray-400 hover:text-green-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm",title:"再利用・復元",children:e.jsx(re,{size:14})}),e.jsx("button",{onClick:()=>W(t.id),className:"p-2 text-gray-400 hover:text-red-500 bg-white dark:bg-gray-700 rounded-lg shadow-sm",title:"削除・解放",children:e.jsx(P,{size:14})})]})]},t.id))})]}),e.jsxs("article",{className:"p-8 bg-white dark:bg-dark-lighter rounded-3xl border border-gray-100 dark:border-gray-700 prose dark:prose-invert max-w-none shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-black flex items-center gap-2 mb-6",children:[e.jsx(oe,{className:"text-blue-500"}),"URLまとめツールの活用法"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 text-sm leading-relaxed text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(ae,{size:18,className:"text-cyan-500"}),"複数のリンクを1つに"]}),e.jsx("p",{children:"SNSやメールで複数の参考資料を送りたいとき、URLを羅列すると見づらくなってしまいます。このツールを使えば、それらを1つの短縮URLのようなページにまとめることができます。「一括で開く」機能も備えているため、受け取った側の利便性も向上します。"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(se,{size:18,className:"text-cyan-500"}),"登録不要・シンプル機能"]}),e.jsx("p",{children:"ユーザー登録は不要で、誰でもすぐに利用できます。発行されたURLにアクセスすると、保存されたリンク一覧が表示されるシンプルな設計です。日常のブックマーク整理や、一時的な情報共有に最適です。"})]})]})]}),e.jsx(H,{})]})};export{ke as default};
