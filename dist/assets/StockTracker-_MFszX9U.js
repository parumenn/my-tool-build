import{c as Ue,R as v,r as A,j as e,X as ke}from"./index-BpV0uD13.js";import{W as Xe}from"./WorkspaceContext-BrTp0TJE.js";import{A as Ye}from"./AdBanner-D13VyyhB.js";import{T as we}from"./trending-up-WWndfu2q.js";import{H as Ne}from"./history-CGUUq8em.js";import{c as Se,b as Je,C as Qe,a as Ze}from"./chevron-right-D924QC79.js";import{J as et,K as tt,Q as rt,r as V,U as at,V as nt,i as le,y as Ae,W as _e,N as Ie,f as ie,c as Oe,D as it,v as st,X as ot,L as xe,k as lt,A as dt,o as ne,q as ct,l as ye,Y as gt,s as ut,m as Fe,u as ht,G as xt,Z as Pe,z as yt,P as mt,R as De,T as Ce,B as ft,C as bt}from"./generateCategoricalChart-D_Cwv_zU.js";import{g as Me,C as qe,X as me,Y as fe,B as pt}from"./BarChart-6gm3FE91.js";import{D as vt}from"./download-DQX4M3FE.js";import{T as jt}from"./trash-2-EH__qRB8.js";import{B as kt}from"./briefcase-nYI8wmZq.js";import{P as wt}from"./plus-CM9Sd7S-.js";import{R as Nt}from"./refresh-cw-Jgplw9Ti.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var At=["x1","y1","x2","y2","key"],Ot=["offset"];function J(t){"@babel/helpers - typeof";return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},J(t)}function $e(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,a)}return i}function E(t){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?$e(Object(i),!0).forEach(function(a){Pt(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$e(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function Pt(t,r,i){return r=Dt(r),r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function Dt(t){var r=Ct(t,"string");return J(r)=="symbol"?r:r+""}function Ct(t,r){if(J(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var a=i.call(t,r);if(J(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Y(){return Y=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Y.apply(this,arguments)}function Ee(t,r){if(t==null)return{};var i=$t(t,r),a,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)a=o[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}function $t(t,r){if(t==null)return{};var i={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;i[a]=t[a]}return i}var Et=function(r){var i=r.fill;if(!i||i==="none")return null;var a=r.fillOpacity,s=r.x,o=r.y,l=r.width,g=r.height,x=r.ry;return v.createElement("rect",{x:s,y:o,ry:x,width:l,height:g,stroke:"none",fill:i,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function We(t,r){var i;if(v.isValidElement(t))i=v.cloneElement(t,r);else if(le(t))i=t(r);else{var a=r.x1,s=r.y1,o=r.x2,l=r.y2,g=r.key,x=Ee(r,At),f=ie(x,!1);f.offset;var c=Ee(f,Ot);i=v.createElement("line",Y({},c,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:g}))}return i}function Tt(t){var r=t.x,i=t.width,a=t.horizontal,s=a===void 0?!0:a,o=t.horizontalPoints;if(!s||!o||!o.length)return null;var l=o.map(function(g,x){var f=E(E({},t),{},{x1:r,y1:g,x2:r+i,y2:g,key:"line-".concat(x),index:x});return We(s,f)});return v.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Lt(t){var r=t.y,i=t.height,a=t.vertical,s=a===void 0?!0:a,o=t.verticalPoints;if(!s||!o||!o.length)return null;var l=o.map(function(g,x){var f=E(E({},t),{},{x1:g,y1:r,x2:g,y2:r+i,key:"line-".concat(x),index:x});return We(s,f)});return v.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function zt(t){var r=t.horizontalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,g=t.horizontalPoints,x=t.horizontal,f=x===void 0?!0:x;if(!f||!r||!r.length)return null;var c=g.map(function(y){return Math.round(y+s-s)}).sort(function(y,d){return y-d});s!==c[0]&&c.unshift(0);var k=c.map(function(y,d){var m=!c[d+1],j=m?s+l-y:c[d+1]-y;if(j<=0)return null;var N=d%r.length;return v.createElement("rect",{key:"react-".concat(d),y,x:a,height:j,width:o,stroke:"none",fill:r[N],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},k)}function _t(t){var r=t.vertical,i=r===void 0?!0:r,a=t.verticalFill,s=t.fillOpacity,o=t.x,l=t.y,g=t.width,x=t.height,f=t.verticalPoints;if(!i||!a||!a.length)return null;var c=f.map(function(y){return Math.round(y+o-o)}).sort(function(y,d){return y-d});o!==c[0]&&c.unshift(0);var k=c.map(function(y,d){var m=!c[d+1],j=m?o+g-y:c[d+1]-y;if(j<=0)return null;var N=d%a.length;return v.createElement("rect",{key:"react-".concat(d),x:y,y:l,width:j,height:x,stroke:"none",fill:a[N],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},k)}var It=function(r,i){var a=r.xAxis,s=r.width,o=r.height,l=r.offset;return _e(Me(E(E(E({},qe.defaultProps),a),{},{ticks:Ie(a,!0),viewBox:{x:0,y:0,width:s,height:o}})),l.left,l.left+l.width,i)},Ft=function(r,i){var a=r.yAxis,s=r.width,o=r.height,l=r.offset;return _e(Me(E(E(E({},qe.defaultProps),a),{},{ticks:Ie(a,!0),viewBox:{x:0,y:0,width:s,height:o}})),l.top,l.top+l.height,i)},ee={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function be(t){var r,i,a,s,o,l,g=et(),x=tt(),f=rt(),c=E(E({},t),{},{stroke:(r=t.stroke)!==null&&r!==void 0?r:ee.stroke,fill:(i=t.fill)!==null&&i!==void 0?i:ee.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:ee.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:ee.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:ee.vertical,verticalFill:(l=t.verticalFill)!==null&&l!==void 0?l:ee.verticalFill,x:V(t.x)?t.x:f.left,y:V(t.y)?t.y:f.top,width:V(t.width)?t.width:f.width,height:V(t.height)?t.height:f.height}),k=c.x,y=c.y,d=c.width,m=c.height,j=c.syncWithTicks,N=c.horizontalValues,D=c.verticalValues,S=at(),C=nt();if(!V(d)||d<=0||!V(m)||m<=0||!V(k)||k!==+k||!V(y)||y!==+y)return null;var T=c.verticalCoordinatesGenerator||It,$=c.horizontalCoordinatesGenerator||Ft,z=c.horizontalPoints,O=c.verticalPoints;if((!z||!z.length)&&le($)){var q=N&&N.length,I=$({yAxis:C?E(E({},C),{},{ticks:q?N:C.ticks}):void 0,width:g,height:x,offset:f},q?!0:j);Ae(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(J(I),"]")),Array.isArray(I)&&(z=I)}if((!O||!O.length)&&le(T)){var W=D&&D.length,F=T({xAxis:S?E(E({},S),{},{ticks:W?D:S.ticks}):void 0,width:g,height:x,offset:f},W?!0:j);Ae(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(J(F),"]")),Array.isArray(F)&&(O=F)}return v.createElement("g",{className:"recharts-cartesian-grid"},v.createElement(Et,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),v.createElement(Tt,Y({},c,{offset:f,horizontalPoints:z,xAxis:S,yAxis:C})),v.createElement(Lt,Y({},c,{offset:f,verticalPoints:O,xAxis:S,yAxis:C})),v.createElement(zt,Y({},c,{horizontalPoints:z})),v.createElement(_t,Y({},c,{verticalPoints:O})))}be.displayName="CartesianGrid";var Mt=["type","layout","connectNulls","ref"],qt=["key"];function re(t){"@babel/helpers - typeof";return re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},re(t)}function Te(t,r){if(t==null)return{};var i=Wt(t,r),a,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)a=o[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}function Wt(t,r){if(t==null)return{};var i={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;i[a]=t[a]}return i}function se(){return se=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},se.apply(this,arguments)}function Le(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,a)}return i}function _(t){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Le(Object(i),!0).forEach(function(a){M(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Le(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function te(t){return Vt(t)||Gt(t)||Rt(t)||Bt()}function Bt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rt(t,r){if(t){if(typeof t=="string")return pe(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pe(t,r)}}function Gt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vt(t){if(Array.isArray(t))return pe(t)}function pe(t,r){(r==null||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function Kt(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function ze(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Re(a.key),a)}}function Ht(t,r,i){return r&&ze(t.prototype,r),i&&ze(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ut(t,r,i){return r=de(r),Xt(t,Be()?Reflect.construct(r,i||[],de(t).constructor):r.apply(t,i))}function Xt(t,r){if(r&&(re(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yt(t)}function Yt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Be(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Be=function(){return!!t})()}function de(t){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},de(t)}function Jt(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ve(t,r)}function ve(t,r){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ve(t,r)}function M(t,r,i){return r=Re(r),r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function Re(t){var r=Qt(t,"string");return re(r)=="symbol"?r:r+""}function Qt(t,r){if(re(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var a=i.call(t,r);if(re(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oe=function(t){function r(){var i;Kt(this,r);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return i=Ut(this,r,[].concat(s)),M(i,"state",{isAnimationFinished:!0,totalLength:0}),M(i,"generateSimpleStrokeDasharray",function(l,g){return"".concat(g,"px ").concat(l-g,"px")}),M(i,"getStrokeDasharray",function(l,g,x){var f=x.reduce(function(D,S){return D+S});if(!f)return i.generateSimpleStrokeDasharray(g,l);for(var c=Math.floor(l/f),k=l%f,y=g-l,d=[],m=0,j=0;m<x.length;j+=x[m],++m)if(j+x[m]>k){d=[].concat(te(x.slice(0,m)),[k-j]);break}var N=d.length%2===0?[0,y]:[y];return[].concat(te(r.repeat(x,c)),te(d),N).map(function(D){return"".concat(D,"px")}).join(", ")}),M(i,"id",ht("recharts-line-")),M(i,"pathRef",function(l){i.mainCurve=l}),M(i,"handleAnimationEnd",function(){i.setState({isAnimationFinished:!0}),i.props.onAnimationEnd&&i.props.onAnimationEnd()}),M(i,"handleAnimationStart",function(){i.setState({isAnimationFinished:!1}),i.props.onAnimationStart&&i.props.onAnimationStart()}),i}return Jt(r,t),Ht(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.points,g=o.xAxis,x=o.yAxis,f=o.layout,c=o.children,k=st(c,ot);if(!k)return null;var y=function(j,N){return{x:j.x,y:j.y,value:j.value,errorVal:Fe(j.payload,N)}},d={clipPath:a?"url(#clipPath-".concat(s,")"):null};return v.createElement(xe,d,k.map(function(m){return v.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:l,xAxis:g,yAxis:x,layout:f,dataPointFormatter:y})}))}},{key:"renderDots",value:function(a,s,o){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var g=this.props,x=g.dot,f=g.points,c=g.dataKey,k=ie(this.props,!1),y=ie(x,!0),d=f.map(function(j,N){var D=_(_(_({key:"dot-".concat(N),r:3},k),y),{},{index:N,cx:j.x,cy:j.y,value:j.value,dataKey:c,payload:j.payload,points:f});return r.renderDotItem(x,D)}),m={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(o,")"):null};return v.createElement(xe,se({className:"recharts-line-dots",key:"dots"},m),d)}},{key:"renderCurveStatically",value:function(a,s,o,l){var g=this.props,x=g.type,f=g.layout,c=g.connectNulls;g.ref;var k=Te(g,Mt),y=_(_(_({},ie(k,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(o,")"):null,points:a},l),{},{type:x,layout:f,connectNulls:c});return v.createElement(lt,se({},y,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var o=this,l=this.props,g=l.points,x=l.strokeDasharray,f=l.isAnimationActive,c=l.animationBegin,k=l.animationDuration,y=l.animationEasing,d=l.animationId,m=l.animateNewValues,j=l.width,N=l.height,D=this.state,S=D.prevPoints,C=D.totalLength;return v.createElement(dt,{begin:c,duration:k,isActive:f,easing:y,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var $=T.t;if(S){var z=S.length/g.length,O=g.map(function(L,Q){var B=Math.floor(Q*z);if(S[B]){var K=S[B],R=ne(K.x,L.x),ce=ne(K.y,L.y);return _(_({},L),{},{x:R($),y:ce($)})}if(m){var ge=ne(j*2,L.x),Z=ne(N/2,L.y);return _(_({},L),{},{x:ge($),y:Z($)})}return _(_({},L),{},{x:L.x,y:L.y})});return o.renderCurveStatically(O,a,s)}var q=ne(0,C),I=q($),W;if(x){var F="".concat(x).split(/[,\s]+/gim).map(function(L){return parseFloat(L)});W=o.getStrokeDasharray(I,C,F)}else W=o.generateSimpleStrokeDasharray(C,I);return o.renderCurveStatically(g,a,s,{strokeDasharray:W})})}},{key:"renderCurve",value:function(a,s){var o=this.props,l=o.points,g=o.isAnimationActive,x=this.state,f=x.prevPoints,c=x.totalLength;return g&&l&&l.length&&(!f&&c>0||!ct(f,l))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(l,a,s)}},{key:"render",value:function(){var a,s=this.props,o=s.hide,l=s.dot,g=s.points,x=s.className,f=s.xAxis,c=s.yAxis,k=s.top,y=s.left,d=s.width,m=s.height,j=s.isAnimationActive,N=s.id;if(o||!g||!g.length)return null;var D=this.state.isAnimationFinished,S=g.length===1,C=Oe("recharts-line",x),T=f&&f.allowDataOverflow,$=c&&c.allowDataOverflow,z=T||$,O=ye(N)?this.id:N,q=(a=ie(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=q.r,W=I===void 0?3:I,F=q.strokeWidth,L=F===void 0?2:F,Q=gt(l)?l:{},B=Q.clipDot,K=B===void 0?!0:B,R=W*2+L;return v.createElement(xe,{className:C},T||$?v.createElement("defs",null,v.createElement("clipPath",{id:"clipPath-".concat(O)},v.createElement("rect",{x:T?y:y-d/2,y:$?k:k-m/2,width:T?d:d*2,height:$?m:m*2})),!K&&v.createElement("clipPath",{id:"clipPath-dots-".concat(O)},v.createElement("rect",{x:y-R/2,y:k-R/2,width:d+R,height:m+R}))):null,!S&&this.renderCurve(z,O),this.renderErrorBar(z,O),(S||l)&&this.renderDots(z,K,O),(!j||D)&&ut.renderCallByParent(this.props,g))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var o=a.length%2!==0?[].concat(te(a),[0]):a,l=[],g=0;g<s;++g)l=[].concat(te(l),te(o));return l}},{key:"renderDotItem",value:function(a,s){var o;if(v.isValidElement(a))o=v.cloneElement(a,s);else if(le(a))o=a(s);else{var l=s.key,g=Te(s,qt),x=Oe("recharts-line-dot",typeof a!="boolean"?a.className:"");o=v.createElement(it,se({key:l},g,{className:x}))}return o}}])}(A.PureComponent);M(oe,"displayName","Line");M(oe,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!xt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});M(oe,"getComposedData",function(t){var r=t.props,i=t.xAxis,a=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.dataKey,g=t.bandSize,x=t.displayedData,f=t.offset,c=r.layout,k=x.map(function(y,d){var m=Fe(y,l);return c==="horizontal"?{x:Pe({axis:i,ticks:s,bandSize:g,entry:y,index:d}),y:ye(m)?null:a.scale(m),value:m,payload:y}:{x:ye(m)?null:i.scale(m),y:Pe({axis:a,ticks:o,bandSize:g,entry:y,index:d}),value:m,payload:y}});return _({points:k,layout:c},f)});var Zt=yt({chartName:"LineChart",GraphicalChild:oe,axisComponents:[{axisType:"xAxis",AxisComp:me},{axisType:"yAxis",AxisComp:fe}],formatAxisMap:mt});const er=["順張り","逆張り","材料/決算","デイトレ","スイング","長期/配当","優待","IPO","その他"],tr=[{id:"calm",label:"冷静",color:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300"},{id:"excited",label:"興奮",color:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"},{id:"anxious",label:"不安",color:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300"},{id:"angry",label:"怒り",color:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"},{id:"fear",label:"恐怖",color:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}],yr=()=>{const t=A.useContext(Xe),[r,i]=A.useState("dashboard"),[a,s]=A.useState([]),[o,l]=A.useState(1e6),[g,x]=A.useState(!1),[f,c]=A.useState(!1),[k,y]=A.useState(!1),[d,m]=A.useState({date:new Date().toISOString().split("T")[0],type:"sell",emotion:"calm",strategy:"順張り",quantity:100,pnl:0});A.useEffect(()=>{const n=localStorage.getItem("stock_trades"),u=localStorage.getItem("stock_initial_asset");if(n)try{s(JSON.parse(n))}catch{s([])}else s([{id:"1",date:"2023-10-01",ticker:"7203",name:"トヨタ",type:"buy",price:2e3,quantity:100,pnl:0,comment:"エントリー",strategy:"順張り",emotion:"calm"},{id:"2",date:"2023-10-05",ticker:"7203",name:"トヨタ",type:"sell",price:2150,quantity:100,pnl:15e3,comment:"利確",strategy:"順張り",emotion:"excited"}]);u&&l(Number(u)),x(!0)},[]),A.useEffect(()=>{g&&localStorage.setItem("stock_trades",JSON.stringify(a))},[a,g]),A.useEffect(()=>{g&&localStorage.setItem("stock_initial_asset",o.toString())},[o,g]);const j=new Date().toISOString().slice(0,7),N=a.reduce((n,u)=>n+(Number(u.pnl)||0),0),D=o+N,S=A.useMemo(()=>a.filter(n=>n.date.startsWith(j)).reduce((n,u)=>n+(Number(u.pnl)||0),0),[a,j]),C=a.filter(n=>n.type==="sell"&&n.pnl!==0),T=C.filter(n=>n.pnl>0),$=C.filter(n=>n.pnl<0),z=C.length>0?T.length/C.length*100:0,O=T.reduce((n,u)=>n+u.pnl,0),q=Math.abs($.reduce((n,u)=>n+u.pnl,0)),I=q===0?O>0?99.99:0:O/q,W=T.length>0?O/T.length:0,F=A.useMemo(()=>{const n=new Map,u=[...a].sort((h,b)=>new Date(h.date).getTime()-new Date(b.date).getTime());for(const h of u){if(!h.ticker)continue;const b=n.get(h.ticker)||{name:h.name||h.ticker,quantity:0,totalCost:0};if(h.type==="buy")b.quantity+=h.quantity,b.totalCost+=h.price*h.quantity;else if(h.type==="sell"){const w=b.quantity>0?b.totalCost/b.quantity:0;b.quantity-=h.quantity,b.totalCost-=w*h.quantity}b.quantity<1e-4?n.delete(h.ticker):n.set(h.ticker,b)}return Array.from(n.entries()).map(([h,b])=>({...b,ticker:h,avgPrice:b.quantity>0?b.totalCost/b.quantity:0}))},[a]),L=A.useMemo(()=>{const n=[...a].sort((w,p)=>new Date(w.date).getTime()-new Date(p.date).getTime()),u=new Map,h=new Date().toISOString().split("T")[0];let b=o;if(n.length===0)u.set(h,o);else{const w=n[0].date;if(w){const p=new Date(w);isNaN(p.getTime())||(p.setDate(p.getDate()-1),u.set(p.toISOString().split("T")[0],o))}}for(const w of n)b+=Number(w.pnl)||0,u.set(w.date,b);return Array.from(u.entries()).sort((w,p)=>new Date(w[0]).getTime()-new Date(p[0]).getTime()).map(([w,p])=>({date:w,asset:p}))},[a,o]),Q=A.useMemo(()=>{const n={};return a.forEach(u=>{if(!u.date)return;const h=u.date.slice(0,7);n[h]=(n[h]||0)+(Number(u.pnl)||0)}),Object.entries(n).sort().map(([u,h])=>({date:u,pnl:h}))},[a]),B=A.useMemo(()=>{const n={};return a.forEach(u=>{u.strategy&&(n[u.strategy]=(n[u.strategy]||0)+(Number(u.pnl)||0))}),Object.entries(n).sort((u,h)=>h[1]-u[1]).map(([u,h])=>({name:u,value:h}))},[a]),K=()=>{const n=`ID,日付,銘柄コード,銘柄名,売買区分,価格,株数,損益,戦略,感情,コメント
`,u=a.map(p=>`"${p.id}","${p.date}","${p.ticker}","${p.name}","${p.type}",${p.price},${p.quantity},${p.pnl},"${p.strategy}","${p.emotion}","${p.comment}"`).join(`
`),h=new Blob([new Uint8Array([239,187,191]),n+u],{type:"text/csv;charset=utf-8;"}),b=URL.createObjectURL(h),w=document.createElement("a");w.href=b,w.download=`trade_history_${new Date().toISOString().split("T")[0]}.csv`,w.click(),URL.revokeObjectURL(b)},R=()=>{confirm("全ての取引データを削除しますか？この操作は取り消せません。")&&(s([]),l(1e6),alert("データを初期化しました。"))},ce=()=>{if(!d.date){alert("日付は必須です");return}const n={id:Date.now().toString(),date:d.date,ticker:d.ticker||"",name:d.name||d.ticker||"取引",type:d.type||"sell",price:Number(d.price)||0,quantity:Number(d.quantity)||0,pnl:Number(d.pnl)||0,comment:d.comment||"",strategy:d.strategy||"その他",emotion:d.emotion||"calm"};s(u=>[...u,n]),c(!1),m({date:new Date().toISOString().split("T")[0],type:"sell",emotion:"calm",strategy:"順張り",quantity:100,pnl:0,name:"",ticker:"",comment:"",price:0})},ge=n=>{confirm("この記録を削除しますか？")&&s(a.filter(u=>u.id!==n))},Z=({title:n,value:u,sub:h,colorClass:b})=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase",children:n}),e.jsx("div",{className:`text-2xl font-black mt-1 ${b||"text-gray-800 dark:text-white"}`,children:u}),h&&e.jsx("span",{className:"text-[10px] text-gray-400 mt-1",children:h})]}),Ge=()=>{const n=new Date,u=[];for(let h=89;h>=0;h--){const b=new Date;b.setDate(n.getDate()-h),u.push(b.toISOString().split("T")[0])}return e.jsx("div",{className:"flex flex-wrap gap-1",children:u.map(h=>{const w=a.filter(G=>G.date===h&&G.pnl!==0).reduce((G,ue)=>G+ue.pnl,0);let p="bg-gray-100 dark:bg-gray-700";return w>5e4?p="bg-red-500":w>1e4?p="bg-red-400":w>0?p="bg-red-300":w<-5e4?p="bg-emerald-600":w<-1e4?p="bg-emerald-500":w<0&&(p="bg-emerald-400"),e.jsx("div",{className:`w-3 h-3 rounded-sm ${p}`,title:`${h}: ${w.toLocaleString()}円`},h)})})},Ve=()=>{const[n,u]=A.useState(new Date),h=n.getFullYear(),b=n.getMonth(),w=new Date(h,b,1).getDay(),p=new Date(h,b+1,0).getDate(),G=[];for(let P=0;P<w;P++)G.push(null);for(let P=1;P<=p;P++)G.push(P);const ue=`${h}-${String(b+1).padStart(2,"0")}`,he=a.filter(P=>P.date.startsWith(ue)).reduce((P,H)=>P+Number(H.pnl),0);return e.jsxs("div",{className:"animate-fade-in bg-white dark:bg-gray-800 p-4 md:p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg md:text-xl text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(Se,{className:"text-indigo-500"}),h,"年",b+1,"月",e.jsxs("span",{className:`text-sm ml-2 font-mono ${he>=0?"text-red-500":"text-emerald-500"}`,children:["(",he>0?"+":"",he.toLocaleString(),")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u(new Date(h,b-1,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:e.jsx(Qe,{size:20})}),e.jsx("button",{onClick:()=>u(new Date),className:"text-xs font-bold px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:"今月"}),e.jsx("button",{onClick:()=>u(new Date(h,b+1,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:e.jsx(Ze,{size:20})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:[["日","月","火","水","木","金","土"].map((P,H)=>e.jsx("div",{className:`text-center text-xs font-bold py-2 ${H===0?"text-red-400":H===6?"text-blue-400":"text-gray-400"}`,children:P},P)),G.map((P,H)=>{if(!P)return e.jsx("div",{className:"h-16 md:h-24 bg-transparent"},H);const je=`${h}-${String(b+1).padStart(2,"0")}-${String(P).padStart(2,"0")}`,ae=a.filter(X=>X.date===je),U=ae.reduce((X,He)=>X+He.pnl,0),Ke=new Date().toISOString().slice(0,10)===je;return e.jsxs("div",{className:`h-16 md:h-24 p-1 md:p-2 border rounded-xl flex flex-col justify-between transition-all hover:shadow-md ${ae.length>0?"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600":"bg-transparent border-transparent"} ${Ke?"ring-2 ring-indigo-500":""}`,children:[e.jsx("span",{className:"text-[10px] md:text-xs font-bold text-gray-500 dark:text-gray-400",children:P}),ae.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-right font-black text-[10px] md:text-sm ${U>0?"text-red-500":U<0?"text-emerald-500":"text-gray-400"}`,children:U!==0&&(U>0?"+":"")+(Math.abs(U)>=1e6?(U/1e4).toFixed(0)+"万":U.toLocaleString())}),e.jsxs("div",{className:"flex justify-end gap-0.5 md:gap-1 mt-1",children:[ae.some(X=>X.type==="buy")&&e.jsx("div",{className:"w-1 md:w-1.5 h-1 md:h-1.5 rounded-full bg-blue-400"}),ae.some(X=>X.type==="sell")&&e.jsx("div",{className:"w-1 md:w-1.5 h-1 md:h-1.5 rounded-full bg-red-400"})]})]})]},H)})]})]})};return e.jsxs("div",{className:`mx-auto h-full flex flex-col ${t?"w-full p-2":"max-w-6xl space-y-6 pb-20"}`,children:[!t&&e.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(we,{className:"text-indigo-500"})," 株トレード記録"]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>y(!0),className:"p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:"設定"})})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl overflow-x-auto no-scrollbar shrink-0",children:[{id:"dashboard",icon:St,label:"ホーム"},{id:"history",icon:Ne,label:"履歴"},{id:"calendar",icon:Se,label:"カレンダー"},{id:"analytics",icon:Je,label:"分析"}].map(n=>e.jsxs("button",{onClick:()=>i(n.id),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-xs sm:text-sm font-bold transition-all whitespace-nowrap ${r===n.id?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[e.jsx(n.icon,{size:16}),n.label]},n.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:[r==="dashboard"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Z,{title:"総資産評価額",value:`¥${D.toLocaleString()}`,colorClass:"text-indigo-600 dark:text-indigo-400"}),e.jsx(Z,{title:"今月の損益",value:`¥${(S||0).toLocaleString()}`,colorClass:(S||0)>=0?"text-red-500":"text-emerald-500"}),e.jsx(Z,{title:"勝率",value:`${z.toFixed(1)}%`,sub:`${T.length}勝 ${$.length}敗`}),e.jsx(Z,{title:"PF / リスクリワード",value:I.toFixed(2),sub:`Avg Win: ¥${Math.round(W).toLocaleString()}`})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(we,{size:18})," 資産推移"]}),e.jsx(De,{width:"100%",height:"100%",children:e.jsxs(Zt,{data:L,children:[e.jsx(be,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),e.jsx(me,{dataKey:"date",tick:{fontSize:10},tickFormatter:n=>n.slice(5),stroke:"#9ca3af"}),e.jsx(fe,{tick:{fontSize:10},tickFormatter:n=>`${n/1e4}万`,width:40,domain:["auto","auto"],stroke:"#9ca3af"}),e.jsx(Ce,{formatter:n=>`¥${n.toLocaleString()}`,contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",backgroundColor:"rgba(255,255,255,0.9)"}}),e.jsx(oe,{type:"monotone",dataKey:"asset",stroke:"#4f46e5",strokeWidth:3,dot:!1,activeDot:{r:6}})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(Ne,{size:18})," アクティビティ"]}),e.jsx("div",{className:"mb-4",children:e.jsx(Ge,{})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase",children:"直近の取引"}),a.slice(-5).reverse().map(n=>e.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-gray-100 dark:border-gray-700 pb-2 last:border-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded mr-2 ${n.type==="buy"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:n.type==="buy"?"買":n.type==="sell"?"売":n.type}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:n.name})]}),e.jsx("div",{className:`font-bold ${n.pnl>0?"text-red-500":n.pnl<0?"text-emerald-500":"text-gray-400"}`,children:n.pnl!==0?(n.pnl>0?"+":"")+n.pnl.toLocaleString():"-"})]},n.id))]})]})]})]}),r==="history"&&e.jsxs("div",{className:"animate-fade-in bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300",children:"取引履歴一覧"}),e.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs font-bold text-gray-600 dark:text-gray-300 transition-colors",children:[e.jsx(vt,{size:14})," CSV出力"]})]}),e.jsx("div",{className:"overflow-x-auto flex-1",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-500 dark:text-gray-400 font-bold sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 whitespace-nowrap",children:"日付"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"銘柄"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"売買"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"価格(円)"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"株数"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"損益"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"戦略/感情"}),e.jsx("th",{className:"p-4 w-10"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[[...a].sort((n,u)=>new Date(u.date).getTime()-new Date(n.date).getTime()).map(n=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[e.jsx("td",{className:"p-4 font-mono text-gray-600 dark:text-gray-400",children:n.date}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold text-gray-800 dark:text-white",children:n.name}),e.jsx("div",{className:"text-xs text-gray-400 font-mono",children:n.ticker})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${n.type==="buy"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":n.type==="sell"?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-gray-100 text-gray-600"}`,children:n.type==="buy"?"買付":n.type==="sell"?"売却":n.type})}),e.jsx("td",{className:"p-4 text-right font-mono text-gray-700 dark:text-gray-300",children:n.price.toLocaleString()}),e.jsx("td",{className:"p-4 text-right font-mono text-gray-700 dark:text-gray-300",children:n.quantity.toLocaleString()}),e.jsx("td",{className:`p-4 text-right font-mono font-bold ${n.pnl>0?"text-red-500":n.pnl<0?"text-emerald-500":"text-gray-400"}`,children:n.pnl!==0?(n.pnl>0?"+":"")+n.pnl.toLocaleString():"-"}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 px-2 py-0.5 rounded w-fit",children:n.strategy}),n.emotion&&e.jsx("span",{className:"text-[10px] text-gray-400",children:n.emotion})]})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>ge(n.id),className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(jt,{size:16})})})]},n.id)),a.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"p-8 text-center text-gray-400",children:"取引データがありません"})})]})]})})]}),r==="calendar"&&e.jsx(Ve,{}),r==="analytics"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4",children:"月別損益推移"}),e.jsx(De,{width:"100%",height:"100%",children:e.jsxs(pt,{data:Q,children:[e.jsx(be,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),e.jsx(me,{dataKey:"date",tick:{fontSize:10},stroke:"#9ca3af"}),e.jsx(fe,{tickFormatter:n=>`${n/1e4}万`,width:40,stroke:"#9ca3af"}),e.jsx(Ce,{formatter:n=>`¥${n.toLocaleString()}`,cursor:{fill:"transparent"},contentStyle:{backgroundColor:"rgba(255,255,255,0.9)",borderRadius:"8px",color:"#333"}}),e.jsx(ft,{dataKey:"pnl",children:Q.map((n,u)=>e.jsx(bt,{fill:n.pnl>=0?"#ef4444":"#10b981"},`cell-${u}`))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4",children:"戦略別パフォーマンス"}),e.jsx("div",{className:"h-full overflow-y-auto no-scrollbar pb-6",children:B.length>0?e.jsx("div",{className:"space-y-3",children:B.map((n,u)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 text-xs font-bold text-gray-600 dark:text-gray-400 truncate",children:n.name}),e.jsx("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden flex",children:n.value>0?e.jsx("div",{className:"h-full bg-red-500",style:{width:`${Math.min(Math.abs(n.value)/5e4*100,100)}%`}}):e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${Math.min(Math.abs(n.value)/5e4*100,100)}%`}})}),e.jsxs("div",{className:`w-20 text-right text-xs font-bold ${n.value>=0?"text-red-500":"text-emerald-500"}`,children:[n.value>0?"+":"",n.value.toLocaleString()]})]},u))}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-sm",children:"データがありません"})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(kt,{size:18})," 現在の保有銘柄 (履歴から推定)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-500 dark:text-gray-400 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"銘柄"}),e.jsx("th",{className:"p-3 text-right",children:"保有数"}),e.jsx("th",{className:"p-3 text-right",children:"平均取得単価"}),e.jsx("th",{className:"p-3 text-right",children:"推定投資額"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:F.length>0?F.map((n,u)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30",children:[e.jsxs("td",{className:"p-3 font-medium text-gray-800 dark:text-gray-200",children:[n.name," ",e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:n.ticker})]}),e.jsx("td",{className:"p-3 text-right font-mono",children:n.quantity.toLocaleString()}),e.jsxs("td",{className:"p-3 text-right font-mono",children:["¥",Math.round(n.avgPrice).toLocaleString()]}),e.jsxs("td",{className:"p-3 text-right font-mono font-bold",children:["¥",Math.round(n.avgPrice*n.quantity).toLocaleString()]})]},u)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-6 text-center text-gray-400",children:"保有なし"})})})]})})]})]})]}),e.jsx("button",{onClick:()=>c(!0),className:`${t?"absolute bottom-4 right-4 p-3 shadow-lg":"fixed bottom-8 right-8 p-5 shadow-2xl"} bg-indigo-600 text-white rounded-full hover:bg-indigo-700 hover:scale-105 transition-all z-20 flex items-center justify-center active:scale-95`,children:e.jsx(wt,{size:t?20:32})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl w-full max-w-sm shadow-2xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:"設定"}),e.jsx("button",{onClick:()=>y(!1),children:e.jsx(ke,{className:"text-gray-400"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2",children:"初期資産 (円)"}),e.jsx("input",{type:"number",value:o,onChange:n=>l(Number(n.target.value)),className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:"※ここに入力した金額をスタート地点として損益を加算します。"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("button",{onClick:R,className:"w-full py-2 text-red-500 text-xs font-bold hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(Nt,{size:14})," 全データを初期化"]})}),e.jsx("button",{onClick:()=>y(!1),className:"w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors",children:"完了"})]})]})}),f&&e.jsx("div",{className:`z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in ${t?"absolute inset-0":"fixed inset-0 bg-black/60"}`,children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md p-6 shadow-2xl border border-gray-100 dark:border-gray-700 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-gray-800 dark:text-white",children:"取引を記録"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ke,{})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 p-1 rounded-xl",children:["buy","sell","deposit","withdraw"].map(n=>e.jsx("button",{onClick:()=>m({...d,type:n}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${d.type===n?n==="buy"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow":n==="sell"?"bg-white dark:bg-gray-600 text-red-600 dark:text-red-400 shadow":"bg-white dark:bg-gray-600 text-gray-800 dark:text-white shadow":"text-gray-500 dark:text-gray-400"}`,children:n==="buy"?"買付":n==="sell"?"売却":n==="deposit"?"入金":"出金"},n))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"日付"}),e.jsx("input",{type:"date",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",value:d.date,onChange:n=>m({...d,date:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"銘柄コード"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"7203",value:d.ticker,onChange:n=>m({...d,ticker:n.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"銘柄名 / 項目名"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"トヨタ自動車",value:d.name,onChange:n=>m({...d,name:n.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"約定価格"}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500 outline-none",value:d.price,onChange:n=>m({...d,price:Number(n.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"株数"}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500 outline-none",value:d.quantity,onChange:n=>m({...d,quantity:Number(n.target.value)})})]})]}),d.type==="sell"&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"確定損益 (円)"}),e.jsx("input",{type:"number",className:`w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 font-mono text-xl font-black focus:ring-2 focus:ring-indigo-500 outline-none ${Number(d.pnl)>=0?"text-red-500":"text-emerald-500"}`,placeholder:"例: 10000 or -5000",value:d.pnl,onChange:n=>m({...d,pnl:Number(n.target.value)})}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1 text-right",children:"※マイナスの場合は「-」をつけてください"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"戦略・タグ"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:er.map(n=>e.jsx("button",{type:"button",onClick:()=>m({...d,strategy:n}),className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${d.strategy===n?"bg-indigo-100 dark:bg-indigo-900/50 border-indigo-500 text-indigo-700 dark:text-indigo-300":"border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400"}`,children:n},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"感情コンディション"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:tr.map(n=>e.jsx("button",{type:"button",onClick:()=>m({...d,emotion:n.id}),className:`flex-1 min-w-[60px] py-1.5 rounded text-xs font-bold transition-all ${d.emotion===n.id?n.color+" shadow-sm ring-1 ring-inset ring-current":"bg-gray-100 dark:bg-gray-700 text-gray-400"}`,children:n.label},n.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"メモ"}),e.jsx("textarea",{className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white text-sm h-20 resize-none focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"エントリー根拠や反省点...",value:d.comment,onChange:n=>m({...d,comment:n.target.value})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{onClick:()=>c(!1),className:"flex-1 py-3 text-gray-500 dark:text-gray-400 text-sm font-bold hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"キャンセル"}),e.jsx("button",{onClick:ce,className:"flex-1 py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 shadow-xl shadow-indigo-200 dark:shadow-none transition-colors",children:"保存する"})]})]})}),!t&&e.jsx(Ye,{})]})};export{yr as default};
