import{j as e}from"./index-D4reVrDU.js";import{r as n}from"./vendor-react-Dy8mW7IA.js";import{A as J}from"./AdBanner-DUdjXfK6.js";import{G,m as v,g as V,$ as H,aY as Y,D as K,aZ as Q,a_ as X,t as ee,a$ as te,I as re,r as ae,S as se}from"./vendor-ui-gkh9ij8_.js";import"./vendor-utils-V9s-2EHj.js";const oe=()=>new Promise(x=>{if(window.L){x(window.L);return}const u=document.createElement("link");u.rel="stylesheet",u.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(u);const m=document.createElement("script");m.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",m.onload=()=>x(window.L),document.head.appendChild(m)}),Z=x=>x?String.fromCodePoint(...x.toUpperCase().split("").map(u=>127397+u.charCodeAt(0))):"ðŸ³ï¸",xe=()=>{const[x,u]=n.useState("lookup"),[m,B]=n.useState(""),[$,E]=n.useState(!1),[c,R]=n.useState(null),[T,C]=n.useState(null),[k,U]=n.useState(""),[_,L]=n.useState(!1),[I,y]=n.useState([]),[A,P]=n.useState(null),h=n.useRef(null),j=n.useRef(null),N=n.useRef([]),f=n.useRef(null);n.useEffect(()=>{let t;return oe().then(r=>{j.current&&(t=r.map(j.current,{scrollWheelZoom:!0,dragging:!0,zoomControl:!1,attributionControl:!1}).setView([36,138],2),r.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{maxZoom:19,noWrap:!0}).addTo(t),r.control.zoom({position:"topleft"}).addTo(t),h.current=t)}),()=>{t&&t.remove()}},[]),n.useEffect(()=>{const t=j.current;if(!t)return;const r=i=>{i.stopPropagation()};return t.addEventListener("wheel",r,{passive:!0}),()=>t.removeEventListener("wheel",r)},[]);const M=()=>{N.current.forEach(t=>t.remove()),N.current=[],f.current&&(f.current.remove(),f.current=null)},D=(t,r,i,d)=>{const l=window.L;if(!l||!h.current)return;const s=l.divIcon({className:"custom-div-icon",html:`<div style="background-color: ${d}; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white; box-shadow: 0 0 10px ${d};"></div>`,iconSize:[12,12],iconAnchor:[6,6]}),a=l.marker([t,r],{icon:s}).addTo(h.current);return a.bindPopup(`<div class="p-1 font-bold text-xs">${i}</div>`),N.current.push(a),a},O=t=>/^(10\.|127\.|172\.(1[6-9]|2[0-9]|3[0-1])\.|192\.168\.)/.test(t),q=async t=>{var r,i,d,l;if(!t||t==="Request timed out"||O(t))return null;try{const a=await(await fetch(`https://ipwho.is/${t}`)).json();if(a.success)return{ip:a.ip,city:a.city,region:a.region,country:a.country_code,country_name:a.country,org:((r=a.connection)==null?void 0:r.isp)||((i=a.connection)==null?void 0:i.org)||"Unknown",latitude:a.latitude,longitude:a.longitude,timezone:(d=a.timezone)==null?void 0:d.id,asn:(l=a.connection)==null?void 0:l.asn}}catch{}return null},W=async t=>{var r;if(t.preventDefault(),!!m){E(!0),C(null),R(null),M();try{let i=m.replace(/^https?:\/\//,"").replace(/\/.*$/,"");const d=/^(\d{1,3}\.){3}\d{1,3}$/.test(i);let l=i;if(!d){const o=(r=(await(await fetch(`https://dns.google/resolve?name=${i}`)).json()).Answer)==null?void 0:r.find(p=>p.type===1);if(!o)throw new Error("ãƒ‰ãƒ¡ã‚¤ãƒ³ã®åå‰è§£æ±ºã«å¤±æ•—ã—ã¾ã—ãŸ");l=o.data}const s=await q(l);if(!s)throw new Error("ä½ç½®æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ");R(s),D(s.latitude,s.longitude,`ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: ${s.ip}`,"#3b82f6"),h.current.flyTo([s.latitude,s.longitude],6)}catch(i){C(i.message)}finally{E(!1)}}},F=async t=>{if(t.preventDefault(),!!k){L(!0),P(null),y([]),M();try{let r=k.replace(/^https?:\/\//,"").replace(/\/.*$/,"");const d=await(await fetch(`./backend/traceroute.php?host=${r}`)).text();let l;try{const o=d.indexOf("{"),p=d.lastIndexOf("}");if(o===-1||p===-1)throw new Error;l=JSON.parse(d.substring(o,p+1))}catch{throw new Error("ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®å¿œç­”ãŒä¸æ­£ã§ã™ã€‚")}if(l.error)throw new Error(l.error);const s=(l.hops||[]).map(o=>({...o,loading:!0,geo:null}));y(s);const a=[],z=window.L;for(let o=0;o<s.length;o++){const p=s[o];if(p.ip==="Request timed out"||O(p.ip)){y(w=>w.map((b,S)=>S===o?{...b,loading:!1}:b));continue}const g=await q(p.ip);if(g){a.push([g.latitude,g.longitude]);const w=o===s.length-1,b=o===0?"#10b981":w?"#3b82f6":"#6366f1";D(g.latitude,g.longitude,`#${p.hop} ${g.city}`,b),a.length>1&&z&&(f.current&&f.current.remove(),f.current=z.polyline(a,{color:"#10b981",weight:3,opacity:.6,dashArray:"5, 10"}).addTo(h.current)),h.current.flyTo([g.latitude,g.longitude],4)}y(w=>w.map((b,S)=>S===o?{...b,geo:g,loading:!1}:b))}}catch(r){P(r.message)}finally{L(!1)}}};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl shadow-sm",children:e.jsx(G,{className:"text-indigo-500"})}),e.jsx("h2",{className:"text-2xl font-black text-gray-800 dark:text-white",children:"ã‚µãƒ¼ãƒãƒ¼ä½ç½®æƒ…å ± & çµŒè·¯è¿½è·¡"})]}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl border border-gray-200 dark:border-gray-700 shadow-inner",children:[e.jsx("button",{onClick:()=>u("lookup"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${x==="lookup"?"bg-white dark:bg-gray-700 text-indigo-600 shadow-sm":"text-gray-500"}`,children:"IP/ãƒ‰ãƒ¡ã‚¤ãƒ³æ¤œç´¢"}),e.jsx("button",{onClick:()=>u("trace"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${x==="trace"?"bg-white dark:bg-gray-700 text-indigo-600 shadow-sm":"text-gray-500"}`,children:"çµŒè·¯ã‚’è¿½è·¡ (Trace)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1 flex flex-col gap-6",children:x==="lookup"?e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-3xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsx("input",{type:"text",value:m,onChange:t=>B(t.target.value),placeholder:"ä¾‹: google.com",className:"w-full p-4 rounded-2xl border-2 border-gray-50 dark:border-gray-800 bg-white dark:bg-gray-800 text-gray-900 dark:text-white font-bold focus:border-indigo-500 outline-none transition-all"}),e.jsxs("button",{type:"submit",disabled:$||!m,className:"w-full bg-indigo-600 text-white py-4 rounded-2xl font-black shadow-xl hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2 transition-all active:scale-95",children:[$?e.jsx(v,{className:"animate-spin"}):e.jsx(V,{size:20})," è§£æžã‚’å®Ÿè¡Œ"]})]}),T&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 rounded-xl text-xs font-bold animate-fade-in flex items-center gap-2",children:[e.jsx(H,{size:14})," ",T]}),c&&e.jsxs("div",{className:"mt-8 space-y-4 animate-scale-up",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute -right-4 -bottom-4 opacity-20",children:e.jsx(G,{size:100})}),e.jsx("div",{className:"text-sm font-bold opacity-80 mb-1 relative z-10",children:"Target IP"}),e.jsx("div",{className:"text-xl font-mono font-black break-all mb-6 relative z-10",children:c.ip}),e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:"text-4xl shadow-sm",children:Z(c.country)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-black text-lg truncate",children:c.country_name}),e.jsxs("p",{className:"text-xs opacity-90 font-bold",children:[c.city,", ",c.region]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{label:"ISP / äº‹æ¥­è€…",val:c.org,icon:Y},{label:"ASN",val:c.asn,icon:K},{label:"åº§æ¨™",val:`${c.latitude}, ${c.longitude}`,icon:Q}].map((t,r)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"p-2 bg-white dark:bg-gray-700 rounded-lg text-indigo-500 shadow-sm",children:e.jsx(t.icon,{size:14})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-tighter",children:t.label}),e.jsx("p",{className:"text-xs font-bold text-gray-700 dark:text-gray-200 truncate",children:t.val})]})]},r))})]})]}):e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-3xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col h-full max-h-[600px] animate-scale-up",children:[e.jsx("form",{onSubmit:F,className:"space-y-4 mb-6 shrink-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:k,onChange:t=>U(t.target.value),placeholder:"ä¾‹: example.com",className:"flex-1 p-3 rounded-xl border-2 border-gray-50 dark:border-gray-800 bg-white dark:bg-gray-800 text-gray-900 dark:text-white font-bold outline-none focus:border-indigo-500 transition-all"}),e.jsx("button",{type:"submit",disabled:_,className:"bg-indigo-600 text-white px-4 rounded-xl font-bold disabled:opacity-50 transition-all active:scale-95",children:_?e.jsx(v,{className:"animate-spin"}):e.jsx(X,{size:20})})]})}),A&&e.jsxs("div",{className:"p-4 mb-4 bg-red-50 dark:bg-red-900/20 text-red-600 rounded-xl text-xs font-bold animate-fade-in flex items-center gap-2",children:[e.jsx(H,{size:14})," ",A]}),e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-3",children:I.map((t,r)=>e.jsxs("div",{className:"relative pl-6 animate-fade-in",children:[r<I.length-1&&e.jsx("div",{className:"absolute left-[11px] top-4 w-0.5 h-full bg-gray-100 dark:bg-gray-800"}),e.jsx("div",{className:`absolute left-0 top-1 w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-black shadow-sm ${t.ip==="Request timed out"?"bg-gray-100 text-gray-400":"bg-indigo-600 text-white"}`,children:t.hop}),e.jsxs("div",{className:`p-3 rounded-xl border transition-all ${t.geo?"bg-indigo-50/30 dark:bg-indigo-900/10 border-indigo-100 dark:border-indigo-800":"bg-white dark:bg-gray-800/50 border-gray-100 dark:border-gray-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-mono text-[10px] font-bold text-gray-800 dark:text-white break-all",children:t.ip}),e.jsx("span",{className:"text-[9px] font-black text-gray-400",children:t.rtt})]}),t.loading?e.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-gray-400 font-bold",children:[e.jsx(v,{size:8,className:"animate-spin"})," èª¿æŸ»ä¸­..."]}):t.geo?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:Z(t.geo.country)}),e.jsx("div",{className:"min-w-0",children:e.jsxs("p",{className:"text-[10px] font-black text-indigo-600 dark:text-indigo-400 truncate",children:[t.geo.city,", ",t.geo.country_name]})})]}):t.ip!=="Request timed out"&&e.jsx("p",{className:"text-[9px] text-gray-400",children:"ä½ç½®æƒ…å ±ãªã— (å†…éƒ¨ãƒ›ãƒƒãƒ—)"})]})]},r))})]})}),e.jsxs("div",{className:"lg:col-span-2 relative group",children:[e.jsx("div",{ref:j,className:"relative w-full aspect-[1.6/1] bg-[#0a1128] rounded-[2.5rem] overflow-hidden shadow-2xl border-4 border-slate-900 ring-1 ring-white/10 z-0",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900 z-10 pointer-events-none opacity-0 group-data-[loading=true]:opacity-100 transition-opacity",children:e.jsx(v,{className:"animate-spin text-indigo-500",size:40})})}),e.jsxs("div",{className:"absolute top-6 right-6 flex flex-col gap-2 z-10 bg-slate-900/80 backdrop-blur-md p-4 rounded-2xl border border-white/10 shadow-xl pointer-events-none",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-black text-white uppercase tracking-wider",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500 border border-white shadow-[0_0_5px_#10b981]"})," å‡ºç™ºåœ°ç‚¹"]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-black text-white uppercase tracking-wider",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-500 border border-white shadow-[0_0_5px_#6366f1]"})," çµŒç”±åœ°ç‚¹"]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-black text-white uppercase tracking-wider",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 border border-white shadow-[0_0_5px_#3b82f6]"})," åˆ°é”åœ°ç‚¹"]})]}),e.jsxs("div",{className:"absolute bottom-6 left-6 flex items-center gap-3 bg-slate-900/80 backdrop-blur-xl px-5 py-3 rounded-full border border-white/10 text-[10px] font-black text-white uppercase tracking-[0.2em] shadow-2xl z-10",children:[e.jsx(ee,{size:14,className:"text-emerald-400 animate-pulse"})," Accurate Route Map 5.2"]}),e.jsxs("div",{className:"absolute bottom-6 right-6 hidden md:flex items-center gap-2 bg-white/5 backdrop-blur-sm px-4 py-2 rounded-xl text-[9px] font-bold text-slate-400 border border-white/5 z-10",children:[e.jsx(te,{size:12})," ãƒ‰ãƒ©ãƒƒã‚°ã§ç§»å‹• / ãƒ›ã‚¤ãƒ¼ãƒ«ã§ã‚ºãƒ¼ãƒ "]})]})]}),e.jsxs("article",{className:"p-8 bg-white dark:bg-dark-lighter rounded-3xl border border-gray-100 dark:border-gray-700 prose dark:prose-invert max-w-none shadow-sm transition-all",children:[e.jsxs("h2",{className:"text-xl font-black flex items-center gap-2 mb-6",children:[e.jsx(re,{className:"text-blue-500"}),"ç²¾å¯†ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµŒè·¯ã®å¯è¦–åŒ–"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 text-sm leading-relaxed text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(ae,{size:18,className:"text-indigo-500"}),"ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åœ°å›³ã‚¨ãƒ³ã‚¸ãƒ³"]}),e.jsx("p",{children:"å½“ãƒ„ãƒ¼ãƒ«ã¯OpenStreetMapãŠã‚ˆã³CARTOã®æœ€æ–°åœ°ç†ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆã—ãŸåœ°å›³ã‚¨ãƒ³ã‚¸ãƒ³ã‚’æŽ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚æ­£ç¢ºãªæµ·å²¸ç·šã¨éƒ½å¸‚ä½ç½®ã«åŸºã¥ã„ãŸãƒžãƒƒãƒ”ãƒ³ã‚°ã«ã‚ˆã‚Šã€tracerouteã‚³ãƒžãƒ³ãƒ‰ã§å–å¾—ã—ãŸãƒ‘ã‚±ãƒƒãƒˆãŒä¸–ç•Œã‚’æ—…ã™ã‚‹æ§˜å­ã‚’ãƒªã‚¢ãƒ«ã«å†ç¾ã—ã¾ã™ã€‚"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(se,{size:18,className:"text-indigo-500"}),"æœ€é©åŒ–ã•ã‚ŒãŸæ“ä½œæ€§"]}),e.jsx("p",{children:"åœ°å›³æ“ä½œä¸­ã«ç”»é¢å…¨ä½“ãŒã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã—ã¾ã†ã‚¹ãƒˆãƒ¬ã‚¹ã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã€é«˜åº¦ãªã‚¤ãƒ™ãƒ³ãƒˆåˆ¶å¾¡ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ãƒžã‚¦ã‚¹ãƒ›ã‚¤ãƒ¼ãƒ«ã§ã®ã‚ºãƒ¼ãƒ ã‚„ãƒ‰ãƒ©ãƒƒã‚°ã§ã®ãƒ‘ãƒ³æ“ä½œãŒåœ°å›³å†…ã«é™å®šã•ã‚Œã‚‹ãŸã‚ã€è©³ç´°ãªçµŒè·¯ç¢ºèªã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«è¡Œã†ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚"})]})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-400 text-center mt-8 pb-4",children:["Map data Â© ",e.jsx("a",{href:"https://www.openstreetmap.org/copyright",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"OpenStreetMap"})," contributors Â© ",e.jsx("a",{href:"https://carto.com/attributions",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"CARTO"})]}),e.jsx("style",{children:`
        .leaflet-container {
          background: #0a1128 !important;
        }
        .leaflet-popup-content-wrapper {
          background: rgba(15, 23, 42, 0.9);
          color: white;
          border-radius: 12px;
          backdrop-filter: blur(8px);
          border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .leaflet-popup-tip {
          background: rgba(15, 23, 42, 0.9);
        }
        .leaflet-control-zoom-in, .leaflet-control-zoom-out {
          background-color: rgba(15, 23, 42, 0.8) !important;
          color: white !important;
          border: 1px solid rgba(255, 255, 255, 0.1) !important;
          backdrop-filter: blur(4px);
        }
      `}),e.jsx(J,{})]})};export{xe as default};
