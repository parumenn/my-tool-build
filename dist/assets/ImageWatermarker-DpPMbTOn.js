import{r as l,j as e,Z as L,a as T}from"./index-BhNUt_7m.js";import{S as B}from"./stamp-DYnGlRjs.js";import{U as w}from"./upload-DhKlQcqn.js";import{I as E}from"./image-BWY6R9Pk.js";import{D}from"./download-Dn-U1_q2.js";import{I as O}from"./info-Cu0LhVd0.js";const H=()=>{const[o,N]=l.useState(null),[i,j]=l.useState("text"),[m,v]=l.useState("Sample Watermark"),[h,S]=l.useState(48),[k,C]=l.useState("#ffffff"),[p,I]=l.useState(.5),[x,$]=l.useState(null),[f,F]=l.useState(.3),[n,g]=l.useState("br"),y=l.useRef(null),R=a=>{var r;const s=(r=a.target.files)==null?void 0:r[0];if(s){const t=new Image;t.onload=()=>N(t),t.src=URL.createObjectURL(s)}},W=a=>{var r;const s=(r=a.target.files)==null?void 0:r[0];if(s){const t=new Image;t.onload=()=>$(t),t.src=URL.createObjectURL(s)}},z=()=>{const a=y.current;if(!a||!o)return;const s=a.getContext("2d");if(!s)return;a.width=o.width,a.height=o.height,s.drawImage(o,0,0);let r=0,t=0;const d=Math.min(o.width,o.height)*.05;if(s.globalAlpha=p,i==="text"){s.font=`bold ${h}px sans-serif`,s.fillStyle=k,s.textBaseline="middle";const c=s.measureText(m).width,u=h;switch(n){case"center":r=(a.width-c)/2,t=a.height/2;break;case"tl":r=d,t=d+u/2;break;case"tr":r=a.width-c-d,t=d+u/2;break;case"bl":r=d,t=a.height-d-u/2;break;case"br":r=a.width-c-d,t=a.height-d-u/2;break}s.shadowColor="rgba(0,0,0,0.5)",s.shadowBlur=4,s.fillText(m,r,t)}else if(i==="image"&&x){const b=x.width*f,c=x.height*f;switch(n){case"center":r=(a.width-b)/2,t=(a.height-c)/2;break;case"tl":r=d,t=d;break;case"tr":r=a.width-b-d,t=d;break;case"bl":r=d,t=a.height-c-d;break;case"br":r=a.width-b-d,t=a.height-c-d;break}s.drawImage(x,r,t,b,c)}};l.useEffect(()=>{o&&z()},[o,i,m,h,k,p,x,f,n]);const U=()=>{if(y.current){const a=document.createElement("a");a.download="watermarked.png",a.href=y.current.toDataURL("image/png"),a.click()}};return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-10 pb-20",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(B,{className:"text-sky-500"})," 画像透かし合成 (Watermark)"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-1 h-full overflow-y-auto max-h-[600px] pr-2 no-scrollbar",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-bold text-gray-700 dark:text-gray-300 block text-sm",children:"ベース画像"}),e.jsxs("label",{className:"flex items-center gap-2 p-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx(w,{size:20,className:"text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"画像を選択..."}),e.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 space-y-4",children:[e.jsxs("div",{className:"flex bg-white dark:bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>j("text"),className:`flex-1 py-1.5 rounded text-xs font-bold ${i==="text"?"bg-sky-100 text-sky-700":"text-gray-500"}`,children:"テキスト"}),e.jsx("button",{onClick:()=>j("image"),className:`flex-1 py-1.5 rounded text-xs font-bold ${i==="image"?"bg-sky-100 text-sky-700":"text-gray-500"}`,children:"画像ロゴ"})]}),i==="text"?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:m,onChange:a=>v(a.target.value),className:"w-full p-2 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:h,onChange:a=>S(Number(a.target.value)),className:"w-20 p-2 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white"}),e.jsx("input",{type:"color",value:k,onChange:a=>C(a.target.value),className:"h-10 w-full cursor-pointer rounded overflow-hidden"})]})]}):e.jsxs("label",{className:"flex items-center gap-2 p-3 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer",children:[e.jsx(E,{size:20,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:"透かし用画像を選択"}),e.jsx("input",{type:"file",accept:"image/*",onChange:W,className:"hidden"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500",children:"透明度"}),e.jsx("span",{className:"text-xs font-mono",children:p})]}),e.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:p,onChange:a=>I(Number(a.target.value)),className:"w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-bold text-gray-700 dark:text-gray-300 block text-sm text-center",children:"配置位置"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 w-32 mx-auto",children:[e.jsx("button",{onClick:()=>g("tl"),className:`p-2 border rounded font-bold ${n==="tl"?"bg-sky-500 text-white border-sky-600":"bg-white dark:bg-gray-800"}`,children:"↖"}),e.jsx("div",{className:"p-2 border rounded opacity-10"}),e.jsx("button",{onClick:()=>g("tr"),className:`p-2 border rounded font-bold ${n==="tr"?"bg-sky-500 text-white border-sky-600":"bg-white dark:bg-gray-800"}`,children:"↗"}),e.jsx("div",{className:"p-2 border rounded opacity-10"}),e.jsx("button",{onClick:()=>g("center"),className:`p-2 border rounded font-bold ${n==="center"?"bg-sky-500 text-white border-sky-600":"bg-white dark:bg-gray-800"}`,children:"●"}),e.jsx("div",{className:"p-2 border rounded opacity-10"}),e.jsx("button",{onClick:()=>g("bl"),className:`p-2 border rounded font-bold ${n==="bl"?"bg-sky-500 text-white border-sky-600":"bg-white dark:bg-gray-800"}`,children:"↙"}),e.jsx("div",{className:"p-2 border rounded opacity-10"}),e.jsx("button",{onClick:()=>g("br"),className:`p-2 border rounded font-bold ${n==="br"?"bg-sky-500 text-white border-sky-600":"bg-white dark:bg-gray-800"}`,children:"↘"})]})]}),e.jsxs("button",{onClick:U,disabled:!o,className:"w-full py-3 bg-sky-600 text-white font-bold rounded-xl shadow-lg shadow-sky-200 dark:shadow-none hover:bg-sky-700 transition-colors disabled:opacity-50",children:[e.jsx(D,{className:"inline mr-2"})," 加工した画像を保存"]})]}),e.jsx("div",{className:"lg:col-span-2 bg-gray-50 dark:bg-black/50 rounded-xl flex items-center justify-center p-4 border border-gray-200 dark:border-gray-800 min-h-[400px]",children:o?e.jsx("canvas",{ref:y,className:"max-w-full h-auto object-contain shadow-2xl rounded-lg"}):e.jsxs("div",{className:"text-gray-400 text-center animate-pulse",children:[e.jsx(w,{size:48,className:"mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"font-bold",children:"画像をアップロードして開始"})]})})]})]}),e.jsxs("article",{className:"p-8 bg-white dark:bg-dark-lighter rounded-3xl border border-gray-100 dark:border-gray-700 prose dark:prose-invert max-w-none shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-black flex items-center gap-2 mb-6",children:[e.jsx(O,{className:"text-blue-500"}),"画像透かし（ウォーターマーク）の活用と効果"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 text-sm leading-relaxed text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(L,{size:18,className:"text-sky-500"}),"著作権の保護とブランド表示"]}),e.jsx("p",{children:"ブログやSNSに投稿する写真に自分の名前やロゴを入れることで、無断転載を抑制し、オリジナリティを主張できます。当ツールでは、文字（テキスト）だけでなく、お手持ちのロゴ画像（PNG等）を合成することも可能です。透明度を調整することで、写真の美しさを損なわずに自然な透かしを入れられます。"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(T,{size:18,className:"text-sky-500"}),"ブラウザ内完結のプライベート処理"]}),e.jsx("p",{children:"多くのWebサービスは画像をサーバーに送信して処理しますが、当サイトはブラウザ上のCanvas機能を使って直接描画します。アップロードした写真やロゴデータが外部に送信・保存されることは一切ありません。機密性の高いデザイン案やプライベートなスナップ写真も安全に加工できます。"})]})]})]})]})};export{H as default};
