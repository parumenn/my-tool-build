import{r as a,A as O,j as e}from"./index-Ba7ahvR2.js";import{S as R,M,a as T}from"./shield-DvYtbXKi.js";import{M as A}from"./monitor-smpandEe.js";import{D as N}from"./database-1-M5LeSF.js";import{D as J}from"./download-CVVrehN4.js";import{C as w}from"./circle-alert-DMdAHg3C.js";import{U as _}from"./upload-C3Vk-DKE.js";import{C as B}from"./circle-check-ChyMQlBg.js";import{L as D}from"./loader-circle-CP4AP0Gc.js";const G=()=>{const{showAds:i,setShowAds:v}=a.useContext(O),g=a.useRef(null),[m,h]=a.useState(""),[p,u]=a.useState(""),[c,k]=a.useState(""),[f,j]=a.useState(!1),[y,l]=a.useState("idle"),S=()=>{const r={};["theme","addedTools","showAds","maitool_notes","kakeibo_transactions","kakeibo_subs","kakeibo_goals"].forEach(d=>{const t=localStorage.getItem(d);if(t)try{r[d]=JSON.parse(t)}catch{r[d]=t}});const x=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),b=URL.createObjectURL(x),s=document.createElement("a");s.href=b,s.download=`maitool_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s)},C=r=>{var b;const n=(b=r.target.files)==null?void 0:b[0];if(!n)return;const x=new FileReader;x.onload=s=>{var d;try{const t=JSON.parse((d=s.target)==null?void 0:d.result);Object.keys(t).forEach(o=>{typeof t[o]=="object"?localStorage.setItem(o,JSON.stringify(t[o])):localStorage.setItem(o,String(t[o]))}),alert("復元が完了しました。変更を反映するためにページを再読み込みします。"),window.location.reload()}catch(t){console.error(t),alert("ファイルの読み込みに失敗しました。正しいバックアップファイルか確認してください。")}},x.readAsText(n)},z=async r=>{if(r.preventDefault(),!!c.trim()){j(!0),l("idle");try{(await fetch("./backend/admin_api.php?action=send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,contact:p,message:c})})).ok?(l("success"),h(""),u(""),k("")):l("error")}catch{l("error")}finally{j(!1)}}};return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"設定"}),e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-6 rounded-2xl border border-emerald-100 dark:border-emerald-800 flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-800 rounded-lg text-emerald-600 dark:text-emerald-300 shrink-0",children:e.jsx(R,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-emerald-800 dark:text-emerald-400 mb-1",children:"安全な設計"}),e.jsxs("p",{className:"text-sm text-emerald-700 dark:text-emerald-300 leading-relaxed",children:["当サイトのデータ管理はサーバーレスで動作しており、各アプリで入力されたデータがサーバーに送信・保存されることは一切ありません。",e.jsx("br",{}),"すべての処理はお使いのブラウザ内（ローカル）で完結しています。"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-lighter p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(A,{size:20,className:"text-purple-500"}),"表示設定"]}),e.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-100 dark:border-gray-800 last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"広告を表示する"}),e.jsx("p",{className:"text-xs text-gray-500",children:i?"サービスの維持にご協力ください":"｡ﾟﾟ(*´□`*｡)°ﾟ。"})]}),e.jsx("button",{onClick:()=>v(!i),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${i?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-lighter p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(N,{size:20,className:"text-blue-500"}),"データ管理"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-transparent dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-200",children:"バックアップを作成"}),e.jsx(N,{size:16,className:"text-gray-400"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"家計簿、メモ、設定などのすべてのデータをJSONファイルとしてダウンロードします。"}),e.jsxs("button",{onClick:S,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold text-sm flex items-center justify-center gap-2 transition-colors",children:[e.jsx(J,{size:16})," 保存する"]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-transparent dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-200",children:"データを復元"}),e.jsx(w,{size:16,className:"text-orange-400"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"保存したJSONファイルを読み込みます。現在のデータは上書きされます。"}),e.jsx("input",{type:"file",accept:".json",ref:g,className:"hidden",onChange:C}),e.jsxs("button",{onClick:()=>{var r;return(r=g.current)==null?void 0:r.click()},className:"w-full py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-lg font-bold text-sm flex items-center justify-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(_,{size:16})," 読み込む"]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-lighter p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{size:20,className:"text-pink-500 dark:text-pink-400"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"管理者へ連絡"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:["バグ報告や機能要望など、管理者へメッセージを送信できます。",e.jsx("br",{}),"※返信が必要な場合はメールアドレス等を記入してください。"]}),y==="success"?e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 p-6 rounded-xl text-center",children:[e.jsx(B,{size:48,className:"text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"font-bold text-green-700 dark:text-green-300",children:"送信しました"}),e.jsx("button",{onClick:()=>l("idle"),className:"mt-4 text-xs text-gray-500 underline",children:"続けて送信する"})]}):e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"お名前 (任意)"}),e.jsx("input",{type:"text",value:m,onChange:r=>h(r.target.value),className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 text-sm outline-none focus:ring-2 focus:ring-pink-500/30 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"連絡先 (任意)"}),e.jsx("input",{type:"text",value:p,onChange:r=>u(r.target.value),placeholder:"Email / Twitter等",className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 text-sm outline-none focus:ring-2 focus:ring-pink-500/30 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:["メッセージ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:c,onChange:r=>k(r.target.value),required:!0,className:"w-full p-3 rounded-lg border border-gray-300 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 text-sm h-32 resize-none outline-none focus:ring-2 focus:ring-pink-500/30 dark:text-white",placeholder:"ここに内容を入力してください..."})]}),y==="error"&&e.jsxs("p",{className:"text-xs text-red-500 font-bold flex items-center gap-1",children:[e.jsx(w,{size:12})," 送信に失敗しました。時間をおいて試してください。"]}),e.jsxs("button",{type:"submit",disabled:f||!c,className:`w-full py-4 font-bold rounded-xl transition-all flex items-center justify-center gap-2 border-2 
                             bg-pink-500 border-pink-500 text-white shadow-lg shadow-pink-100 dark:shadow-none
                             dark:bg-pink-400 dark:border-pink-400 dark:text-white
                             hover:bg-pink-600 hover:border-pink-600 dark:hover:bg-pink-500 dark:hover:border-pink-500
                             disabled:bg-transparent disabled:border-pink-500/20 disabled:text-pink-500/40 disabled:shadow-none
                             dark:disabled:bg-pink-400/5 dark:disabled:border-pink-400/30 dark:disabled:text-pink-400/60 dark:disabled:cursor-not-allowed`,children:[f?e.jsx(D,{className:"animate-spin",size:20}):e.jsx(T,{size:20}),e.jsx("span",{children:"送信する"})]})]})]}),e.jsx("div",{className:"text-center text-xs text-gray-400",children:"Version 2.5.0"})]})};export{G as default};
