import{r as n,j as e}from"./index-Ba7ahvR2.js";import{G as P}from"./globe-CnEfUWZx.js";import{S as A}from"./search-DcjgDLgV.js";import{A as H}from"./arrow-right-BxTpk5Tg.js";import{I as G}from"./info-BsMTVB_j.js";import{D as R}from"./database-1-M5LeSF.js";import{S as z}from"./shield-check-DvrhvHdf.js";const W=i=>i?String.fromCodePoint(...i.toUpperCase().split("").map(h=>127397+h.charCodeAt(0))):"ğŸ³ï¸",X=()=>{const[i,h]=n.useState("lookup"),[u,C]=n.useState(""),[w,y]=n.useState(!1),[r,v]=n.useState(null),[B,N]=n.useState(null),[f,M]=n.useState(""),[$,k]=n.useState(!1),[F,m]=n.useState([]),[U,S]=n.useState(null),E=async a=>{try{const o=await(await fetch(`https://dns.google/resolve?name=${a}`)).json();if(o.Answer){const s=o.Answer.find(d=>d.type===1);if(s)return s.data}return null}catch{return null}},L=async a=>{try{const t=await fetch(`https://ipapi.co/${a}/json/`);if(t.ok){const o=await t.json();if(!o.error)return o}}catch{}return null},T=async a=>{if(a.preventDefault(),!!u){y(!0),N(null),v(null);try{let t=u.replace(/^https?:\/\//,"").replace(/\/.*$/,"");const o=/^(\d{1,3}\.){3}\d{1,3}$/.test(t);let s=t;if(!o){const x=await E(t);if(!x)throw new Error("ãƒ‰ãƒ¡ã‚¤ãƒ³è§£æ±ºå¤±æ•—");s=x}const d=await L(s);if(!d)throw new Error("ä½ç½®æƒ…å ±ã®å–å¾—å¤±æ•—");v(d)}catch(t){N(t.message)}finally{y(!1)}}},D=async a=>{if(a.preventDefault(),!!f){k(!0),S(null),m([]);try{let t=f.replace(/^https?:\/\//,"").replace(/\/.*$/,"");const s=await(await fetch(`./backend/traceroute.php?host=${t}`)).json();if(s.error)throw new Error(s.error);const x=(s.hops||[]).map(l=>({hop:l.hop,ip:l.ip,rtt:l.rtt,loading:!0,geo:null}));m(x);for(let l=0;l<x.length;l++){const b=x[l];if(b.ip.startsWith("192.168.")||b.ip.startsWith("10.")){m(p=>p.map((g,c)=>c===l?{...g,loading:!1}:g));continue}try{const p=await L(b.ip);m(g=>g.map((c,j)=>j===l?{...c,geo:p,loading:!1}:c))}catch{m(g=>g.map((c,j)=>j===l?{...c,loading:!1}:c))}await new Promise(p=>setTimeout(p,500))}}catch(t){S(t.message)}finally{k(!1)}}},I=r?((a,t)=>{const o=(t+180)/360*100,s=Math.max(-85,Math.min(85,a))*Math.PI/180,d=(.5-Math.log(Math.tan(Math.PI/4+s/2))/(2*Math.PI))*100;return{x:o,y:d}})(r.latitude,r.longitude):{x:50,y:50};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(P,{className:"text-indigo-500"}),"ã‚µãƒ¼ãƒãƒ¼ä½ç½®æƒ…å ±"]}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>h("lookup"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="lookup"?"bg-white dark:bg-gray-700 text-indigo-600 shadow-sm":"text-gray-500"}`,children:"ä½ç½®æ¤œç´¢"}),e.jsx("button",{onClick:()=>h("trace"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="trace"?"bg-white dark:bg-gray-700 text-indigo-600 shadow-sm":"text-gray-500"}`,children:"ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒˆ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1 space-y-6",children:i==="lookup"?e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsx("input",{type:"text",value:u,onChange:a=>C(a.target.value),placeholder:"google.com",className:"w-full p-3 rounded-xl border dark:bg-gray-800 dark:text-white"}),e.jsxs("button",{type:"submit",disabled:w||!u,className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-bold shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:[w?"...":e.jsx(A,{size:20}),"æ¤œç´¢"]})]}),r&&e.jsx("div",{className:"mt-6 space-y-4 animate-fade-in",children:e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-blue-600 rounded-xl p-5 text-white shadow-md",children:[e.jsx("div",{className:"text-2xl font-mono font-bold break-all mb-4",children:r.ip}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-4xl",children:W(r.country)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:r.country_name}),e.jsxs("p",{className:"text-xs opacity-80",children:[r.region,", ",r.city]})]})]})]})})]}):e.jsx("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 h-full flex flex-col",children:e.jsxs("form",{onSubmit:D,className:"mb-4 flex gap-2",children:[e.jsx("input",{type:"text",value:f,onChange:a=>M(a.target.value),placeholder:"example.com",className:"flex-1 p-3 rounded-xl border dark:bg-gray-800 dark:text-white"}),e.jsx("button",{type:"submit",disabled:$,className:"bg-indigo-600 text-white px-4 rounded-xl font-bold disabled:opacity-50",children:e.jsx(H,{})})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative w-full aspect-[1.6/1] bg-slate-900 rounded-3xl overflow-hidden shadow-2xl group",children:[e.jsx("svg",{viewBox:"0 0 1000 500",className:"w-full h-full fill-slate-800 opacity-30",children:e.jsx("path",{d:"M250,80 L300,80 L320,120 L280,150 L300,250 L320,350 L280,420 L250,400 L240,300 L200,200 L150,150 L180,100 Z"})}),i==="lookup"&&r&&e.jsxs("div",{className:"absolute w-4 h-4 -translate-x-1/2 -translate-y-1/2",style:{left:`${I.x}%`,top:`${I.y}%`},children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-500 rounded-full animate-ping opacity-75"}),e.jsx("div",{className:"relative w-4 h-4 bg-indigo-600 border-2 border-white rounded-full shadow-lg"})]})]})})]}),e.jsxs("article",{className:"p-8 bg-white dark:bg-dark-lighter rounded-3xl border border-gray-100 dark:border-gray-700 prose dark:prose-invert max-w-none shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-black flex items-center gap-2 mb-6",children:[e.jsx(G,{className:"text-blue-500"}),"ã‚µãƒ¼ãƒãƒ¼ã®æ‰€åœ¨åœ°ã‚’ç¢ºèªã™ã‚‹æ„ç¾©"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 text-sm leading-relaxed text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(R,{size:18,className:"text-indigo-500"}),"ãƒ‡ãƒ¼ã‚¿ã®ç‰©ç†çš„ãªä½ç½®ã‚’å¯è¦–åŒ–"]}),e.jsx("p",{children:"ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã®ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚„IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ã€å¿…ãšä¸–ç•Œä¸­ã®ã©ã“ã‹ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼ã«å­˜åœ¨ã™ã‚‹ç‰©ç†ã‚µãƒ¼ãƒãƒ¼ã«ç´ä»˜ã„ã¦ã„ã¾ã™ã€‚å½“ãƒ„ãƒ¼ãƒ«ã§ã¯ã€æœ€æ–°ã®GeoIPãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆ©ç”¨ã—ã¦ã€ãã®ã‚µãƒ¼ãƒãƒ¼ãŒã©ã®å›½ã€ã©ã®éƒ½å¸‚ã«è¨­ç½®ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ãƒãƒƒãƒ—ä¸Šã«è¡¨ç¤ºã—ã¾ã™ã€‚"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(z,{size:18,className:"text-indigo-500"}),"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨é€Ÿåº¦ã®èª¿æŸ»ã«"]}),e.jsx("p",{children:"ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°è©æ¬ºã‚µã‚¤ãƒˆã®èª¿æŸ»ã‚„ã€æµ·å¤–ã‚µãƒ¼ãƒãƒ¼ã‚’çµŒç”±ã—ãŸã‚¢ã‚¯ã‚»ã‚¹ã®é…å»¶ï¼ˆãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼‰è§£æã«å½¹ç«‹ã¡ã¾ã™ã€‚ã¾ãŸã€ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆÎ²ç‰ˆï¼‰ã‚’ä½µç”¨ã™ã‚‹ã“ã¨ã§ã€ãŠä½¿ã„ã®ç«¯æœ«ã‹ã‚‰ç›®çš„åœ°ã¾ã§ã®é€šä¿¡çµŒè·¯ã‚’è¿½è·¡ã—ã€ã©ã®ä¸­ç¶™åœ°ç‚¹ã§é…å»¶ãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã‹ã‚’ç‰¹å®šã§ãã¾ã™ã€‚"})]})]})]})]})};export{X as default};
