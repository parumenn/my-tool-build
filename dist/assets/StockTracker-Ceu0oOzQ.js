import{c as Ie,R as P,r as k,j as e,X as ye}from"./index-hzlvpD8r.js";import{W as Me}from"./WorkspaceContext-DQ3VLZ_m.js";import{A as qe}from"./AdBanner-Ck4D786Q.js";import{T as pe}from"./trending-up-BrhznSRc.js";import{G as Fe}from"./globe-Dn_yDDjr.js";import{H as be}from"./history-T9djPBl0.js";import{b as fe,a as ze,C as Re}from"./chevron-left-B5_V1Lus.js";import{j as Be,e as ve,D as We,F as Ke,a0 as Ue,L as de,f as re,C as Ve,A as Ge,a as Q,d as He,b as ce,h as Xe,g as Ye,k as Ce,u as Je,G as Qe,l as ke,n as Ze,o as et,R as je,T as we,B as tt,p as rt}from"./generateCategoricalChart-L919Ihhf.js";import{X as ge,Y as xe}from"./YAxis-_JyLqeTu.js";import{C as Ne}from"./CartesianGrid-BR7B3CJs.js";import{D as at}from"./download-Creb4Xt2.js";import{T as nt}from"./trash-2-a_jvh2ZX.js";import{B as st}from"./BarChart-BllBuIKB.js";import{B as it}from"./briefcase-CvZHiNrc.js";import{P as ot}from"./plus-bPZV1d9t.js";import{R as lt}from"./refresh-cw-DX6ejzXj.js";import{C as dt}from"./chevron-right-4Tn741Ev.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=Ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var gt=["type","layout","connectNulls","ref"],xt=["key"];function Y(a){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Y(a)}function Se(a,n){if(a==null)return{};var s=ut(a,n),r,o;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);for(o=0;o<g.length;o++)r=g[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(a,r)&&(s[r]=a[r])}return s}function ut(a,n){if(a==null)return{};var s={};for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)){if(n.indexOf(r)>=0)continue;s[r]=a[r]}return s}function Z(){return Z=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},Z.apply(this,arguments)}function Ae(a,n){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),s.push.apply(s,r)}return s}function T(a){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Ae(Object(s),!0).forEach(function(r){_(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Ae(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function X(a){return pt(a)||yt(a)||mt(a)||ht()}function ht(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mt(a,n){if(a){if(typeof a=="string")return ue(a,n);var s=Object.prototype.toString.call(a).slice(8,-1);if(s==="Object"&&a.constructor&&(s=a.constructor.name),s==="Map"||s==="Set")return Array.from(a);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return ue(a,n)}}function yt(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function pt(a){if(Array.isArray(a))return ue(a)}function ue(a,n){(n==null||n>a.length)&&(n=a.length);for(var s=0,r=new Array(n);s<n;s++)r[s]=a[s];return r}function bt(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function De(a,n){for(var s=0;s<n.length;s++){var r=n[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,Pe(r.key),r)}}function ft(a,n,s){return n&&De(a.prototype,n),s&&De(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function vt(a,n,s){return n=ae(n),kt(a,Oe()?Reflect.construct(n,s||[],ae(a).constructor):n.apply(a,s))}function kt(a,n){if(n&&(Y(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jt(a)}function jt(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Oe(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oe=function(){return!!a})()}function ae(a){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},ae(a)}function wt(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),n&&he(a,n)}function he(a,n){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},he(a,n)}function _(a,n,s){return n=Pe(n),n in a?Object.defineProperty(a,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[n]=s,a}function Pe(a){var n=Nt(a,"string");return Y(n)=="symbol"?n:n+""}function Nt(a,n){if(Y(a)!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,n);if(Y(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var ee=function(a){function n(){var s;bt(this,n);for(var r=arguments.length,o=new Array(r),g=0;g<r;g++)o[g]=arguments[g];return s=vt(this,n,[].concat(o)),_(s,"state",{isAnimationFinished:!0,totalLength:0}),_(s,"generateSimpleStrokeDasharray",function(c,u){return"".concat(u,"px ").concat(c-u,"px")}),_(s,"getStrokeDasharray",function(c,u,y){var f=y.reduce(function(O,$){return O+$});if(!f)return s.generateSimpleStrokeDasharray(u,c);for(var S=Math.floor(c/f),j=c%f,p=u-c,w=[],m=0,l=0;m<y.length;l+=y[m],++m)if(l+y[m]>j){w=[].concat(X(y.slice(0,m)),[j-l]);break}var v=w.length%2===0?[0,p]:[p];return[].concat(X(n.repeat(y,S)),X(w),v).map(function(O){return"".concat(O,"px")}).join(", ")}),_(s,"id",Je("recharts-line-")),_(s,"pathRef",function(c){s.mainCurve=c}),_(s,"handleAnimationEnd",function(){s.setState({isAnimationFinished:!0}),s.props.onAnimationEnd&&s.props.onAnimationEnd()}),_(s,"handleAnimationStart",function(){s.setState({isAnimationFinished:!1}),s.props.onAnimationStart&&s.props.onAnimationStart()}),s}return wt(n,a),ft(n,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var g=this.props,c=g.points,u=g.xAxis,y=g.yAxis,f=g.layout,S=g.children,j=Ke(S,Ue);if(!j)return null;var p=function(l,v){return{x:l.x,y:l.y,value:l.value,errorVal:Ce(l.payload,v)}},w={clipPath:r?"url(#clipPath-".concat(o,")"):null};return P.createElement(de,w,j.map(function(m){return P.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:c,xAxis:u,yAxis:y,layout:f,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,o,g){var c=this.props.isAnimationActive;if(c&&!this.state.isAnimationFinished)return null;var u=this.props,y=u.dot,f=u.points,S=u.dataKey,j=re(this.props,!1),p=re(y,!0),w=f.map(function(l,v){var O=T(T(T({key:"dot-".concat(v),r:3},j),p),{},{index:v,cx:l.x,cy:l.y,value:l.value,dataKey:S,payload:l.payload,points:f});return n.renderDotItem(y,O)}),m={clipPath:r?"url(#clipPath-".concat(o?"":"dots-").concat(g,")"):null};return P.createElement(de,Z({className:"recharts-line-dots",key:"dots"},m),w)}},{key:"renderCurveStatically",value:function(r,o,g,c){var u=this.props,y=u.type,f=u.layout,S=u.connectNulls;u.ref;var j=Se(u,gt),p=T(T(T({},re(j,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:o?"url(#clipPath-".concat(g,")"):null,points:r},c),{},{type:y,layout:f,connectNulls:S});return P.createElement(Ve,Z({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,o){var g=this,c=this.props,u=c.points,y=c.strokeDasharray,f=c.isAnimationActive,S=c.animationBegin,j=c.animationDuration,p=c.animationEasing,w=c.animationId,m=c.animateNewValues,l=c.width,v=c.height,O=this.state,$=O.prevPoints,R=O.totalLength;return P.createElement(Ge,{begin:S,duration:j,isActive:f,easing:p,from:{t:0},to:{t:1},key:"line-".concat(w),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(I){var D=I.t;if($){var L=$.length/u.length,E=u.map(function(C,H){var B=Math.floor(H*L);if($[B]){var z=$[B],q=Q(z.x,C.x),ne=Q(z.y,C.y);return T(T({},C),{},{x:q(D),y:ne(D)})}if(m){var se=Q(l*2,C.x),ie=Q(v/2,C.y);return T(T({},C),{},{x:se(D),y:ie(D)})}return T(T({},C),{},{x:C.x,y:C.y})});return g.renderCurveStatically(E,r,o)}var V=Q(0,R),M=V(D),F;if(y){var G="".concat(y).split(/[,\s]+/gim).map(function(C){return parseFloat(C)});F=g.getStrokeDasharray(M,R,G)}else F=g.generateSimpleStrokeDasharray(R,M);return g.renderCurveStatically(u,r,o,{strokeDasharray:F})})}},{key:"renderCurve",value:function(r,o){var g=this.props,c=g.points,u=g.isAnimationActive,y=this.state,f=y.prevPoints,S=y.totalLength;return u&&c&&c.length&&(!f&&S>0||!He(f,c))?this.renderCurveWithAnimation(r,o):this.renderCurveStatically(c,r,o)}},{key:"render",value:function(){var r,o=this.props,g=o.hide,c=o.dot,u=o.points,y=o.className,f=o.xAxis,S=o.yAxis,j=o.top,p=o.left,w=o.width,m=o.height,l=o.isAnimationActive,v=o.id;if(g||!u||!u.length)return null;var O=this.state.isAnimationFinished,$=u.length===1,R=ve("recharts-line",y),I=f&&f.allowDataOverflow,D=S&&S.allowDataOverflow,L=I||D,E=ce(v)?this.id:v,V=(r=re(c,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},M=V.r,F=M===void 0?3:M,G=V.strokeWidth,C=G===void 0?2:G,H=Xe(c)?c:{},B=H.clipDot,z=B===void 0?!0:B,q=F*2+C;return P.createElement(de,{className:R},I||D?P.createElement("defs",null,P.createElement("clipPath",{id:"clipPath-".concat(E)},P.createElement("rect",{x:I?p:p-w/2,y:D?j:j-m/2,width:I?w:w*2,height:D?m:m*2})),!z&&P.createElement("clipPath",{id:"clipPath-dots-".concat(E)},P.createElement("rect",{x:p-q/2,y:j-q/2,width:w+q,height:m+q}))):null,!$&&this.renderCurve(L,E),this.renderErrorBar(L,E),($||c)&&this.renderDots(L,z,E),(!l||O)&&Ye.renderCallByParent(this.props,u))}}],[{key:"getDerivedStateFromProps",value:function(r,o){return r.animationId!==o.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:o.curPoints}:r.points!==o.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,o){for(var g=r.length%2!==0?[].concat(X(r),[0]):r,c=[],u=0;u<o;++u)c=[].concat(X(c),X(g));return c}},{key:"renderDotItem",value:function(r,o){var g;if(P.isValidElement(r))g=P.cloneElement(r,o);else if(Be(r))g=r(o);else{var c=o.key,u=Se(o,xt),y=ve("recharts-line-dot",typeof r!="boolean"?r.className:"");g=P.createElement(We,Z({key:c},u,{className:y}))}return g}}])}(k.PureComponent);_(ee,"displayName","Line");_(ee,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Qe.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});_(ee,"getComposedData",function(a){var n=a.props,s=a.xAxis,r=a.yAxis,o=a.xAxisTicks,g=a.yAxisTicks,c=a.dataKey,u=a.bandSize,y=a.displayedData,f=a.offset,S=n.layout,j=y.map(function(p,w){var m=Ce(p,c);return S==="horizontal"?{x:ke({axis:s,ticks:o,bandSize:u,entry:p,index:w}),y:ce(m)?null:r.scale(m),value:m,payload:p}:{x:ce(m)?null:s.scale(m),y:ke({axis:r,ticks:g,bandSize:u,entry:p,index:w}),value:m,payload:p}});return T({points:j,layout:S},f)});var St=Ze({chartName:"LineChart",GraphicalChild:ee,axisComponents:[{axisType:"xAxis",AxisComp:ge},{axisType:"yAxis",AxisComp:xe}],formatAxisMap:et});const At=["順張り","逆張り","材料/決算","デイトレ","スイング","長期/配当","優待","IPO","その他"],Dt=[{id:"calm",label:"冷静",color:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300"},{id:"excited",label:"興奮",color:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"},{id:"anxious",label:"不安",color:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300"},{id:"angry",label:"怒り",color:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"},{id:"fear",label:"恐怖",color:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}],Ct=({symbol:a})=>{const n=k.useRef(null);return k.useEffect(()=>{if(!n.current)return;n.current.innerHTML="";const s=document.createElement("div");s.className="tradingview-widget-container__widget",s.style.height="100%",s.style.width="100%",n.current.appendChild(s);const r=document.createElement("script");r.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",r.type="text/javascript",r.async=!0,r.innerHTML=JSON.stringify({autosize:!0,symbol:a,interval:"D",timezone:"Asia/Tokyo",theme:document.documentElement.classList.contains("dark")?"dark":"light",style:"1",locale:"ja",enable_publishing:!1,allow_symbol_change:!0,calendar:!1,support_host:"https://www.tradingview.com"}),n.current.appendChild(r)},[a]),e.jsx("div",{className:"tradingview-widget-container h-full w-full rounded-2xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-900",ref:n,style:{height:"100%"}})},Vt=()=>{const a=k.useContext(Me),[n,s]=k.useState("dashboard"),[r,o]=k.useState([]),[g,c]=k.useState(1e6),[u,y]=k.useState(!1),[f,S]=k.useState("TSE:7203"),[j,p]=k.useState(!1),[w,m]=k.useState(!1),[l,v]=k.useState({date:new Date().toISOString().split("T")[0],type:"sell",emotion:"calm",strategy:"順張り",quantity:100,pnl:0});k.useEffect(()=>{const t=localStorage.getItem("stock_trades"),d=localStorage.getItem("stock_initial_asset");if(t)try{const i=JSON.parse(t);if(Array.isArray(i)){const x=i.map(b=>({...b,price:Number(b.price)||0,quantity:Number(b.quantity)||0,pnl:Number(b.pnl)||0,date:b.date||new Date().toISOString().split("T")[0]}));o(x)}else o([])}catch(i){console.error("Failed to parse trades",i),o([])}else o([{id:"1",date:"2023-10-01",ticker:"7203",name:"トヨタ",type:"buy",price:2e3,quantity:100,pnl:0,comment:"エントリー",strategy:"順張り",emotion:"calm"},{id:"2",date:"2023-10-05",ticker:"7203",name:"トヨタ",type:"sell",price:2150,quantity:100,pnl:15e3,comment:"利確",strategy:"順張り",emotion:"excited"}]);d&&!isNaN(Number(d))&&c(Number(d)),y(!0)},[]),k.useEffect(()=>{u&&localStorage.setItem("stock_trades",JSON.stringify(r))},[r,u]),k.useEffect(()=>{u&&localStorage.setItem("stock_initial_asset",g.toString())},[g,u]);const O=new Date().toISOString().slice(0,7),$=r.reduce((t,d)=>t+(Number(d.pnl)||0),0),R=g+$,I=k.useMemo(()=>r.filter(t=>t.date&&t.date.startsWith(O)).reduce((t,d)=>t+(Number(d.pnl)||0),0),[r,O]),D=r.filter(t=>t.type==="sell"&&t.pnl!==0),L=D.filter(t=>t.pnl>0),E=D.filter(t=>t.pnl<0),V=D.length>0?L.length/D.length*100:0,M=L.reduce((t,d)=>t+d.pnl,0),F=Math.abs(E.reduce((t,d)=>t+d.pnl,0)),G=F===0?M>0?99.99:0:M/F,C=L.length>0?M/L.length:0,H=k.useMemo(()=>{const t=new Map,d=[...r].sort((i,x)=>new Date(i.date).getTime()-new Date(x.date).getTime());for(const i of d){if(!i.ticker)continue;const x=t.get(i.ticker)||{name:i.name||i.ticker,quantity:0,totalCost:0};if(i.type==="buy")x.quantity+=i.quantity,x.totalCost+=i.price*i.quantity;else if(i.type==="sell"){const b=x.quantity>0?x.totalCost/x.quantity:0;x.quantity-=i.quantity,x.totalCost-=b*i.quantity}x.quantity<1e-4?t.delete(i.ticker):t.set(i.ticker,x)}return Array.from(t.entries()).map(([i,x])=>({...x,ticker:i,avgPrice:x.quantity>0?x.totalCost/x.quantity:0}))},[r]),B=k.useMemo(()=>{const t=[...r].sort((h,N)=>new Date(h.date).getTime()-new Date(N.date).getTime()),d=new Map,i=new Date().toISOString().split("T")[0];let x=g;if(t.length===0)d.set(i,g);else{const h=t[0].date;if(h){const N=new Date(h);isNaN(N.getTime())||(N.setDate(N.getDate()-1),d.set(N.toISOString().split("T")[0],g))}}for(const h of t)h.date&&(x+=Number(h.pnl)||0,d.set(h.date,x));const b=Array.from(d.entries()).sort((h,N)=>new Date(h[0]).getTime()-new Date(N[0]).getTime()).map(([h,N])=>({date:h,asset:N})).filter(h=>!isNaN(h.asset));return b.length>0?b:[{date:i,asset:g}]},[r,g]),z=k.useMemo(()=>{const t={};r.forEach(i=>{if(!i.date)return;const x=i.date.slice(0,7);t[x]=(t[x]||0)+(Number(i.pnl)||0)});const d=Object.entries(t).sort().map(([i,x])=>({date:i,pnl:x}));return d.length>0?d:[{date:O,pnl:0}]},[r]),q=k.useMemo(()=>{const t={};return r.forEach(d=>{const i=d.strategy||"その他";t[i]=(t[i]||0)+(Number(d.pnl)||0)}),Object.entries(t).sort((d,i)=>i[1]-d[1]).map(([d,i])=>({name:d,value:i}))},[r]),ne=()=>{const t=`ID,日付,銘柄コード,銘柄名,売買区分,価格,株数,損益,戦略,感情,コメント
`,d=r.map(h=>`"${h.id}","${h.date}","${h.ticker}","${h.name}","${h.type}",${h.price},${h.quantity},${h.pnl},"${h.strategy}","${h.emotion}","${h.comment}"`).join(`
`),i=new Blob([new Uint8Array([239,187,191]),t+d],{type:"text/csv;charset=utf-8;"}),x=URL.createObjectURL(i),b=document.createElement("a");b.href=x,b.download=`trade_history_${new Date().toISOString().split("T")[0]}.csv`,b.click(),URL.revokeObjectURL(x)},se=()=>{confirm("全ての取引データを削除しますか？この操作は取り消せません。")&&(o([]),c(1e6),alert("データを初期化しました。"))},ie=()=>{if(!l.date){alert("日付は必須です");return}const t={id:Date.now().toString(),date:l.date,ticker:l.ticker||"",name:l.name||l.ticker||"取引",type:l.type||"sell",price:Number(l.price)||0,quantity:Number(l.quantity)||0,pnl:Number(l.pnl)||0,comment:l.comment||"",strategy:l.strategy||"その他",emotion:l.emotion||"calm"};o(d=>[...d,t]),p(!1),v({date:new Date().toISOString().split("T")[0],type:"sell",emotion:"calm",strategy:"順張り",quantity:100,pnl:0,name:"",ticker:"",comment:"",price:0})},Te=t=>{confirm("この記録を削除しますか？")&&o(r.filter(d=>d.id!==t))},te=({title:t,value:d,sub:i,colorClass:x})=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase",children:t}),e.jsx("div",{className:`text-2xl font-black mt-1 ${x||"text-gray-800 dark:text-white"}`,children:d}),i&&e.jsx("span",{className:"text-[10px] text-gray-400 mt-1",children:i})]}),$e=()=>{const t=new Date,d=[];for(let i=89;i>=0;i--){const x=new Date;x.setDate(t.getDate()-i),d.push(x.toISOString().split("T")[0])}return e.jsx("div",{className:"flex flex-wrap gap-1",children:d.map(i=>{const b=r.filter(N=>N.date===i&&N.pnl!==0).reduce((N,oe)=>N+oe.pnl,0);let h="bg-gray-100 dark:bg-gray-700";return b>5e4?h="bg-red-500":b>1e4?h="bg-red-400":b>0?h="bg-red-300":b<-5e4?h="bg-emerald-600":b<-1e4?h="bg-emerald-500":b<0&&(h="bg-emerald-400"),e.jsx("div",{className:`w-3 h-3 rounded-sm ${h}`,title:`${i}: ${b.toLocaleString()}円`},i)})})},Le=()=>{const[t,d]=k.useState(new Date),i=t.getFullYear(),x=t.getMonth(),b=new Date(i,x,1).getDay(),h=new Date(i,x+1,0).getDate(),N=[];for(let A=0;A<b;A++)N.push(null);for(let A=1;A<=h;A++)N.push(A);const oe=`${i}-${String(x+1).padStart(2,"0")}`,le=r.filter(A=>A.date&&A.date.startsWith(oe)).reduce((A,W)=>A+Number(W.pnl),0);return e.jsxs("div",{className:"animate-fade-in bg-white dark:bg-gray-800 p-4 md:p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg md:text-xl text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(fe,{className:"text-indigo-500"}),i,"年",x+1,"月",e.jsxs("span",{className:`text-sm ml-2 font-mono ${le>=0?"text-red-500":"text-emerald-500"}`,children:["(",le>0?"+":"",le.toLocaleString(),")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(new Date(i,x-1,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:e.jsx(Re,{size:20})}),e.jsx("button",{onClick:()=>d(new Date),className:"text-xs font-bold px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:"今月"}),e.jsx("button",{onClick:()=>d(new Date(i,x+1,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:e.jsx(dt,{size:20})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:[["日","月","火","水","木","金","土"].map((A,W)=>e.jsx("div",{className:`text-center text-xs font-bold py-2 ${W===0?"text-red-400":W===6?"text-blue-400":"text-gray-400"}`,children:A},A)),N.map((A,W)=>{if(!A)return e.jsx("div",{className:"h-16 md:h-24 bg-transparent"},W);const me=`${i}-${String(x+1).padStart(2,"0")}-${String(A).padStart(2,"0")}`,J=r.filter(U=>U.date===me),K=J.reduce((U,Ee)=>U+Ee.pnl,0),_e=new Date().toISOString().slice(0,10)===me;return e.jsxs("div",{className:`h-16 md:h-24 p-1 md:p-2 border rounded-xl flex flex-col justify-between transition-all hover:shadow-md ${J.length>0?"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600":"bg-transparent border-transparent"} ${_e?"ring-2 ring-indigo-500":""}`,children:[e.jsx("span",{className:"text-[10px] md:text-xs font-bold text-gray-500 dark:text-gray-400",children:A}),J.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-right font-black text-[10px] md:text-sm ${K>0?"text-red-500":K<0?"text-emerald-500":"text-gray-400"}`,children:K!==0&&(K>0?"+":"")+(Math.abs(K)>=1e6?(K/1e4).toFixed(0)+"万":K.toLocaleString())}),e.jsxs("div",{className:"flex justify-end gap-0.5 md:gap-1 mt-1",children:[J.some(U=>U.type==="buy")&&e.jsx("div",{className:"w-1 md:w-1.5 h-1 md:h-1.5 rounded-full bg-blue-400"}),J.some(U=>U.type==="sell")&&e.jsx("div",{className:"w-1 md:w-1.5 h-1 md:h-1.5 rounded-full bg-red-400"})]})]})]},W)})]})]})};return e.jsxs("div",{className:`mx-auto h-full flex flex-col ${a?"w-full p-2":"max-w-6xl space-y-6 pb-20"}`,children:[!a&&e.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(pe,{className:"text-indigo-500"})," 株トレード記録"]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>m(!0),className:"p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:"設定"})})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl overflow-x-auto no-scrollbar shrink-0",children:[{id:"dashboard",icon:ct,label:"ホーム"},{id:"market",icon:Fe,label:"マーケット"},{id:"history",icon:be,label:"履歴"},{id:"calendar",icon:fe,label:"カレンダー"},{id:"analytics",icon:ze,label:"分析"}].map(t=>e.jsxs("button",{onClick:()=>s(t.id),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-xs sm:text-sm font-bold transition-all whitespace-nowrap ${n===t.id?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[e.jsx(t.icon,{size:16}),t.label]},t.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:[n==="dashboard"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(te,{title:"総資産評価額",value:`¥${R.toLocaleString()}`,colorClass:"text-indigo-600 dark:text-indigo-400"}),e.jsx(te,{title:"今月の損益",value:`¥${(I||0).toLocaleString()}`,colorClass:(I||0)>=0?"text-red-500":"text-emerald-500"}),e.jsx(te,{title:"勝率",value:`${V.toFixed(1)}%`,sub:`${L.length}勝 ${E.length}敗`}),e.jsx(te,{title:"PF / リスクリワード",value:G.toFixed(2),sub:`Avg Win: ¥${Math.round(C).toLocaleString()}`})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(pe,{size:18})," 資産推移"]}),e.jsx(je,{width:"100%",height:"100%",children:e.jsxs(St,{data:B,children:[e.jsx(Ne,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),e.jsx(ge,{dataKey:"date",tick:{fontSize:10},tickFormatter:t=>typeof t=="string"&&t.length>=5?t.slice(5):"",stroke:"#9ca3af"}),e.jsx(xe,{tick:{fontSize:10},tickFormatter:t=>`${t/1e4}万`,width:40,domain:["auto","auto"],stroke:"#9ca3af"}),e.jsx(we,{formatter:t=>`¥${t.toLocaleString()}`,contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",backgroundColor:"rgba(255,255,255,0.9)",color:"#333"}}),e.jsx(ee,{type:"monotone",dataKey:"asset",stroke:"#4f46e5",strokeWidth:3,dot:!1,activeDot:{r:6}})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(be,{size:18})," アクティビティ"]}),e.jsx("div",{className:"mb-4",children:e.jsx($e,{})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase",children:"直近の取引"}),r.slice(-5).reverse().map(t=>e.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-gray-100 dark:border-gray-700 pb-2 last:border-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded mr-2 ${t.type==="buy"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:t.type==="buy"?"買":t.type==="sell"?"売":t.type}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:t.name})]}),e.jsx("div",{className:`font-bold ${t.pnl>0?"text-red-500":t.pnl<0?"text-emerald-500":"text-gray-400"}`,children:t.pnl!==0?(t.pnl>0?"+":"")+t.pnl.toLocaleString():"-"})]},t.id))]})]})]})]}),n==="market"&&e.jsx("div",{className:"flex flex-col h-full animate-fade-in space-y-4",children:e.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-3xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 relative",children:e.jsx(Ct,{symbol:f},f)})}),n==="history"&&e.jsxs("div",{className:"animate-fade-in bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300",children:"取引履歴一覧"}),e.jsxs("button",{onClick:ne,className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs font-bold text-gray-600 dark:text-gray-300 transition-colors",children:[e.jsx(at,{size:14})," CSV出力"]})]}),e.jsx("div",{className:"overflow-x-auto flex-1",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-500 dark:text-gray-400 font-bold sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 whitespace-nowrap",children:"日付"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"銘柄"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"売買"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"価格(円)"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"株数"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"損益"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"戦略/感情"}),e.jsx("th",{className:"p-4 w-10"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[[...r].sort((t,d)=>new Date(d.date).getTime()-new Date(t.date).getTime()).map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[e.jsx("td",{className:"p-4 font-mono text-gray-600 dark:text-gray-400",children:t.date}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold text-gray-800 dark:text-white",children:t.name}),e.jsx("div",{className:"text-xs text-gray-400 font-mono",children:t.ticker})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${t.type==="buy"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":t.type==="sell"?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-gray-100 text-gray-600"}`,children:t.type==="buy"?"買付":t.type==="sell"?"売却":t.type})}),e.jsx("td",{className:"p-4 text-right font-mono text-gray-700 dark:text-gray-300",children:t.price.toLocaleString()}),e.jsx("td",{className:"p-4 text-right font-mono text-gray-700 dark:text-gray-300",children:t.quantity.toLocaleString()}),e.jsx("td",{className:`p-4 text-right font-mono font-bold ${t.pnl>0?"text-red-500":t.pnl<0?"text-emerald-500":"text-gray-400"}`,children:t.pnl!==0?(t.pnl>0?"+":"")+t.pnl.toLocaleString():"-"}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 px-2 py-0.5 rounded w-fit",children:t.strategy}),t.emotion&&e.jsx("span",{className:"text-[10px] text-gray-400",children:t.emotion})]})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>Te(t.id),className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(nt,{size:16})})})]},t.id)),r.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"p-8 text-center text-gray-400",children:"取引データがありません"})})]})]})})]}),n==="calendar"&&e.jsx(Le,{}),n==="analytics"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4",children:"月別損益推移"}),e.jsx(je,{width:"100%",height:"100%",children:e.jsxs(st,{data:z,children:[e.jsx(Ne,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),e.jsx(ge,{dataKey:"date",tick:{fontSize:10},tickFormatter:t=>typeof t=="string"&&t.length>=5?t.slice(5):"",stroke:"#9ca3af"}),e.jsx(xe,{tickFormatter:t=>`${t/1e4}万`,width:40,stroke:"#9ca3af"}),e.jsx(we,{formatter:t=>`¥${t.toLocaleString()}`,cursor:{fill:"transparent"},contentStyle:{backgroundColor:"rgba(255,255,255,0.9)",borderRadius:"8px",color:"#333"}}),e.jsx(tt,{dataKey:"pnl",children:z.map((t,d)=>e.jsx(rt,{fill:t.pnl>=0?"#ef4444":"#10b981"},`cell-${d}`))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4",children:"戦略別パフォーマンス"}),e.jsx("div",{className:"h-full overflow-y-auto no-scrollbar pb-6",children:q.length>0?e.jsx("div",{className:"space-y-3",children:q.map((t,d)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 text-xs font-bold text-gray-600 dark:text-gray-400 truncate",children:t.name}),e.jsx("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden flex",children:t.value>0?e.jsx("div",{className:"h-full bg-red-500",style:{width:`${Math.min(Math.abs(t.value)/5e4*100,100)}%`}}):e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${Math.min(Math.abs(t.value)/5e4*100,100)}%`}})}),e.jsxs("div",{className:`w-20 text-right text-xs font-bold ${t.value>=0?"text-red-500":"text-emerald-500"}`,children:[t.value>0?"+":"",t.value.toLocaleString()]})]},d))}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-sm",children:"データがありません"})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(it,{size:18})," 現在の保有銘柄 (履歴から推定)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-500 dark:text-gray-400 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"銘柄"}),e.jsx("th",{className:"p-3 text-right",children:"保有数"}),e.jsx("th",{className:"p-3 text-right",children:"平均取得単価"}),e.jsx("th",{className:"p-3 text-right",children:"推定投資額"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:H.length>0?H.map((t,d)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30",children:[e.jsxs("td",{className:"p-3 font-medium text-gray-800 dark:text-gray-200",children:[t.name," ",e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:t.ticker})]}),e.jsx("td",{className:"p-3 text-right font-mono text-gray-700 dark:text-gray-300",children:t.quantity.toLocaleString()}),e.jsxs("td",{className:"p-3 text-right font-mono text-gray-700 dark:text-gray-300",children:["¥",Math.round(t.avgPrice).toLocaleString()]}),e.jsxs("td",{className:"p-3 text-right font-mono font-bold text-gray-800 dark:text-white",children:["¥",Math.round(t.avgPrice*t.quantity).toLocaleString()]})]},d)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-6 text-center text-gray-400",children:"保有なし"})})})]})})]})]})]}),e.jsx("button",{onClick:()=>p(!0),className:`${a?"absolute bottom-4 right-4 p-3 shadow-lg":"fixed bottom-8 right-8 p-5 shadow-2xl"} bg-indigo-600 text-white rounded-full hover:bg-indigo-700 hover:scale-105 transition-all z-20 flex items-center justify-center active:scale-95`,children:e.jsx(ot,{size:a?20:32})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl w-full max-w-sm shadow-2xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:"設定"}),e.jsx("button",{onClick:()=>m(!1),children:e.jsx(ye,{className:"text-gray-400"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2",children:"初期資産 (円)"}),e.jsx("input",{type:"number",value:g,onChange:t=>c(Number(t.target.value)),className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:"※ここに入力した金額をスタート地点として損益を加算します。"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("button",{onClick:se,className:"w-full py-2 text-red-500 text-xs font-bold hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(lt,{size:14})," 全データを初期化"]})}),e.jsx("button",{onClick:()=>m(!1),className:"w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors",children:"完了"})]})]})}),j&&e.jsx("div",{className:`z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in ${a?"absolute inset-0":"fixed inset-0 bg-black/60"}`,children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md p-6 shadow-2xl border border-gray-100 dark:border-gray-700 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-gray-800 dark:text-white",children:"取引を記録"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ye,{})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 p-1 rounded-xl",children:["buy","sell","deposit","withdraw"].map(t=>e.jsx("button",{onClick:()=>v({...l,type:t}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${l.type===t?t==="buy"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow":t==="sell"?"bg-white dark:bg-gray-600 text-red-600 dark:text-red-400 shadow":"bg-white dark:bg-gray-600 text-gray-800 dark:text-white shadow":"text-gray-500 dark:text-gray-400"}`,children:t==="buy"?"買付":t==="sell"?"売却":t==="deposit"?"入金":"出金"},t))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"日付"}),e.jsx("input",{type:"date",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",value:l.date,onChange:t=>v({...l,date:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"銘柄コード"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"7203",value:l.ticker,onChange:t=>v({...l,ticker:t.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"銘柄名 / 項目名"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"トヨタ自動車",value:l.name,onChange:t=>v({...l,name:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"約定価格"}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500 outline-none",value:l.price,onChange:t=>v({...l,price:Number(t.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"株数"}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500 outline-none",value:l.quantity,onChange:t=>v({...l,quantity:Number(t.target.value)})})]})]}),l.type==="sell"&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"確定損益 (円)"}),e.jsx("input",{type:"number",className:`w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 font-mono text-xl font-black focus:ring-2 focus:ring-indigo-500 outline-none ${Number(l.pnl)>=0?"text-red-500":"text-emerald-500"}`,placeholder:"例: 10000 or -5000",value:l.pnl,onChange:t=>v({...l,pnl:Number(t.target.value)})}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1 text-right",children:"※マイナスの場合は「-」をつけてください"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"戦略・タグ"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:At.map(t=>e.jsx("button",{type:"button",onClick:()=>v({...l,strategy:t}),className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${l.strategy===t?"bg-indigo-100 dark:bg-indigo-900/50 border-indigo-500 text-indigo-700 dark:text-indigo-300":"border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"感情コンディション"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:Dt.map(t=>e.jsx("button",{type:"button",onClick:()=>v({...l,emotion:t.id}),className:`flex-1 min-w-[60px] py-1.5 rounded text-xs font-bold transition-all ${l.emotion===t.id?t.color+" shadow-sm ring-1 ring-inset ring-current":"bg-gray-100 dark:bg-gray-700 text-gray-400"}`,children:t.label},t.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"メモ"}),e.jsx("textarea",{className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm h-20 resize-none focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"エントリー根拠や反省点...",value:l.comment,onChange:t=>v({...l,comment:t.target.value})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 py-3 text-gray-500 dark:text-gray-400 text-sm font-bold hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"キャンセル"}),e.jsx("button",{onClick:ie,className:"flex-1 py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 shadow-xl shadow-indigo-200 dark:shadow-none transition-colors",children:"保存する"})]})]})}),!a&&e.jsx(qe,{})]})};export{Vt as default};
