import{c as E,u as G,r as a,j as e,Z as b,a as Z,X as q}from"./index-C1DxQZT-.js";import{A as T}from"./AdBanner-BT6egeIP.js";import{L as y}from"./layers-aeOFKf43.js";import{P as J}from"./plus-q6vrPCyG.js";import{E as i,S as X}from"./settings-Oa7D8gnG.js";import{A as F}from"./arrow-right-dy0mfiy-.js";import{C as _}from"./check-CIZekDDF.js";import{C as K}from"./copy-C2os3i-P.js";import{T as Q,a as V}from"./toggle-right-DM6hAhuf.js";import{T as A}from"./triangle-alert-CZqvRLyi.js";import{I as W}from"./info-B_7hK1vr.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=E("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=E("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),ge=()=>{const[P,H]=G(),d=P.get("id"),[x,p]=a.useState(""),[u,f]=a.useState(""),[o,j]=a.useState(""),[k,N]=a.useState(!1),[I,w]=a.useState(!1),[l,v]=a.useState(!1),[r,g]=a.useState(null),[O,m]=a.useState(!1),[C,z]=a.useState(""),[S,c]=a.useState(!1),[L,n]=a.useState(!1);a.useEffect(()=>{d?(m(!0),c(!1),fetch(`./backend/url_bundler_api.php?action=get&id=${d}`).then(async t=>{if(!t.ok)throw new Error("データが見つかりません");return t.json()}).then(t=>{g(t),m(!1)}).catch(t=>{z(t.message),m(!1)})):(g(null),z(""),c(!1))},[d]);const U=(t=!1)=>{r&&r.urls.forEach(s=>{window.open(s,"_blank")})};a.useEffect(()=>{if(r&&r.auto_redirect&&!S){c(!0);const t=setTimeout(()=>{U(!0)},500);return()=>clearTimeout(t)}},[r,S]);const $=async()=>{const t=x.split(/\r?\n/).filter(s=>s.trim().length>0);if(t.length===0){alert("URLを入力してください");return}N(!0);try{const s=await fetch("./backend/url_bundler_api.php?action=save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:t,title:u||"URLまとめ",auto_redirect:l})});if(!s.ok)throw new Error("保存に失敗しました");const D=await s.json(),B=`${window.location.origin}${window.location.pathname}#/bundle?id=${D.id}`;j(B)}catch{alert("エラーが発生しました。通信環境を確認してください。")}finally{N(!1)}},M=()=>{navigator.clipboard.writeText(o),w(!0),setTimeout(()=>w(!1),2e3)},h=()=>{H({}),p(""),f(""),j(""),g(null),v(!1),c(!1)},R=()=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>n(!1),children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-lg shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(A,{className:"text-orange-500",size:20}),"ポップアップ設定について"]}),e.jsx("button",{onClick:()=>n(!1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-800",children:e.jsx(q,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-bold leading-relaxed",children:"自動リダイレクト機能や一括オープン機能を使うには、ブラウザのポップアップブロック設定でこのサイトを許可する必要があります。"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-3 font-bold",children:"Google Chromeの場合:"}),e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsxs("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-full border border-gray-300 dark:border-gray-600 h-10 flex items-center px-3 gap-2 relative",children:[e.jsx(X,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 truncate",children:"https://parumenn.server-on.net/..."}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-6 h-6 bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 cursor-pointer flex items-center justify-center border border-gray-300 dark:border-gray-600",children:[e.jsx(i,{size:14,className:"text-red-500"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full border border-white"})]}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-gray-800 shadow-xl rounded-lg border border-gray-200 dark:border-gray-700 p-3 z-10 text-[10px] text-left leading-tight",children:[e.jsx("p",{className:"font-bold text-gray-800 dark:text-white mb-1",children:"ポップアップがブロックされました"}),e.jsx("p",{className:"text-blue-500 underline cursor-pointer",children:"常に許可する"})]})]})})]})}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed",children:["アドレスバーの右側（または左側の設定アイコン）に表示される ",e.jsx("span",{className:"inline-block align-middle",children:e.jsx(i,{size:12,className:"text-red-500 inline"})})," アイコンをクリックし、",e.jsxs("span",{className:"font-bold text-gray-800 dark:text-white",children:["「",window.location.hostname," のポップアップとリダイレクトを常に許可する」"]}),"を選択してください。"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>n(!1),className:"bg-cyan-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-cyan-700 transition-colors",children:"閉じる"})})]})]})});return d?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 pb-20 relative",children:[L&&e.jsx(R,{}),e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl p-8 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(y,{className:"text-cyan-500"})," URLまとめ"]}),e.jsxs("button",{onClick:h,className:"text-xs bg-gray-100 dark:bg-gray-800 px-3 py-2 rounded-lg font-bold flex items-center gap-1 hover:bg-gray-200 transition-colors",children:[e.jsx(J,{size:14})," 新規作成"]})]}),O&&e.jsx("div",{className:"py-20 text-center text-gray-400 font-bold animate-pulse",children:"読み込み中..."}),C&&e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("p",{className:"text-red-500 font-bold mb-4",children:C}),e.jsx("button",{onClick:h,className:"bg-cyan-600 text-white px-6 py-2 rounded-xl font-bold",children:"トップに戻る"})]}),r&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-black text-gray-800 dark:text-white mb-2",children:r.title}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-400 font-mono",children:[e.jsxs("span",{children:["作成日: ",new Date(r.created_at*1e3).toLocaleDateString()]}),r.auto_redirect&&e.jsxs("span",{className:"flex items-center gap-1 text-cyan-600 font-bold",children:[e.jsx(b,{size:12})," 自動リダイレクト有効"]})]})]}),e.jsxs("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 p-6 rounded-2xl border border-cyan-100 dark:border-cyan-800 text-center relative overflow-hidden",children:[r.auto_redirect&&e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-cyan-500 animate-pulse"}),e.jsxs("p",{className:"text-cyan-800 dark:text-cyan-200 font-bold mb-4",children:[r.urls.length,"件のリンクが保存されています"]}),e.jsxs("button",{onClick:()=>U(!1),className:"w-full sm:w-auto px-8 py-3 bg-cyan-600 text-white font-black rounded-xl shadow-lg hover:bg-cyan-700 hover:shadow-xl transition-all flex items-center justify-center gap-2 mx-auto",children:[e.jsx(i,{size:20})," すべて新しいタブで開く"]}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[e.jsx("p",{className:"text-[10px] text-cyan-600/70 dark:text-cyan-400/70",children:"開かない場合はポップアップ設定を確認してください"}),e.jsx("button",{onClick:()=>n(!0),className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-800 dark:hover:text-cyan-200",children:e.jsx(Y,{size:14})})]})]}),e.jsx("div",{className:"space-y-2",children:r.urls.map((t,s)=>e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 hover:border-cyan-300 dark:hover:border-cyan-600 transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white dark:bg-gray-700 p-2 rounded-lg text-gray-400 group-hover:text-cyan-500 transition-colors",children:e.jsx(ee,{size:16})}),e.jsx("span",{className:"font-mono text-sm text-gray-600 dark:text-gray-300 truncate flex-1",children:t}),e.jsx(F,{size:16,className:"text-gray-300 group-hover:text-cyan-500"})]})},s))})]})]}),e.jsx(T,{})]}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 pb-20 relative",children:[L&&e.jsx(R,{}),e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl p-8 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(y,{className:"text-cyan-500"})," URLまとめ作成"]}),o?e.jsxs("div",{className:"animate-fade-in bg-cyan-50 dark:bg-cyan-900/20 p-8 rounded-3xl border-2 border-cyan-100 dark:border-cyan-800 text-center",children:[e.jsx("div",{className:"bg-white dark:bg-cyan-800 p-4 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6 shadow-sm",children:e.jsx(_,{size:40,className:"text-cyan-500 dark:text-cyan-200"})}),e.jsx("h3",{className:"text-2xl font-black text-cyan-800 dark:text-cyan-200 mb-2",children:"まとめURLを発行しました"}),e.jsx("p",{className:"text-cyan-600 dark:text-cyan-400 text-sm mb-4 font-bold",children:"このURLの有効期限は作成から1年間です"}),l&&e.jsxs("p",{className:"text-xs text-orange-500 font-bold mb-6 flex items-center justify-center gap-1",children:[e.jsx(b,{size:12})," 自動リダイレクトモード有効"]}),e.jsxs("div",{className:"flex gap-2 max-w-lg mx-auto mb-8",children:[e.jsx("input",{type:"text",readOnly:!0,value:o,className:"flex-1 p-4 rounded-xl border-2 border-cyan-200 dark:border-cyan-700 bg-white dark:bg-gray-900 text-cyan-800 dark:text-cyan-200 font-bold text-sm truncate focus:outline-none"}),e.jsx("button",{onClick:M,className:"bg-cyan-600 text-white px-6 rounded-xl font-bold hover:bg-cyan-700 transition-colors shadow-lg shadow-cyan-200 dark:shadow-none shrink-0 flex items-center gap-2",children:I?e.jsx(_,{size:20}):e.jsx(K,{size:20})})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 font-bold hover:underline flex items-center gap-1",children:[e.jsx(i,{size:16})," ページを確認する"]}),e.jsx("span",{className:"text-cyan-300",children:"|"}),e.jsx("button",{onClick:h,className:"text-gray-500 dark:text-gray-400 font-bold hover:text-gray-700 dark:hover:text-gray-200",children:"新しく作成する"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"タイトル (任意)"}),e.jsx("input",{type:"text",value:u,onChange:t=>f(t.target.value),placeholder:"例: 参考資料まとめ",className:"w-full p-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"URLリスト (1行に1つ)"}),e.jsx("textarea",{value:x,onChange:t=>p(t.target.value),placeholder:`https://google.com\r
https://example.com`,className:"w-full h-64 p-4 rounded-xl border-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:border-cyan-500 transition-colors resize-none font-mono text-sm leading-relaxed"})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>v(!l),className:`text-cyan-600 transition-colors ${l?"text-cyan-600":"text-gray-400"}`,children:l?e.jsx(Q,{size:32}):e.jsx(V,{size:32})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-bold text-sm ${l?"text-gray-800 dark:text-white":"text-gray-500"}`,children:"自動リダイレクトモード"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"URLを開いた瞬間にすべてのリンクを展開します"})]})]}),l&&e.jsxs("button",{onClick:()=>n(!0),className:"text-xs text-orange-500 font-bold flex items-center gap-1 underline",children:[e.jsx(A,{size:14})," 設定が必要です（詳細）"]})]})}),e.jsxs("button",{onClick:$,disabled:k||!x.trim(),className:"w-full py-4 bg-cyan-600 text-white font-black rounded-xl shadow-xl hover:bg-cyan-700 hover:shadow-2xl hover:-translate-y-1 transition-all disabled:opacity-50 disabled:transform-none disabled:shadow-none flex items-center justify-center gap-2",title:"有効期限: 1年",children:[k?"作成中...":"まとめURLを発行する (1年間有効)"," ",e.jsx(y,{size:20})]})]})]}),e.jsxs("article",{className:"p-8 bg-white dark:bg-dark-lighter rounded-3xl border border-gray-100 dark:border-gray-700 prose dark:prose-invert max-w-none shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-black flex items-center gap-2 mb-6",children:[e.jsx(W,{className:"text-blue-500"}),"URLまとめツールの活用法"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 text-sm leading-relaxed text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(b,{size:18,className:"text-cyan-500"}),"複数のリンクを1つに"]}),e.jsx("p",{children:"SNSやメールで複数の参考資料を送りたいとき、URLを羅列すると見づらくなってしまいます。このツールを使えば、それらを1つの短縮URLのようなページにまとめることができます。「一括で開く」機能も備えているため、受け取った側の利便性も向上します。"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(Z,{size:18,className:"text-cyan-500"}),"登録不要・シンプル機能"]}),e.jsx("p",{children:"ユーザー登録は不要で、誰でもすぐに利用できます。発行されたURLにアクセスすると、保存されたリンク一覧が表示されるシンプルな設計です。日常のブックマーク整理や、一時的な情報共有に最適です。"})]})]})]}),e.jsx(T,{})]})};export{ge as default};
