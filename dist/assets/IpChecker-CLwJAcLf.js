import{j as e}from"./index-D4reVrDU.js";import{r as l}from"./vendor-react-Dy8mW7IA.js";import{A as h}from"./AdBanner-DUdjXfK6.js";import{af as m,J as k,C as i,O as x,I as p,G as b,Z as y}from"./vendor-ui-gkh9ij8_.js";import"./vendor-utils-V9s-2EHj.js";const v=()=>{const[d,c]=l.useState("Loading..."),[s,n]=l.useState("80"),[t,a]=l.useState("idle");l.useEffect(()=>{fetch("https://api.ipify.org?format=json").then(r=>r.json()).then(r=>c(r.ip)).catch(()=>c("取得できませんでした"))},[]);const g=async()=>{if(s){a("checking");try{const r=await fetch(`./backend/port_check.php?ip=${d}&port=${s}`);if(r.ok){const o=await r.json();o.status==="error"?a("error"):a(o.status==="open"?"open":"closed")}else console.warn("Backend script returned http error"),a("error")}catch{a("error")}}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 pb-20",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-lighter rounded-2xl p-8 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(m,{className:"text-sky-500"}),"IPアドレス確認 & ポートチェック"]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-sky-50 dark:bg-sky-900/20 p-8 rounded-3xl border border-sky-100 dark:border-sky-800 text-center",children:[e.jsx("p",{className:"text-sm font-bold text-sky-600 dark:text-sky-400 uppercase tracking-widest mb-2",children:"現在のグローバルIP"}),e.jsx("div",{className:"text-4xl md:text-6xl font-black text-slate-800 dark:text-white font-mono break-all",children:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-widest mb-3",children:"チェックするポート番号"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"number",value:s,onChange:r=>n(r.target.value),className:"flex-1 w-full p-4 rounded-xl border-2 border-gray-100 bg-white dark:border-gray-700 dark:bg-gray-800 text-xl font-black text-gray-900 dark:text-white outline-none focus:border-sky-500 transition-colors",placeholder:"80"}),e.jsxs("button",{onClick:g,disabled:!s||t==="checking",className:"w-full sm:w-auto px-8 py-4 sm:py-0 bg-emerald-600 hover:bg-emerald-700 text-white font-black rounded-xl shadow-lg transition-all disabled:opacity-30 flex items-center justify-center gap-2",children:[t==="checking"?e.jsx(k,{className:"animate-spin"}):e.jsx(i,{}),"確認"]})]}),t!=="idle"&&e.jsxs("div",{className:`mt-4 p-4 rounded-xl font-bold flex items-center gap-2 ${t==="open"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":t==="checking"?"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"}`,children:[t==="checking"&&"確認中...",t==="open"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{})," ポート ",s," は開放されています"]}),t==="closed"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{})," ポート ",s," は閉じられています"]}),t==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{})," エラーが発生しました (Backend unavailable)"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[80,443,21,22,25,53,3306,8080,25565].map(r=>e.jsx("button",{onClick:()=>n(r.toString()),className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-lg text-xs font-bold text-gray-500 hover:bg-sky-50 dark:hover:bg-sky-900/30 hover:text-sky-600 dark:hover:text-sky-400 transition-colors",children:r},r))})]})]}),e.jsxs("article",{className:"p-8 bg-white dark:bg-dark-lighter rounded-3xl border border-gray-100 dark:border-gray-700 prose dark:prose-invert max-w-none shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-black flex items-center gap-2 mb-6",children:[e.jsx(p,{className:"text-blue-500"}),"IP確認・ポート開放チェックについて"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 text-sm leading-relaxed text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(b,{size:18,className:"text-sky-500"}),"グローバルIPアドレスとは"]}),e.jsx("p",{children:"インターネット上であなたの機器（ルーター）を識別するための住所のようなものです。サーバー公開やリモートアクセスを行う際に必要となります。当ツールではアクセス元のIPアドレスを即座に表示します。"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-800 dark:text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(y,{size:18,className:"text-sky-500"}),"ポート開放確認"]}),e.jsx("p",{children:"サーバーを公開する際、外部からのアクセスを受け入れるためにルーターの「ポート」を開放する必要があります。指定したポート番号が外部から到達可能かどうかを簡易的にチェックできます。"})]})]})]}),e.jsx(h,{})]})};export{v as default};
