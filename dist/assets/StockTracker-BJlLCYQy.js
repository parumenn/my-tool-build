import{c as Ze,R as k,r as O,j as e,X as we}from"./index-Dicdwew0.js";import{W as et}from"./WorkspaceContext-BjnkMrz5.js";import{A as tt}from"./AdBanner-Du-OfmWS.js";import{T as Ne}from"./trending-up-BU8X2-DZ.js";import{G as rt}from"./globe-2eR3OMOr.js";import{H as Se}from"./history-CQXw1lJM.js";import{c as Ae,b as at,C as nt,a as it}from"./chevron-right-DQDjujfg.js";import{J as st,K as ot,Q as lt,r as V,U as dt,V as ct,i as ce,y as Oe,W as Ie,N as Fe,f as ne,c as Pe,D as gt,v as ht,X as ut,L as me,k as xt,A as mt,o as ae,q as yt,l as ye,Y as ft,s as bt,m as Me,u as pt,G as vt,Z as De,z as kt,P as jt,R as Ce,T as $e,B as wt,C as Nt}from"./generateCategoricalChart-C9R-7Gvh.js";import{g as qe,C as We,X as fe,Y as be,B as St}from"./BarChart-Cjt7aDja.js";import{S as At}from"./search-BeL5sDrf.js";import{D as Ot}from"./download-D2SkNBNu.js";import{T as Pt}from"./trash-2-De1jp4aK.js";import{B as Dt}from"./briefcase-DN9w_7iz.js";import{P as Ct}from"./plus-BWR6nJ-g.js";import{R as $t}from"./refresh-cw-BQwN9p7h.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=Ze("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var Et=["x1","y1","x2","y2","key"],Lt=["offset"];function J(t){"@babel/helpers - typeof";return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},J(t)}function Te(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,a)}return i}function T(t){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Te(Object(i),!0).forEach(function(a){zt(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Te(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function zt(t,r,i){return r=_t(r),r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function _t(t){var r=It(t,"string");return J(r)=="symbol"?r:r+""}function It(t,r){if(J(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var a=i.call(t,r);if(J(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Y(){return Y=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Y.apply(this,arguments)}function Ee(t,r){if(t==null)return{};var i=Ft(t,r),a,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)a=o[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}function Ft(t,r){if(t==null)return{};var i={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;i[a]=t[a]}return i}var Mt=function(r){var i=r.fill;if(!i||i==="none")return null;var a=r.fillOpacity,s=r.x,o=r.y,l=r.width,c=r.height,x=r.ry;return k.createElement("rect",{x:s,y:o,ry:x,width:l,height:c,stroke:"none",fill:i,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function Be(t,r){var i;if(k.isValidElement(t))i=k.cloneElement(t,r);else if(ce(t))i=t(r);else{var a=r.x1,s=r.y1,o=r.x2,l=r.y2,c=r.key,x=Ee(r,Et),y=ne(x,!1);y.offset;var g=Ee(y,Lt);i=k.createElement("line",Y({},g,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:c}))}return i}function qt(t){var r=t.x,i=t.width,a=t.horizontal,s=a===void 0?!0:a,o=t.horizontalPoints;if(!s||!o||!o.length)return null;var l=o.map(function(c,x){var y=T(T({},t),{},{x1:r,y1:c,x2:r+i,y2:c,key:"line-".concat(x),index:x});return Be(s,y)});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Wt(t){var r=t.y,i=t.height,a=t.vertical,s=a===void 0?!0:a,o=t.verticalPoints;if(!s||!o||!o.length)return null;var l=o.map(function(c,x){var y=T(T({},t),{},{x1:c,y1:r,x2:c,y2:r+i,key:"line-".concat(x),index:x});return Be(s,y)});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Bt(t){var r=t.horizontalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.horizontalPoints,x=t.horizontal,y=x===void 0?!0:x;if(!y||!r||!r.length)return null;var g=c.map(function(f){return Math.round(f+s-s)}).sort(function(f,p){return f-p});s!==g[0]&&g.unshift(0);var j=g.map(function(f,p){var b=!g[p+1],w=b?s+l-f:g[p+1]-f;if(w<=0)return null;var A=p%r.length;return k.createElement("rect",{key:"react-".concat(p),y:f,x:a,height:w,width:o,stroke:"none",fill:r[A],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},j)}function Rt(t){var r=t.vertical,i=r===void 0?!0:r,a=t.verticalFill,s=t.fillOpacity,o=t.x,l=t.y,c=t.width,x=t.height,y=t.verticalPoints;if(!i||!a||!a.length)return null;var g=y.map(function(f){return Math.round(f+o-o)}).sort(function(f,p){return f-p});o!==g[0]&&g.unshift(0);var j=g.map(function(f,p){var b=!g[p+1],w=b?o+c-f:g[p+1]-f;if(w<=0)return null;var A=p%a.length;return k.createElement("rect",{key:"react-".concat(p),x:f,y:l,width:w,height:x,stroke:"none",fill:a[A],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},j)}var Gt=function(r,i){var a=r.xAxis,s=r.width,o=r.height,l=r.offset;return Ie(qe(T(T(T({},We.defaultProps),a),{},{ticks:Fe(a,!0),viewBox:{x:0,y:0,width:s,height:o}})),l.left,l.left+l.width,i)},Vt=function(r,i){var a=r.yAxis,s=r.width,o=r.height,l=r.offset;return Ie(qe(T(T(T({},We.defaultProps),a),{},{ticks:Fe(a,!0),viewBox:{x:0,y:0,width:s,height:o}})),l.top,l.top+l.height,i)},Q={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pe(t){var r,i,a,s,o,l,c=st(),x=ot(),y=lt(),g=T(T({},t),{},{stroke:(r=t.stroke)!==null&&r!==void 0?r:Q.stroke,fill:(i=t.fill)!==null&&i!==void 0?i:Q.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:Q.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:Q.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:Q.vertical,verticalFill:(l=t.verticalFill)!==null&&l!==void 0?l:Q.verticalFill,x:V(t.x)?t.x:y.left,y:V(t.y)?t.y:y.top,width:V(t.width)?t.width:y.width,height:V(t.height)?t.height:y.height}),j=g.x,f=g.y,p=g.width,b=g.height,w=g.syncWithTicks,A=g.horizontalValues,u=g.verticalValues,N=dt(),E=ct();if(!V(p)||p<=0||!V(b)||b<=0||!V(j)||j!==+j||!V(f)||f!==+f)return null;var q=g.verticalCoordinatesGenerator||Gt,L=g.horizontalCoordinatesGenerator||Vt,z=g.horizontalPoints,D=g.verticalPoints;if((!z||!z.length)&&ce(L)){var _=A&&A.length,I=L({yAxis:E?T(T({},E),{},{ticks:_?A:E.ticks}):void 0,width:c,height:x,offset:y},_?!0:w);Oe(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(J(I),"]")),Array.isArray(I)&&(z=I)}if((!D||!D.length)&&ce(q)){var B=u&&u.length,F=q({xAxis:N?T(T({},N),{},{ticks:B?u:N.ticks}):void 0,width:c,height:x,offset:y},B?!0:w);Oe(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(J(F),"]")),Array.isArray(F)&&(D=F)}return k.createElement("g",{className:"recharts-cartesian-grid"},k.createElement(Mt,{fill:g.fill,fillOpacity:g.fillOpacity,x:g.x,y:g.y,width:g.width,height:g.height,ry:g.ry}),k.createElement(qt,Y({},g,{offset:y,horizontalPoints:z,xAxis:N,yAxis:E})),k.createElement(Wt,Y({},g,{offset:y,verticalPoints:D,xAxis:N,yAxis:E})),k.createElement(Bt,Y({},g,{horizontalPoints:z})),k.createElement(Rt,Y({},g,{verticalPoints:D})))}pe.displayName="CartesianGrid";var Kt=["type","layout","connectNulls","ref"],Ht=["key"];function ee(t){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ee(t)}function Le(t,r){if(t==null)return{};var i=Ut(t,r),a,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)a=o[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}function Ut(t,r){if(t==null)return{};var i={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;i[a]=t[a]}return i}function ie(){return ie=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},ie.apply(this,arguments)}function ze(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,a)}return i}function M(t){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ze(Object(i),!0).forEach(function(a){W(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ze(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function Z(t){return Qt(t)||Jt(t)||Yt(t)||Xt()}function Xt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yt(t,r){if(t){if(typeof t=="string")return ve(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ve(t,r)}}function Jt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qt(t){if(Array.isArray(t))return ve(t)}function ve(t,r){(r==null||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function Zt(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _e(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Ge(a.key),a)}}function er(t,r,i){return r&&_e(t.prototype,r),i&&_e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function tr(t,r,i){return r=ge(r),rr(t,Re()?Reflect.construct(r,i||[],ge(t).constructor):r.apply(t,i))}function rr(t,r){if(r&&(ee(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ar(t)}function ar(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Re(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Re=function(){return!!t})()}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},ge(t)}function nr(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ke(t,r)}function ke(t,r){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ke(t,r)}function W(t,r,i){return r=Ge(r),r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function Ge(t){var r=ir(t,"string");return ee(r)=="symbol"?r:r+""}function ir(t,r){if(ee(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var a=i.call(t,r);if(ee(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var se=function(t){function r(){var i;Zt(this,r);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return i=tr(this,r,[].concat(s)),W(i,"state",{isAnimationFinished:!0,totalLength:0}),W(i,"generateSimpleStrokeDasharray",function(l,c){return"".concat(c,"px ").concat(l-c,"px")}),W(i,"getStrokeDasharray",function(l,c,x){var y=x.reduce(function(u,N){return u+N});if(!y)return i.generateSimpleStrokeDasharray(c,l);for(var g=Math.floor(l/y),j=l%y,f=c-l,p=[],b=0,w=0;b<x.length;w+=x[b],++b)if(w+x[b]>j){p=[].concat(Z(x.slice(0,b)),[j-w]);break}var A=p.length%2===0?[0,f]:[f];return[].concat(Z(r.repeat(x,g)),Z(p),A).map(function(u){return"".concat(u,"px")}).join(", ")}),W(i,"id",pt("recharts-line-")),W(i,"pathRef",function(l){i.mainCurve=l}),W(i,"handleAnimationEnd",function(){i.setState({isAnimationFinished:!0}),i.props.onAnimationEnd&&i.props.onAnimationEnd()}),W(i,"handleAnimationStart",function(){i.setState({isAnimationFinished:!1}),i.props.onAnimationStart&&i.props.onAnimationStart()}),i}return nr(r,t),er(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.points,c=o.xAxis,x=o.yAxis,y=o.layout,g=o.children,j=ht(g,ut);if(!j)return null;var f=function(w,A){return{x:w.x,y:w.y,value:w.value,errorVal:Me(w.payload,A)}},p={clipPath:a?"url(#clipPath-".concat(s,")"):null};return k.createElement(me,p,j.map(function(b){return k.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:l,xAxis:c,yAxis:x,layout:y,dataPointFormatter:f})}))}},{key:"renderDots",value:function(a,s,o){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var c=this.props,x=c.dot,y=c.points,g=c.dataKey,j=ne(this.props,!1),f=ne(x,!0),p=y.map(function(w,A){var u=M(M(M({key:"dot-".concat(A),r:3},j),f),{},{index:A,cx:w.x,cy:w.y,value:w.value,dataKey:g,payload:w.payload,points:y});return r.renderDotItem(x,u)}),b={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(o,")"):null};return k.createElement(me,ie({className:"recharts-line-dots",key:"dots"},b),p)}},{key:"renderCurveStatically",value:function(a,s,o,l){var c=this.props,x=c.type,y=c.layout,g=c.connectNulls;c.ref;var j=Le(c,Kt),f=M(M(M({},ne(j,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(o,")"):null,points:a},l),{},{type:x,layout:y,connectNulls:g});return k.createElement(xt,ie({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var o=this,l=this.props,c=l.points,x=l.strokeDasharray,y=l.isAnimationActive,g=l.animationBegin,j=l.animationDuration,f=l.animationEasing,p=l.animationId,b=l.animateNewValues,w=l.width,A=l.height,u=this.state,N=u.prevPoints,E=u.totalLength;return k.createElement(mt,{begin:g,duration:j,isActive:y,easing:f,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(q){var L=q.t;if(N){var z=N.length/c.length,D=c.map(function($,te){var K=Math.floor(te*z);if(N[K]){var R=N[K],G=ae(R.x,$.x),oe=ae(R.y,$.y);return M(M({},$),{},{x:G(L),y:oe(L)})}if(b){var le=ae(w*2,$.x),he=ae(A/2,$.y);return M(M({},$),{},{x:le(L),y:he(L)})}return M(M({},$),{},{x:$.x,y:$.y})});return o.renderCurveStatically(D,a,s)}var _=ae(0,E),I=_(L),B;if(x){var F="".concat(x).split(/[,\s]+/gim).map(function($){return parseFloat($)});B=o.getStrokeDasharray(I,E,F)}else B=o.generateSimpleStrokeDasharray(E,I);return o.renderCurveStatically(c,a,s,{strokeDasharray:B})})}},{key:"renderCurve",value:function(a,s){var o=this.props,l=o.points,c=o.isAnimationActive,x=this.state,y=x.prevPoints,g=x.totalLength;return c&&l&&l.length&&(!y&&g>0||!yt(y,l))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(l,a,s)}},{key:"render",value:function(){var a,s=this.props,o=s.hide,l=s.dot,c=s.points,x=s.className,y=s.xAxis,g=s.yAxis,j=s.top,f=s.left,p=s.width,b=s.height,w=s.isAnimationActive,A=s.id;if(o||!c||!c.length)return null;var u=this.state.isAnimationFinished,N=c.length===1,E=Pe("recharts-line",x),q=y&&y.allowDataOverflow,L=g&&g.allowDataOverflow,z=q||L,D=ye(A)?this.id:A,_=(a=ne(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=_.r,B=I===void 0?3:I,F=_.strokeWidth,$=F===void 0?2:F,te=ft(l)?l:{},K=te.clipDot,R=K===void 0?!0:K,G=B*2+$;return k.createElement(me,{className:E},q||L?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(D)},k.createElement("rect",{x:q?f:f-p/2,y:L?j:j-b/2,width:q?p:p*2,height:L?b:b*2})),!R&&k.createElement("clipPath",{id:"clipPath-dots-".concat(D)},k.createElement("rect",{x:f-G/2,y:j-G/2,width:p+G,height:b+G}))):null,!N&&this.renderCurve(z,D),this.renderErrorBar(z,D),(N||l)&&this.renderDots(z,R,D),(!w||u)&&bt.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var o=a.length%2!==0?[].concat(Z(a),[0]):a,l=[],c=0;c<s;++c)l=[].concat(Z(l),Z(o));return l}},{key:"renderDotItem",value:function(a,s){var o;if(k.isValidElement(a))o=k.cloneElement(a,s);else if(ce(a))o=a(s);else{var l=s.key,c=Le(s,Ht),x=Pe("recharts-line-dot",typeof a!="boolean"?a.className:"");o=k.createElement(gt,ie({key:l},c,{className:x}))}return o}}])}(O.PureComponent);W(se,"displayName","Line");W(se,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!vt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});W(se,"getComposedData",function(t){var r=t.props,i=t.xAxis,a=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.dataKey,c=t.bandSize,x=t.displayedData,y=t.offset,g=r.layout,j=x.map(function(f,p){var b=Me(f,l);return g==="horizontal"?{x:De({axis:i,ticks:s,bandSize:c,entry:f,index:p}),y:ye(b)?null:a.scale(b),value:b,payload:f}:{x:ye(b)?null:i.scale(b),y:De({axis:a,ticks:o,bandSize:c,entry:f,index:p}),value:b,payload:f}});return M({points:j,layout:g},y)});var sr=kt({chartName:"LineChart",GraphicalChild:se,axisComponents:[{axisType:"xAxis",AxisComp:fe},{axisType:"yAxis",AxisComp:be}],formatAxisMap:jt});const or=["順張り","逆張り","材料/決算","デイトレ","スイング","長期/配当","優待","IPO","その他"],lr=[{id:"calm",label:"冷静",color:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300"},{id:"excited",label:"興奮",color:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"},{id:"anxious",label:"不安",color:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300"},{id:"angry",label:"怒り",color:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"},{id:"fear",label:"恐怖",color:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}],dr=({symbol:t})=>{const r=O.useRef(null);return O.useEffect(()=>{if(!r.current)return;r.current.innerHTML="";const i=document.createElement("script");i.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",i.type="text/javascript",i.async=!0,i.innerHTML=JSON.stringify({autosize:!0,symbol:t,interval:"D",timezone:"Asia/Tokyo",theme:document.documentElement.classList.contains("dark")?"dark":"light",style:"1",locale:"ja",enable_publishing:!1,allow_symbol_change:!0,support_host:"https://www.tradingview.com"}),r.current.appendChild(i)},[t]),e.jsx("div",{className:"tradingview-widget-container h-full w-full rounded-2xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700",ref:r,children:e.jsx("div",{className:"tradingview-widget-container__widget h-full w-full"})})},Sr=()=>{const t=O.useContext(et),[r,i]=O.useState("dashboard"),[a,s]=O.useState([]),[o,l]=O.useState(1e6),[c,x]=O.useState(!1),[y,g]=O.useState("TSE:7203"),[j,f]=O.useState(""),[p,b]=O.useState(!1),[w,A]=O.useState(!1),[u,N]=O.useState({date:new Date().toISOString().split("T")[0],type:"sell",emotion:"calm",strategy:"順張り",quantity:100,pnl:0});O.useEffect(()=>{const n=localStorage.getItem("stock_trades"),h=localStorage.getItem("stock_initial_asset");if(n)try{const d=JSON.parse(n);if(Array.isArray(d)){const m=d.map(S=>({...S,price:Number(S.price)||0,quantity:Number(S.quantity)||0,pnl:Number(S.pnl)||0,date:S.date||new Date().toISOString().split("T")[0]}));s(m)}else s([])}catch(d){console.error("Failed to parse trades",d),s([])}else s([{id:"1",date:"2023-10-01",ticker:"7203",name:"トヨタ",type:"buy",price:2e3,quantity:100,pnl:0,comment:"エントリー",strategy:"順張り",emotion:"calm"},{id:"2",date:"2023-10-05",ticker:"7203",name:"トヨタ",type:"sell",price:2150,quantity:100,pnl:15e3,comment:"利確",strategy:"順張り",emotion:"excited"}]);h&&!isNaN(Number(h))&&l(Number(h)),x(!0)},[]),O.useEffect(()=>{c&&localStorage.setItem("stock_trades",JSON.stringify(a))},[a,c]),O.useEffect(()=>{c&&localStorage.setItem("stock_initial_asset",o.toString())},[o,c]);const E=new Date().toISOString().slice(0,7),q=a.reduce((n,h)=>n+(Number(h.pnl)||0),0),L=o+q,z=O.useMemo(()=>a.filter(n=>n.date&&n.date.startsWith(E)).reduce((n,h)=>n+(Number(h.pnl)||0),0),[a,E]),D=a.filter(n=>n.type==="sell"&&n.pnl!==0),_=D.filter(n=>n.pnl>0),I=D.filter(n=>n.pnl<0),B=D.length>0?_.length/D.length*100:0,F=_.reduce((n,h)=>n+h.pnl,0),$=Math.abs(I.reduce((n,h)=>n+h.pnl,0)),te=$===0?F>0?99.99:0:F/$,K=_.length>0?F/_.length:0,R=O.useMemo(()=>{const n=new Map,h=[...a].sort((d,m)=>new Date(d.date).getTime()-new Date(m.date).getTime());for(const d of h){if(!d.ticker)continue;const m=n.get(d.ticker)||{name:d.name||d.ticker,quantity:0,totalCost:0};if(d.type==="buy")m.quantity+=d.quantity,m.totalCost+=d.price*d.quantity;else if(d.type==="sell"){const S=m.quantity>0?m.totalCost/m.quantity:0;m.quantity-=d.quantity,m.totalCost-=S*d.quantity}m.quantity<1e-4?n.delete(d.ticker):n.set(d.ticker,m)}return Array.from(n.entries()).map(([d,m])=>({...m,ticker:d,avgPrice:m.quantity>0?m.totalCost/m.quantity:0}))},[a]),G=O.useMemo(()=>{const n=[...a].sort((v,P)=>new Date(v.date).getTime()-new Date(P.date).getTime()),h=new Map,d=new Date().toISOString().split("T")[0];let m=o;if(n.length===0)h.set(d,o);else{const v=n[0].date;if(v){const P=new Date(v);isNaN(P.getTime())||(P.setDate(P.getDate()-1),h.set(P.toISOString().split("T")[0],o))}}for(const v of n)v.date&&(m+=Number(v.pnl)||0,h.set(v.date,m));const S=Array.from(h.entries()).sort((v,P)=>new Date(v[0]).getTime()-new Date(P[0]).getTime()).map(([v,P])=>({date:v,asset:P})).filter(v=>!isNaN(v.asset));return S.length>0?S:[{date:d,asset:o}]},[a,o]),oe=O.useMemo(()=>{const n={};a.forEach(d=>{if(!d.date)return;const m=d.date.slice(0,7);n[m]=(n[m]||0)+(Number(d.pnl)||0)});const h=Object.entries(n).sort().map(([d,m])=>({date:d,pnl:m}));return h.length>0?h:[{date:E,pnl:0}]},[a]),le=O.useMemo(()=>{const n={};return a.forEach(h=>{const d=h.strategy||"その他";n[d]=(n[d]||0)+(Number(h.pnl)||0)}),Object.entries(n).sort((h,d)=>d[1]-h[1]).map(([h,d])=>({name:h,value:d}))},[a]),he=()=>{const n=`ID,日付,銘柄コード,銘柄名,売買区分,価格,株数,損益,戦略,感情,コメント
`,h=a.map(v=>`"${v.id}","${v.date}","${v.ticker}","${v.name}","${v.type}",${v.price},${v.quantity},${v.pnl},"${v.strategy}","${v.emotion}","${v.comment}"`).join(`
`),d=new Blob([new Uint8Array([239,187,191]),n+h],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(d),S=document.createElement("a");S.href=m,S.download=`trade_history_${new Date().toISOString().split("T")[0]}.csv`,S.click(),URL.revokeObjectURL(m)},Ve=()=>{confirm("全ての取引データを削除しますか？この操作は取り消せません。")&&(s([]),l(1e6),alert("データを初期化しました。"))},Ke=()=>{if(!u.date){alert("日付は必須です");return}const n={id:Date.now().toString(),date:u.date,ticker:u.ticker||"",name:u.name||u.ticker||"取引",type:u.type||"sell",price:Number(u.price)||0,quantity:Number(u.quantity)||0,pnl:Number(u.pnl)||0,comment:u.comment||"",strategy:u.strategy||"その他",emotion:u.emotion||"calm"};s(h=>[...h,n]),b(!1),N({date:new Date().toISOString().split("T")[0],type:"sell",emotion:"calm",strategy:"順張り",quantity:100,pnl:0,name:"",ticker:"",comment:"",price:0})},He=n=>{confirm("この記録を削除しますか？")&&s(a.filter(h=>h.id!==n))},Ue=n=>{if(n.preventDefault(),!j)return;let h=j.trim().toUpperCase();/^[0-9]{4}$/.test(h)&&(h=`TSE:${h}`),g(h)},de=({title:n,value:h,sub:d,colorClass:m})=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase",children:n}),e.jsx("div",{className:`text-2xl font-black mt-1 ${m||"text-gray-800 dark:text-white"}`,children:h}),d&&e.jsx("span",{className:"text-[10px] text-gray-400 mt-1",children:d})]}),Xe=()=>{const n=new Date,h=[];for(let d=89;d>=0;d--){const m=new Date;m.setDate(n.getDate()-d),h.push(m.toISOString().split("T")[0])}return e.jsx("div",{className:"flex flex-wrap gap-1",children:h.map(d=>{const S=a.filter(P=>P.date===d&&P.pnl!==0).reduce((P,ue)=>P+ue.pnl,0);let v="bg-gray-100 dark:bg-gray-700";return S>5e4?v="bg-red-500":S>1e4?v="bg-red-400":S>0?v="bg-red-300":S<-5e4?v="bg-emerald-600":S<-1e4?v="bg-emerald-500":S<0&&(v="bg-emerald-400"),e.jsx("div",{className:`w-3 h-3 rounded-sm ${v}`,title:`${d}: ${S.toLocaleString()}円`},d)})})},Ye=()=>{const[n,h]=O.useState(new Date),d=n.getFullYear(),m=n.getMonth(),S=new Date(d,m,1).getDay(),v=new Date(d,m+1,0).getDate(),P=[];for(let C=0;C<S;C++)P.push(null);for(let C=1;C<=v;C++)P.push(C);const ue=`${d}-${String(m+1).padStart(2,"0")}`,xe=a.filter(C=>C.date&&C.date.startsWith(ue)).reduce((C,H)=>C+Number(H.pnl),0);return e.jsxs("div",{className:"animate-fade-in bg-white dark:bg-gray-800 p-4 md:p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg md:text-xl text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ae,{className:"text-indigo-500"}),d,"年",m+1,"月",e.jsxs("span",{className:`text-sm ml-2 font-mono ${xe>=0?"text-red-500":"text-emerald-500"}`,children:["(",xe>0?"+":"",xe.toLocaleString(),")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(new Date(d,m-1,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:e.jsx(nt,{size:20})}),e.jsx("button",{onClick:()=>h(new Date),className:"text-xs font-bold px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:"今月"}),e.jsx("button",{onClick:()=>h(new Date(d,m+1,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300",children:e.jsx(it,{size:20})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:[["日","月","火","水","木","金","土"].map((C,H)=>e.jsx("div",{className:`text-center text-xs font-bold py-2 ${H===0?"text-red-400":H===6?"text-blue-400":"text-gray-400"}`,children:C},C)),P.map((C,H)=>{if(!C)return e.jsx("div",{className:"h-16 md:h-24 bg-transparent"},H);const je=`${d}-${String(m+1).padStart(2,"0")}-${String(C).padStart(2,"0")}`,re=a.filter(X=>X.date===je),U=re.reduce((X,Qe)=>X+Qe.pnl,0),Je=new Date().toISOString().slice(0,10)===je;return e.jsxs("div",{className:`h-16 md:h-24 p-1 md:p-2 border rounded-xl flex flex-col justify-between transition-all hover:shadow-md ${re.length>0?"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600":"bg-transparent border-transparent"} ${Je?"ring-2 ring-indigo-500":""}`,children:[e.jsx("span",{className:"text-[10px] md:text-xs font-bold text-gray-500 dark:text-gray-400",children:C}),re.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-right font-black text-[10px] md:text-sm ${U>0?"text-red-500":U<0?"text-emerald-500":"text-gray-400"}`,children:U!==0&&(U>0?"+":"")+(Math.abs(U)>=1e6?(U/1e4).toFixed(0)+"万":U.toLocaleString())}),e.jsxs("div",{className:"flex justify-end gap-0.5 md:gap-1 mt-1",children:[re.some(X=>X.type==="buy")&&e.jsx("div",{className:"w-1 md:w-1.5 h-1 md:h-1.5 rounded-full bg-blue-400"}),re.some(X=>X.type==="sell")&&e.jsx("div",{className:"w-1 md:w-1.5 h-1 md:h-1.5 rounded-full bg-red-400"})]})]})]},H)})]})]})};return e.jsxs("div",{className:`mx-auto h-full flex flex-col ${t?"w-full p-2":"max-w-6xl space-y-6 pb-20"}`,children:[!t&&e.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ne,{className:"text-indigo-500"})," 株トレード記録"]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>A(!0),className:"p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:"設定"})})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl overflow-x-auto no-scrollbar shrink-0",children:[{id:"dashboard",icon:Tt,label:"ホーム"},{id:"market",icon:rt,label:"マーケット"},{id:"history",icon:Se,label:"履歴"},{id:"calendar",icon:Ae,label:"カレンダー"},{id:"analytics",icon:at,label:"分析"}].map(n=>e.jsxs("button",{onClick:()=>i(n.id),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-xs sm:text-sm font-bold transition-all whitespace-nowrap ${r===n.id?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[e.jsx(n.icon,{size:16}),n.label]},n.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:[r==="dashboard"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(de,{title:"総資産評価額",value:`¥${L.toLocaleString()}`,colorClass:"text-indigo-600 dark:text-indigo-400"}),e.jsx(de,{title:"今月の損益",value:`¥${(z||0).toLocaleString()}`,colorClass:(z||0)>=0?"text-red-500":"text-emerald-500"}),e.jsx(de,{title:"勝率",value:`${B.toFixed(1)}%`,sub:`${_.length}勝 ${I.length}敗`}),e.jsx(de,{title:"PF / リスクリワード",value:te.toFixed(2),sub:`Avg Win: ¥${Math.round(K).toLocaleString()}`})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(Ne,{size:18})," 資産推移"]}),e.jsx(Ce,{width:"100%",height:"100%",children:e.jsxs(sr,{data:G,children:[e.jsx(pe,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),e.jsx(fe,{dataKey:"date",tick:{fontSize:10},tickFormatter:n=>typeof n=="string"&&n.length>=5?n.slice(5):"",stroke:"#9ca3af"}),e.jsx(be,{tick:{fontSize:10},tickFormatter:n=>`${n/1e4}万`,width:40,domain:["auto","auto"],stroke:"#9ca3af"}),e.jsx($e,{formatter:n=>`¥${n.toLocaleString()}`,contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",backgroundColor:"rgba(255,255,255,0.9)",color:"#333"}}),e.jsx(se,{type:"monotone",dataKey:"asset",stroke:"#4f46e5",strokeWidth:3,dot:!1,activeDot:{r:6}})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(Se,{size:18})," アクティビティ"]}),e.jsx("div",{className:"mb-4",children:e.jsx(Xe,{})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase",children:"直近の取引"}),a.slice(-5).reverse().map(n=>e.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-gray-100 dark:border-gray-700 pb-2 last:border-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded mr-2 ${n.type==="buy"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:n.type==="buy"?"買":n.type==="sell"?"売":n.type}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:n.name})]}),e.jsx("div",{className:`font-bold ${n.pnl>0?"text-red-500":n.pnl<0?"text-emerald-500":"text-gray-400"}`,children:n.pnl!==0?(n.pnl>0?"+":"")+n.pnl.toLocaleString():"-"})]},n.id))]})]})]})]}),r==="market"&&e.jsxs("div",{className:"flex flex-col h-full animate-fade-in space-y-4",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("form",{onSubmit:Ue,className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:j,onChange:n=>f(n.target.value),placeholder:"銘柄コード (例: 7203 or AAPL)",className:"flex-1 p-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 dark:text-white text-sm font-bold shadow-sm"}),e.jsxs("button",{type:"submit",className:"px-6 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[e.jsx(At,{size:18})," ",e.jsx("span",{className:"hidden sm:inline",children:"チャート表示"})]})]})}),e.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-3xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 min-h-[400px]",children:e.jsx(dr,{symbol:y})}),e.jsxs("div",{className:"text-[10px] text-gray-400 text-center",children:["※ リアルタイムチャートはTradingView提供のウィジェットを使用しています。一部の銘柄（特に日本株）は遅延する場合があります。",e.jsx("br",{}),"※ 4桁の数字を入力すると自動的に東証(TSE)として検索します。"]})]}),r==="history"&&e.jsxs("div",{className:"animate-fade-in bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300",children:"取引履歴一覧"}),e.jsxs("button",{onClick:he,className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs font-bold text-gray-600 dark:text-gray-300 transition-colors",children:[e.jsx(Ot,{size:14})," CSV出力"]})]}),e.jsx("div",{className:"overflow-x-auto flex-1",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-500 dark:text-gray-400 font-bold sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 whitespace-nowrap",children:"日付"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"銘柄"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"売買"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"価格(円)"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"株数"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-right",children:"損益"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"戦略/感情"}),e.jsx("th",{className:"p-4 w-10"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[[...a].sort((n,h)=>new Date(h.date).getTime()-new Date(n.date).getTime()).map(n=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[e.jsx("td",{className:"p-4 font-mono text-gray-600 dark:text-gray-400",children:n.date}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold text-gray-800 dark:text-white",children:n.name}),e.jsx("div",{className:"text-xs text-gray-400 font-mono",children:n.ticker})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${n.type==="buy"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":n.type==="sell"?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-gray-100 text-gray-600"}`,children:n.type==="buy"?"買付":n.type==="sell"?"売却":n.type})}),e.jsx("td",{className:"p-4 text-right font-mono text-gray-700 dark:text-gray-300",children:n.price.toLocaleString()}),e.jsx("td",{className:"p-4 text-right font-mono text-gray-700 dark:text-gray-300",children:n.quantity.toLocaleString()}),e.jsx("td",{className:`p-4 text-right font-mono font-bold ${n.pnl>0?"text-red-500":n.pnl<0?"text-emerald-500":"text-gray-400"}`,children:n.pnl!==0?(n.pnl>0?"+":"")+n.pnl.toLocaleString():"-"}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 px-2 py-0.5 rounded w-fit",children:n.strategy}),n.emotion&&e.jsx("span",{className:"text-[10px] text-gray-400",children:n.emotion})]})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>He(n.id),className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Pt,{size:16})})})]},n.id)),a.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"p-8 text-center text-gray-400",children:"取引データがありません"})})]})]})})]}),r==="calendar"&&e.jsx(Ye,{}),r==="analytics"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4",children:"月別損益推移"}),e.jsx(Ce,{width:"100%",height:"100%",children:e.jsxs(St,{data:oe,children:[e.jsx(pe,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),e.jsx(fe,{dataKey:"date",tick:{fontSize:10},tickFormatter:n=>typeof n=="string"&&n.length>=5?n.slice(5):"",stroke:"#9ca3af"}),e.jsx(be,{tickFormatter:n=>`${n/1e4}万`,width:40,stroke:"#9ca3af"}),e.jsx($e,{formatter:n=>`¥${n.toLocaleString()}`,cursor:{fill:"transparent"},contentStyle:{backgroundColor:"rgba(255,255,255,0.9)",borderRadius:"8px",color:"#333"}}),e.jsx(wt,{dataKey:"pnl",children:oe.map((n,h)=>e.jsx(Nt,{fill:n.pnl>=0?"#ef4444":"#10b981"},`cell-${h}`))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 h-80",children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4",children:"戦略別パフォーマンス"}),e.jsx("div",{className:"h-full overflow-y-auto no-scrollbar pb-6",children:le.length>0?e.jsx("div",{className:"space-y-3",children:le.map((n,h)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 text-xs font-bold text-gray-600 dark:text-gray-400 truncate",children:n.name}),e.jsx("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden flex",children:n.value>0?e.jsx("div",{className:"h-full bg-red-500",style:{width:`${Math.min(Math.abs(n.value)/5e4*100,100)}%`}}):e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${Math.min(Math.abs(n.value)/5e4*100,100)}%`}})}),e.jsxs("div",{className:`w-20 text-right text-xs font-bold ${n.value>=0?"text-red-500":"text-emerald-500"}`,children:[n.value>0?"+":"",n.value.toLocaleString()]})]},h))}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-sm",children:"データがありません"})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(Dt,{size:18})," 現在の保有銘柄 (履歴から推定)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-500 dark:text-gray-400 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"銘柄"}),e.jsx("th",{className:"p-3 text-right",children:"保有数"}),e.jsx("th",{className:"p-3 text-right",children:"平均取得単価"}),e.jsx("th",{className:"p-3 text-right",children:"推定投資額"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:R.length>0?R.map((n,h)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30",children:[e.jsxs("td",{className:"p-3 font-medium text-gray-800 dark:text-gray-200",children:[n.name," ",e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:n.ticker})]}),e.jsx("td",{className:"p-3 text-right font-mono text-gray-700 dark:text-gray-300",children:n.quantity.toLocaleString()}),e.jsxs("td",{className:"p-3 text-right font-mono text-gray-700 dark:text-gray-300",children:["¥",Math.round(n.avgPrice).toLocaleString()]}),e.jsxs("td",{className:"p-3 text-right font-mono font-bold text-gray-800 dark:text-white",children:["¥",Math.round(n.avgPrice*n.quantity).toLocaleString()]})]},h)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-6 text-center text-gray-400",children:"保有なし"})})})]})})]})]})]}),e.jsx("button",{onClick:()=>b(!0),className:`${t?"absolute bottom-4 right-4 p-3 shadow-lg":"fixed bottom-8 right-8 p-5 shadow-2xl"} bg-indigo-600 text-white rounded-full hover:bg-indigo-700 hover:scale-105 transition-all z-20 flex items-center justify-center active:scale-95`,children:e.jsx(Ct,{size:t?20:32})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl w-full max-w-sm shadow-2xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:"設定"}),e.jsx("button",{onClick:()=>A(!1),children:e.jsx(we,{className:"text-gray-400"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2",children:"初期資産 (円)"}),e.jsx("input",{type:"number",value:o,onChange:n=>l(Number(n.target.value)),className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:"※ここに入力した金額をスタート地点として損益を加算します。"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("button",{onClick:Ve,className:"w-full py-2 text-red-500 text-xs font-bold hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx($t,{size:14})," 全データを初期化"]})}),e.jsx("button",{onClick:()=>A(!1),className:"w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors",children:"完了"})]})]})}),p&&e.jsx("div",{className:`z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in ${t?"absolute inset-0":"fixed inset-0 bg-black/60"}`,children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md p-6 shadow-2xl border border-gray-100 dark:border-gray-700 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-gray-800 dark:text-white",children:"取引を記録"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(we,{})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 p-1 rounded-xl",children:["buy","sell","deposit","withdraw"].map(n=>e.jsx("button",{onClick:()=>N({...u,type:n}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${u.type===n?n==="buy"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow":n==="sell"?"bg-white dark:bg-gray-600 text-red-600 dark:text-red-400 shadow":"bg-white dark:bg-gray-600 text-gray-800 dark:text-white shadow":"text-gray-500 dark:text-gray-400"}`,children:n==="buy"?"買付":n==="sell"?"売却":n==="deposit"?"入金":"出金"},n))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"日付"}),e.jsx("input",{type:"date",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",value:u.date,onChange:n=>N({...u,date:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"銘柄コード"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"7203",value:u.ticker,onChange:n=>N({...u,ticker:n.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"銘柄名 / 項目名"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"トヨタ自動車",value:u.name,onChange:n=>N({...u,name:n.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"約定価格"}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500 outline-none",value:u.price,onChange:n=>N({...u,price:Number(n.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"株数"}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono font-bold focus:ring-2 focus:ring-indigo-500 outline-none",value:u.quantity,onChange:n=>N({...u,quantity:Number(n.target.value)})})]})]}),u.type==="sell"&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"確定損益 (円)"}),e.jsx("input",{type:"number",className:`w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 font-mono text-xl font-black focus:ring-2 focus:ring-indigo-500 outline-none ${Number(u.pnl)>=0?"text-red-500":"text-emerald-500"}`,placeholder:"例: 10000 or -5000",value:u.pnl,onChange:n=>N({...u,pnl:Number(n.target.value)})}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1 text-right",children:"※マイナスの場合は「-」をつけてください"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"戦略・タグ"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:or.map(n=>e.jsx("button",{type:"button",onClick:()=>N({...u,strategy:n}),className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${u.strategy===n?"bg-indigo-100 dark:bg-indigo-900/50 border-indigo-500 text-indigo-700 dark:text-indigo-300":"border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400"}`,children:n},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"感情コンディション"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:lr.map(n=>e.jsx("button",{type:"button",onClick:()=>N({...u,emotion:n.id}),className:`flex-1 min-w-[60px] py-1.5 rounded text-xs font-bold transition-all ${u.emotion===n.id?n.color+" shadow-sm ring-1 ring-inset ring-current":"bg-gray-100 dark:bg-gray-700 text-gray-400"}`,children:n.label},n.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"メモ"}),e.jsx("textarea",{className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm h-20 resize-none focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"エントリー根拠や反省点...",value:u.comment,onChange:n=>N({...u,comment:n.target.value})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 py-3 text-gray-500 dark:text-gray-400 text-sm font-bold hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"キャンセル"}),e.jsx("button",{onClick:Ke,className:"flex-1 py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 shadow-xl shadow-indigo-200 dark:shadow-none transition-colors",children:"保存する"})]})]})}),!t&&e.jsx(tt,{})]})};export{Sr as default};
