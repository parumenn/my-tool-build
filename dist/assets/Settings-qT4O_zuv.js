import{c as v,r as a,A as M,j as e,C as R}from"./index-CAfsKyj1.js";import{S as T,M as A}from"./shield-C-7zjn85.js";import{D as N}from"./database-C3jJfcHn.js";import{D as I}from"./download-CLnLhd3y.js";import{C as w}from"./circle-alert-DDnKTRqv.js";import{U as J}from"./upload-xJ-9EYKG.js";import{L as _}from"./loader-circle-CAmsrvQ3.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=v("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=v("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),V=()=>{const{showAds:b,setShowAds:S}=a.useContext(M),g=a.useRef(null),[m,h]=a.useState(""),[p,k]=a.useState(""),[i,u]=a.useState(""),[y,f]=a.useState(!1),[j,l]=a.useState("idle"),C=()=>{const t={};["theme","addedTools","showAds","maitool_notes","kakeibo_transactions","kakeibo_subs","kakeibo_goals"].forEach(d=>{const r=localStorage.getItem(d);if(r)try{t[d]=JSON.parse(r)}catch{t[d]=r}});const c=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),x=URL.createObjectURL(c),s=document.createElement("a");s.href=x,s.download=`maitool_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s)},z=t=>{var x;const n=(x=t.target.files)==null?void 0:x[0];if(!n)return;const c=new FileReader;c.onload=s=>{var d;try{const r=JSON.parse((d=s.target)==null?void 0:d.result);Object.keys(r).forEach(o=>{typeof r[o]=="object"?localStorage.setItem(o,JSON.stringify(r[o])):localStorage.setItem(o,String(r[o]))}),alert("復元が完了しました。変更を反映するためにページを再読み込みします。"),window.location.reload()}catch(r){console.error(r),alert("ファイルの読み込みに失敗しました。正しいバックアップファイルか確認してください。")}},c.readAsText(n)},O=async t=>{if(t.preventDefault(),!!i.trim()){f(!0),l("idle");try{(await fetch("./backend/admin_api.php?action=send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,contact:p,message:i})})).ok?(l("success"),h(""),k(""),u("")):l("error")}catch{l("error")}finally{f(!1)}}};return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"設定"}),e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-6 rounded-2xl border border-emerald-100 dark:border-emerald-800 flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-800 rounded-lg text-emerald-600 dark:text-emerald-300 shrink-0",children:e.jsx(T,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-emerald-800 dark:text-emerald-400 mb-1",children:"安全な設計"}),e.jsxs("p",{className:"text-sm text-emerald-700 dark:text-emerald-300 leading-relaxed",children:["当サイトのデータ管理はサーバーレスで動作しており、各アプリで入力されたデータがサーバーに送信・保存されることは一切ありません。",e.jsx("br",{}),"すべての処理はお使いのブラウザ内（ローカル）で完結しています。"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-lighter p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(B,{size:20,className:"text-purple-500"}),"表示設定"]}),e.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-100 dark:border-gray-800 last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"広告を表示する"}),e.jsx("p",{className:"text-xs text-gray-500",children:"サービスの維持にご協力ください。"})]}),e.jsx("button",{onClick:()=>S(!b),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${b?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${b?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-lighter p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(N,{size:20,className:"text-blue-500"}),"データ管理"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-transparent dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-200",children:"バックアップを作成"}),e.jsx(N,{size:16,className:"text-gray-400"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"家計簿、メモ、設定などのすべてのデータをJSONファイルとしてダウンロードします。"}),e.jsxs("button",{onClick:C,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold text-sm flex items-center justify-center gap-2 transition-colors",children:[e.jsx(I,{size:16})," 保存する"]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-transparent dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-200",children:"データを復元"}),e.jsx(w,{size:16,className:"text-orange-400"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"保存したJSONファイルを読み込みます。現在のデータは上書きされます。"}),e.jsx("input",{type:"file",accept:".json",ref:g,className:"hidden",onChange:z}),e.jsxs("button",{onClick:()=>{var t;return(t=g.current)==null?void 0:t.click()},className:"w-full py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-lg font-bold text-sm flex items-center justify-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(J,{size:16})," 読み込む"]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-lighter p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(A,{size:20,className:"text-pink-500 dark:text-pink-400"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"管理者へ連絡"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:["バグ報告や機能要望など、管理者へメッセージを送信できます。",e.jsx("br",{}),"※返信が必要な場合はメールアドレス等を記入してください。"]}),j==="success"?e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 p-6 rounded-xl text-center",children:[e.jsx(R,{size:48,className:"text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"font-bold text-green-700 dark:text-green-300",children:"送信しました"}),e.jsx("button",{onClick:()=>l("idle"),className:"mt-4 text-xs text-gray-500 underline",children:"続けて送信する"})]}):e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"お名前 (任意)"}),e.jsx("input",{type:"text",value:m,onChange:t=>h(t.target.value),className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 text-sm outline-none focus:ring-2 focus:ring-pink-500/30 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"連絡先 (任意)"}),e.jsx("input",{type:"text",value:p,onChange:t=>k(t.target.value),placeholder:"Email / Twitter等",className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 text-sm outline-none focus:ring-2 focus:ring-pink-500/30 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:["メッセージ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:i,onChange:t=>u(t.target.value),required:!0,className:"w-full p-3 rounded-lg border border-gray-300 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 text-sm h-32 resize-none outline-none focus:ring-2 focus:ring-pink-500/30 dark:text-white",placeholder:"ここに内容を入力してください..."})]}),j==="error"&&e.jsxs("p",{className:"text-xs text-red-500 font-bold flex items-center gap-1",children:[e.jsx(w,{size:12})," 送信に失敗しました。時間をおいて試してください。"]}),e.jsxs("button",{type:"submit",disabled:y||!i,className:`w-full py-4 font-bold rounded-xl transition-all flex items-center justify-center gap-2 border-2 
                             bg-pink-500 border-pink-500 text-white shadow-lg shadow-pink-100 dark:shadow-none
                             dark:bg-pink-400 dark:border-pink-400 dark:text-white
                             hover:bg-pink-600 hover:border-pink-600 dark:hover:bg-pink-500 dark:hover:border-pink-500
                             disabled:bg-transparent disabled:border-pink-500/20 disabled:text-pink-500/40 disabled:shadow-none
                             dark:disabled:bg-pink-400/5 dark:disabled:border-pink-400/30 dark:disabled:text-pink-400/60 dark:disabled:cursor-not-allowed`,children:[y?e.jsx(_,{className:"animate-spin",size:20}):e.jsx(D,{size:20}),e.jsx("span",{children:"送信する"})]})]})]}),e.jsx("div",{className:"text-center text-xs text-gray-400",children:"Version 2.5.2"})]})};export{V as default};
